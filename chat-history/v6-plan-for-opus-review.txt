Design the implementation plan for v6.0 complete workflow system based on the following requirements and exploration findings.

User Requirements
Core Features to Implement:

Entry Point Routing: Resume upload â†’ Full Analysis â†’ Bullet Optimization â†’ JD Comparison
Job History Schema v2.0: Add hard/soft skills separation, education, certifications
Keyword/Skills Extraction: Extract and match keywords from job descriptions
Professional Summary Customization: Support BOTH master summary AND per-JD customization
Restore 17-Point JD Parsing: From legacy system (docs/prompts/legacy-prompts/JD_Comparative_Prompt.md)
Fresh Start: No migration of existing job histories - new schema only
User Design Decisions:

Summary strategy: Both options available (master OR per-JD)
Migration: Fresh start - new schema only
JD Parsing: Restore full 17-point schema
Routing: Hybrid auto-detect with confirmation
User Constraint:
"Do not want to modify, update, or change existing code, but strategically and surgically make additions or changes"

Current Architecture
3 Existing Modes:

Mode 1: Full Resume Analysis (PROJECT-INSTRUCTIONS.md)
Mode 2: Bullet Optimization (modes/mode-2-bullet-optimization.md)
Mode 3: JD Comparison (modes/mode-3-jd-comparison.md)
Current Job History:

File: shared/job-summary-creation.md
Schema: 8 sections (Job Title, Company, Dates, Summary, Responsibilities, Achievements, Skills Demonstrated, Impact/Metrics)
No hard/soft skill separation
Plain text format in claude_generated_job_history_summaries.txt
Current Routing:

Declarative trigger-based (XML patterns)
Each mode defines entry conditions
No centralized controller
Legacy Features to Restore
From docs/prompts/legacy-prompts/JD_Comparative_Prompt.md:

17-Point JD Schema:

company, location, workLifestyle, remoteRestrictions
clearance, employeeType, travelRequired, salaryRange
requiredExperience, requiredEducation
jobResponsibilities (array)
skillsNeeded, skillsWanted (HARD skills - required/preferred)
softSkillsNeeded, softSkillsWanted (SOFT skills - required/preferred)
qualificationsNeeded, qualificationsWanted
certificationsNeeded, certificationsWanted
Hard vs Soft Skills Distinction:

Hard: Technical, measurable (Python, SQL, CAD, GDPR)
Soft: Interpersonal, behavioral (communication, leadership, teamwork)
Evidence-Based Matching:

Structured array with content and source fields
Citations: "Company | Job Title" format
Per-requirement gap tracking
Requirement Categorization:

Map all JD fields into subcategories
Analyze EVERY requirement individually
Status: Matched/Partial/Missing
Enhanced Output Formatting:

Color key legend: [MATCHED] (Green) | [PARTIAL] (Yellow) | [MISSING] (Red)
Overall score summary block
Section headers for each category
Sorted: Matched â†’ Partial â†’ Missing
Blocking Gates:

Gate 1: Hard skill deficit (missing > matched)
Gate 2: Low match score (<30)
Suppress recommendations if gates fail
From docs/prompts/legacy-prompts/Resume_Analyzer_Prompt.md:

Professional Summary Requirements:
3-4 sentence narrative
Aggregate career metrics (X years, Y industries)
Company name-dropping (2-3 recognizable brands)
2-3 hard skills as keywords
1-2 soft skills
Leadership scope quantified
Key Design Questions
Where should the entry point routing logic live?

New file? Existing mode enhancement? Shared module?
How should job history schema v2.0 be structured?

Maintain backward compatibility with v1.0 format?
How to represent hard/soft skills array?
How to store education and certifications?
How should 17-point JD parsing integrate with Mode 3?

Replace existing extraction or enhance it?
Where to store parsed JD data?
How should professional summary customization work?

New section in job history?
Mode 1 generates master summary?
Mode 3 generates per-JD summary?
File modification strategy:

Which files need changes vs new files?
How to maintain surgical approach (no rewrites)?
Industry Best Practices (2025)
98% of Fortune 500 use ATS systems
Keyword matching is critical for ATS pass-through
Professional summary should be JD-tailored (not generic)
Hard skills need exact keyword matches
Soft skills can be inferred from context
Design Deliverables
Please provide:

Architecture Overview:

Component diagram showing workflow flow
File structure (new files + modified files)
Data flow between modes
Job History Schema v2.0:

Complete schema definition
Example format
Storage location and format
17-Point JD Parsing:

Where to implement (new file vs Mode 3 enhancement)
Schema structure
Integration points
Entry Point Routing:

Logic flow diagram
Implementation location
User interaction pattern
Professional Summary:

Master summary generation (Mode 1)
Per-JD summary customization (Mode 3)
Storage and retrieval mechanism
Implementation Sequence:

Step-by-step build order
Dependencies between components
Testing strategy
File Modification Plan:

Specific files to create (with purpose)
Specific files to modify (with change description)
Files to NOT touch (to maintain surgical approach)
Focus on creating a comprehensive, implementable plan that respects the user's constraint of surgical changes while delivering all required functionality.

ðŸ¤–
Claude
Sonnet 4.5
12/28/2025, 3:02:09 PM
I'll analyze the current codebase, review the plan, and design a comprehensive implementation strategy for v6.0. Let me start by exploring the existing structure and the referenced plan document.

Read v4.7_output_optimization_enhancements.md
File does not exist.
Read PROJECT-INSTRUCTIONS.md
Read mode-2-bullet-optimization.md
Read mode-3-jd-comparison.md
Read job-summary-creation.md
Read JD_Comparative_Prompt.md
Read Resume_Analyzer_Prompt.md
ðŸ¤–
Claude
Sonnet 4.5
12/28/2025, 3:02:19 PM
Let me search for additional files referenced and explore the structure further.

Glob **/*.txt
Bash
List all files in repository root
IN
ls -la /Users/mkaplan/Documents/GitHub/optimize-my-resume
OUT
total 168
drwxr-xr-x@ 24 mkaplan  staff    768 Dec 28 14:29 .
drwxr-xr-x@ 10 mkaplan  staff    320 Dec 27 18:57 ..
drwx------   3 mkaplan  staff     96 Dec 28 14:51 .claude
-rw-r--r--   1 mkaplan  staff   6148 Dec 28 14:15 .DS_Store
drwxr-xr-x@ 16 mkaplan  staff    512 Dec 28 14:21 .git
-rw-r--r--@  1 mkaplan  staff     66 Dec 27 17:34 .gitattributes
-rw-r--r--   1 mkaplan  staff     29 Dec 28 14:29 .gitignore
drwxr-xr-x@  2 mkaplan  staff     64 Dec 27 17:02 {core,modes,wireframes,shared}
-rw-r--r--   1 mkaplan  staff   2533 Dec 27 19:12 CHANGELOG.md
drwxr-xr-x@  3 mkaplan  staff     96 Dec 27 19:12 chat-history
drwxr-xr-x   6 mkaplan  staff    192 Dec 27 19:12 core
drwxr-xr-x@ 11 mkaplan  staff    352 Dec 28 14:03 docs
drwxr-xr-x   5 mkaplan  staff    160 Dec 28 14:04 modes
-rw-r--r--   1 mkaplan  staff     60 Dec 27 19:12 optimize-my-resume.code-workspace
-rw-r--r--   1 mkaplan  staff  23240 Dec 28 14:04 PROJECT-INSTRUCTIONS.md
-rw-r--r--   1 mkaplan  staff  20342 Dec 27 19:12 quick-start-mode.md
-rw-r--r--   1 mkaplan  staff   2899 Dec 27 19:12 README.md
drwxr-xr-x@  3 mkaplan  staff     96 Dec 27 19:12 scripts
-rw-r--r--   1 mkaplan  staff    535 Dec 27 19:12 settings.json
-rw-r--r--   1 mkaplan  staff   3513 Dec 27 19:12 settings.local.json
-rw-r--r--   1 mkaplan  staff   1200 Dec 27 19:12 settings.local.json.example
drwxr-xr-x   4 mkaplan  staff    128 Dec 27 19:12 shared
drwxr-xr-x@  4 mkaplan  staff    128 Dec 27 19:12 templates
drwxr-xr-x   5 mkaplan  staff    160 Dec 27 19:12 wireframes
Bash
Find markdown files in repository
IN
find /Users/mkaplan/Documents/GitHub/optimize-my-resume -name "*.md" -type f | head -30
OUT
/Users/mkaplan/Documents/GitHub/optimize-my-resume/core/verb-categories.md
/Users/mkaplan/Documents/GitHub/optimize-my-resume/core/format-rules.md
/Users/mkaplan/Documents/GitHub/optimize-my-resume/core/fit-thresholds.md
/Users/mkaplan/Documents/GitHub/optimize-my-resume/core/metrics-requirements.md
/Users/mkaplan/Documents/GitHub/optimize-my-resume/modes/mode-2-bullet-optimization.md
/Users/mkaplan/Documents/GitHub/optimize-my-resume/modes/mode-3-jd-comparison.md
/Users/mkaplan/Documents/GitHub/optimize-my-resume/modes/mode-1-full-analysis.md
/Users/mkaplan/Documents/GitHub/optimize-my-resume/CHANGELOG.md
/Users/mkaplan/Documents/GitHub/optimize-my-resume/wireframes/mode-2-workflow.md
/Users/mkaplan/Documents/GitHub/optimize-my-resume/wireframes/mode-1-workflow.md
/Users/mkaplan/Documents/GitHub/optimize-my-resume/wireframes/mode-3-workflow.md
/Users/mkaplan/Documents/GitHub/optimize-my-resume/shared/job-summary-creation.md
/Users/mkaplan/Documents/GitHub/optimize-my-resume/shared/initial-greeting.md
/Users/mkaplan/Documents/GitHub/optimize-my-resume/docs/CHANGELOG.md
/Users/mkaplan/Documents/GitHub/optimize-my-resume/docs/workflows/Plan_Mode_Workflow.md
/Users/mkaplan/Documents/GitHub/optimize-my-resume/docs/workflows/Patch_Workflow.md
/Users/mkaplan/Documents/GitHub/optimize-my-resume/docs/workflows/Documentation_Update_Workflow.md
/Users/mkaplan/Documents/GitHub/optimize-my-resume/docs/README.md
/Users/mkaplan/Documents/GitHub/optimize-my-resume/docs/lessons-learned/Lessons_Learned_Claude_Code_Skills_Architecture.md
/Users/mkaplan/Documents/GitHub/optimize-my-resume/docs/CHANGELOG_DEV.md
/Users/mkaplan/Documents/GitHub/optimize-my-resume/docs/prompts/legacy-prompts/Resume_Analyzer_Prompt.md
/Users/mkaplan/Documents/GitHub/optimize-my-resume/docs/prompts/legacy-prompts/Resume_Analyzer_Architecture.md
/Users/mkaplan/Documents/GitHub/optimize-my-resume/docs/prompts/legacy-prompts/JD_Comparative_Prompt.md
/Users/mkaplan/Documents/GitHub/optimize-my-resume/docs/prompts/dev/Pre_Merge_Checklist.md
/Users/mkaplan/Documents/GitHub/optimize-my-resume/docs/prompts/dev/Testing_Protocol.md
/Users/mkaplan/Documents/GitHub/optimize-my-resume/docs/prompts/dev/Update_Doc_Prompt.md
/Users/mkaplan/Documents/GitHub/optimize-my-resume/docs/prompts/dev/README.md
/Users/mkaplan/Documents/GitHub/optimize-my-resume/README.md
/Users/mkaplan/Documents/GitHub/optimize-my-resume/quick-start-mode.md
/Users/mkaplan/Documents/GitHub/optimize-my-resume/PROJECT-INSTRUCTIONS.md
Read ADD_REMOTE_WORK_LOGIC.md
File does not exist.
WebSearch 2025 resume ATS systems keyword matching best practices professional summary customization
ðŸ¤–
Claude
Sonnet 4.5
12/28/2025, 3:02:45 PM
Now let me check for the v4.7 plan and explore the repository structure more:

Bash
Search for v4.7 plan and enhancement documents
IN
find /Users/mkaplan/Documents/GitHub/optimize-my-resume -name "*v4.7*" -o -name "*enhancement*" -o -name "*plan*" | grep -v ".git"
OUT
/Users/mkaplan/Documents/GitHub/optimize-my-resume/docs/plans
Bash
Check for plans directory
IN
ls -la /Users/mkaplan/Documents/GitHub/optimize-my-resume/docs/plans 2>/dev/null || echo "No plans directory found"
OUT
total 0
drwxr-xr-x   3 mkaplan  staff   96 Dec 27 19:12 .
drwxr-xr-x@ 11 mkaplan  staff  352 Dec 28 14:03 ..
-rw-r--r--   1 mkaplan  staff    0 Dec 27 19:12 .gitkeep
Read format-rules.md
Read verb-categories.md
ðŸ¤–
Claude
Sonnet 4.5
12/28/2025, 3:02:52 PM
Now let me check the git status more carefully and look for any untracked files:

Bash
Check git status in short format
IN
git status --short
OUT
M .DS_Store
?? .gitignore
Bash
List markdown files in root
IN
ls -la /Users/mkaplan/Documents/GitHub/optimize-my-resume/*.md
OUT
-rw-r--r--  1 mkaplan  staff   2533 Dec 27 19:12 /Users/mkaplan/Documents/GitHub/optimize-my-resume/CHANGELOG.md
-rw-r--r--  1 mkaplan  staff  23240 Dec 28 14:04 /Users/mkaplan/Documents/GitHub/optimize-my-resume/PROJECT-INSTRUCTIONS.md
-rw-r--r--  1 mkaplan  staff  20342 Dec 27 19:12 /Users/mkaplan/Documents/GitHub/optimize-my-resume/quick-start-mode.md
-rw-r--r--  1 mkaplan  staff   2899 Dec 27 19:12 /Users/mkaplan/Documents/GitHub/optimize-my-resume/README.md
Bash
Check if JD_Comparative_Prompt exists in docs/prompts
IN
cat /Users/mkaplan/Documents/GitHub/optimize-my-resume/docs/prompts/JD_Comparative_Prompt.md 2>/dev/null | head -50
OUT
ðŸ¤–
Claude
Sonnet 4.5
12/28/2025, 3:02:59 PM
Now let me perform the Google search to compare plans as requested in the CLAUDE.md instructions:

WebSearch resume optimization workflow architecture job description parsing keyword extraction professional summary customization 2025
WebSearch ATS resume builder architecture hard skills soft skills separation job history schema 2025
ðŸ¤–
Claude
Sonnet 4.5
12/28/2025, 3:03:27 PM
Excellent! Now I have all the information I need to create a comprehensive implementation plan. Let me write the complete v6.0 design document.

ðŸ¤–
Claude
Sonnet 4.5
12/28/2025, 3:07:53 PM
I'll analyze the requirements and design a comprehensive implementation plan for v6.0. Let me start by exploring the existing codebase structure and the referenced files.

Read v4.7_output_optimization_enhancements.md
File does not exist.
Read PROJECT-INSTRUCTIONS.md
Read mode-2-bullet-optimization.md
Read mode-3-jd-comparison.md
Read job-summary-creation.md
Read JD_Comparative_Prompt.md
Created
distributed-knitting-leaf-agent-a85044d.md
1394 lines
# Optimize-My-Resume v6.0 Implementation Plan
## Complete Workflow System with Entry Point Routing
**Date Created:** December 28, 2025  
**Plan Status:** Comprehensive Design & Architecture  
**Constraint:** Surgical additions only - no rewrites of existing code
---
## EXECUTIVE SUMMARY
This plan designs the v6.0 complete workflow system incorporating:
1. Entry Point Routing with auto-detect + confirmation
2. Job History Schema v2.0 (hard/soft skills separation, education, certifications)
3. Keyword/Skills Extraction from job descriptions
4. Professional Summary Customization (master AND per-JD)
5. 17-Point JD Parsing restoration from legacy system
6. Fresh start (no v1.0 migration)
**User Constraint:** "Do not want to modify, update, or change existing code, but strategically and surgically make additions or changes"
**Analysis Performed:**
- Reviewed current 3-mode architecture (Full Analysis, Bullet Optimization, JD Comparison)
- Analyzed legacy 17-point JD schema and evidence-based matching
- Evaluated 2025 industry best practices via Google search
- Compared user requirements against existing patterns
---
## PART 1: INTENTIONS & EXPECTATIONS ANALYSIS
### User Intentions Captured
**Core Need:** Create an integrated workflow where:
- User uploads resume â†’ System analyzes â†’ Optimizes bullets â†’ Compares against JD
- All job history uses new schema (v2.0) with hard/soft skill distinction
- Keywords extracted from JDs and matched against experience
- Professional summary can be BOTH master (career-wide) AND customized per-JD
- Restore full 17-point JD parsing with evidence citations
**Expected Output Changes After Implementation:**
1. **Entry Point Experience:**
   - BEFORE: User must manually select mode or trigger via specific keywords
   - AFTER: System detects intent, confirms with user, routes automatically
2. **Job History Data:**
   - BEFORE: 8-section plain text (Job Title, Company, Dates, Summary, Responsibilities, Achievements, Skills Demonstrated, Impact/Metrics)
   - AFTER: Structured v2.0 with hard skills array, soft skills array, education, certifications
3. **JD Analysis:**
   - BEFORE: Basic fit assessment with location blocking
   - AFTER: Full 17-point schema with skillsNeeded/skillsWanted (HARD), softSkillsNeeded/softSkillsWanted (SOFT), evidence-based gap tracking
4. **Professional Summary:**
   - BEFORE: Mode 1 generates generic 3-4 sentence summary
   - AFTER: Mode 1 creates master summary; Mode 3 can customize per-JD with targeted keywords
5. **Keyword Matching:**
   - BEFORE: Implicit in Mode 3 gap analysis
   - AFTER: Explicit extraction, storage, and matching with citations ("Company | Job Title" format)
---
## PART 2: GEMINI'S PLAN (Referenced in CLAUDE.md)
**Note:** The CLAUDE.md references `@docs/plans/v4.7_output_optimization_enhancements.md`, but this file does not exist in the repository. The `docs/plans/` directory only contains a `.gitkeep` placeholder.
**Inference:** Since no Gemini plan exists, I will design from first principles based on:
- User requirements provided
- Existing v5.0 architecture patterns
- Legacy prompt features to restore
- 2025 industry best practices
---
## PART 3: CLAUDE'S RECOMMENDED PLAN
### Architecture Philosophy
**Principle 1: Layered Augmentation**
- Don't rewrite existing modes - ADD new capabilities
- Create new shared modules that existing modes can call
- Enhance via composition, not replacement
**Principle 2: Data-Driven Design**
- New schema v2.0 as source of truth
- Backward-compatible storage (can coexist with v1.0)
- Structured JSON for machine parsing, markdown for human reading
**Principle 3: Progressive Enhancement**
- Core workflow works without all features
- Each feature adds value independently
- Fail gracefully if components unavailable
---
### 1. ARCHITECTURE OVERVIEW
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    USER INPUT (Resume Upload)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            ENTRY POINT ROUTER (NEW MODULE)                   â”‚
â”‚  - Auto-detect intent from upload content                    â”‚
â”‚  - Check for existing job history                            â”‚
â”‚  - Confirm workflow with user                                â”‚
â”‚  - Set workflow flags in session state                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚               â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â†“                                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   MODE 1:       â”‚              â”‚  MODE 2:             â”‚
â”‚ Full Analysis   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ Bullet Optimization  â”‚
â”‚                 â”‚          â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ - Parse resume  â”‚          â”‚
â”‚ - Create Job    â”‚          â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   History v2.0  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â†’â”‚  SHARED MODULES      â”‚
â”‚ - Generate      â”‚          â”‚   â”‚  (NEW/ENHANCED)      â”‚
â”‚   Master Summaryâ”‚          â”‚   â”‚                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚   â”‚ 1. Job History v2.0  â”‚
          â”‚                  â”‚   â”‚ 2. JD Parser (17pt)  â”‚
          â”‚                  â”‚   â”‚ 3. Keyword Extractor â”‚
          â†“                  â””â”€â”€â†’â”‚ 4. Summary Generator â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚ 5. Evidence Matcher  â”‚
â”‚   MODE 3:       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ 6. Skills Categorizerâ”‚
â”‚ JD Comparison   â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                 â”‚
â”‚ - Parse JD (17) â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ - Extract       â”‚              â”‚  DATA STORAGE        â”‚
â”‚   keywords      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                      â”‚
â”‚ - Match evidenceâ”‚              â”‚ 1. job_history_v2.0  â”‚
â”‚ - Generate      â”‚              â”‚    .json             â”‚
â”‚   per-JD summaryâ”‚              â”‚ 2. job_history_v2.0  â”‚
â”‚ - Optimize      â”‚              â”‚    .md (human)       â”‚
â”‚   bullets       â”‚              â”‚ 3. jd_parsed/        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚    [company]_[job]   â”‚
                                 â”‚    .json             â”‚
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
**Key Architectural Decisions:**
1. **No Mode Rewrites:** Existing Mode 1, 2, 3 files remain untouched in their core logic
2. **Shared Module Pattern:** New capabilities live in `/shared/` directory
3. **Data Layer Separation:** v2.0 schema stored separately, can coexist with v1.0
4. **Router as Orchestrator:** New entry point coordinates workflow without changing mode internals
---
### 2. JOB HISTORY SCHEMA v2.0
**Design Decision:** JSON for machine processing, Markdown for human readability
#### Storage Location
- **Machine Format:** `/shared/data/job_history_v2.0.json`
- **Human Format:** `/shared/data/job_history_v2.0.md`
- **Legacy Format:** `/mnt/project/claude_generated_job_history_summaries.txt` (unchanged)
#### v2.0 Schema Structure
```json
{
  "schema_version": "2.0",
  "created_date": "2025-12-28",
  "last_updated": "2025-12-28",
  "master_summary": {
    "text": "3-4 sentence aggregate career summary",
    "aggregate_metrics": [
      {
        "type": "years_experience",
        "value": "12+",
        "context": "Business Analysis and Technical Writing"
      },
      {
        "type": "revenue_generated",
        "value": "$25M",
        "context": "Total career revenue impact across 6 contracts"
      }
    ],
    "notable_companies": ["Company A", "Company B", "Company C"],
    "hard_skills_highlighted": ["Python", "SQL", "Agile"],
    "soft_skills_highlighted": ["Leadership", "Communication"]
  },
  "education": [
    {
      "degree": "Bachelor of Science",
      "major": "Computer Science",
      "university": "University Name",
      "graduation_year": "2010",
      "gpa": "3.8",
      "honors": ["Summa Cum Laude"],
      "relevant_coursework": ["Data Structures", "Algorithms"]
    }
  ],
  "certifications": [
    {
      "name": "PMP - Project Management Professional",
      "issuing_organization": "PMI",
      "issue_date": "2020-03",
      "expiration_date": "2023-03",
      "credential_id": "12345678",
      "status": "active"
    }
  ],
  "positions": [
    {
      "position_number": 1,
      "job_title": "Senior Business Analyst",
      "company": "DHS CISA",
      "client": "Department of Homeland Security",
      "employment_type": "Contract (FTE)",
      "start_date": "2021-06",
      "end_date": "2023-12",
      "duration_months": 30,
      "location": "Remote",
      "summary": "Led requirements analysis for cybersecurity initiatives...",
      
      "responsibilities": [
        "Elicited requirements from 20+ stakeholders across 5 departments",
        "Facilitated Agile ceremonies for 3 Scrum teams"
      ],
      
      "achievements": [
        {
          "description": "Delivered MVP 3 months ahead of schedule",
          "metric_type": "time_saved",
          "metric_value": "3 months",
          "impact": "Enabled early user testing and feedback cycles"
        }
      ],
      
      "hard_skills": [
        {
          "skill": "Python",
          "proficiency": "advanced",
          "context": "Automated data analysis workflows"
        },
        {
          "skill": "SQL",
          "proficiency": "expert",
          "context": "Database schema design and query optimization"
        },
        {
          "skill": "JIRA",
          "proficiency": "expert",
          "context": "Managed 500+ user stories across 12 sprints"
        },
        {
          "skill": "Confluence",
          "proficiency": "advanced",
          "context": "Documentation and knowledge management"
        }
      ],
      
      "soft_skills": [
        {
          "skill": "Leadership",
          "evidence": "Led cross-functional team of 15 members",
          "source": "DHS CISA | Senior Business Analyst"
        },
        {
          "skill": "Communication",
          "evidence": "Presented findings to C-suite executives quarterly",
          "source": "DHS CISA | Senior Business Analyst"
        },
        {
          "skill": "Stakeholder Management",
          "evidence": "Coordinated with 20+ stakeholders across 5 departments",
          "source": "DHS CISA | Senior Business Analyst"
        }
      ],
      
      "impact_metrics": [
        "$2M cost avoidance through process automation",
        "35% reduction in defect rate",
        "98% stakeholder satisfaction score"
      ],
      
      "tools_technologies": ["Python", "SQL", "JIRA", "Confluence", "Tableau", "PowerBI"],
      
      "methodologies": ["Agile Scrum", "SAFe", "Waterfall hybrid"],
      
      "domain_expertise": ["Cybersecurity", "Federal government", "Enterprise systems"]
    }
  ]
}
```
**Migration Strategy:** Fresh start - no v1.0 conversion
- Users with existing v1.0 job histories can keep them
- New Mode 1 analysis creates v2.0 format
- v1.0 remains readable for historical reference
- System checks for v2.0 first, falls back to v1.0 if not found
---
### 3. 17-POINT JD PARSING RESTORATION
**Design Decision:** Create dedicated module in `/shared/jd-parser-17point.md`
#### Implementation Location
**NEW FILE:** `/shared/jd-parser-17point.md`
This module will be IMPORTED by Mode 3 (not replace Mode 3's existing logic)
#### 17-Point Schema Structure
```javascript
{
  "jd_id": "unique_identifier_company_jobtitle",
  "parsed_date": "2025-12-28",
  "source_jd_text": "raw job description",
  
  // Basic Info (Points 1-8)
  "company": "Employer name",
  "location": "City, State or Remote",
  "workLifestyle": "Remote" | "On-Site" | "Hybrid",
  "remoteRestrictions": "CA residents only" or null,
  "clearance": "Secret clearance required" or null,
  "employeeType": "Full-time" | "Part-time" | "Contract",
  "travelRequired": "10% travel" or "None",
  "salaryRange": "$90K-$120K" or null,
  
  // Experience & Education (Points 9-10)
  "requiredExperience": "5+ years Business Analysis",
  "requiredEducation": "Bachelor's degree in related field",
  
  // Responsibilities (Point 11)
  "jobResponsibilities": [
    "Elicit and document business requirements",
    "Create process flow diagrams",
    "Facilitate stakeholder workshops"
  ],
  
  // HARD SKILLS (Points 12-13)
  "skillsNeeded": [
    // Required hard skills
    "SQL",
    "Python",
    "JIRA",
    "Agile methodology"
  ],
  "skillsWanted": [
    // Preferred hard skills
    "Tableau",
    "PowerBI",
    "Salesforce"
  ],
  
  // SOFT SKILLS (Points 14-15)
  "softSkillsNeeded": [
    // Required soft skills
    "Communication",
    "Leadership",
    "Problem-solving"
  ],
  "softSkillsWanted": [
    // Preferred soft skills
    "Adaptability",
    "Conflict resolution"
  ],
  
  // Qualifications & Certifications (Points 16-19)
  "qualificationsNeeded": [
    "5+ years enterprise software experience",
    "Federal government experience"
  ],
  "qualificationsWanted": [
    "Healthcare domain knowledge",
    "Startup experience"
  ],
  "certificationsNeeded": [
    "PMP certification"
  ],
  "certificationsWanted": [
    "CBAP",
    "Six Sigma Green Belt"
  ]
}
```
**Hard vs Soft Skills Distinction Logic:**
```python
# Pseudo-code for skill categorization
def categorize_skill(skill_text):
    hard_skill_indicators = [
        "programming language", "software", "tool", "platform",
        "framework", "methodology", "certification", "technical",
        "system", "database", "cloud", "analytics"
    ]
    
    soft_skill_indicators = [
        "communication", "leadership", "teamwork", "collaboration",
        "problem-solving", "critical thinking", "time management",
        "adaptability", "creativity", "emotional intelligence"
    ]
    
    # Check context and keywords
    if any(indicator in skill_text.lower() for indicator in hard_skill_indicators):
        return "hard"
    elif any(indicator in skill_text.lower() for indicator in soft_skill_indicators):
        return "soft"
    else:
        # Default: Technical nouns = hard, behavioral adjectives = soft
        return categorize_via_nlp(skill_text)
```
**Storage Location:**
- `/shared/data/jd_parsed/[company]_[jobtitle]_parsed.json`
- Example: `/shared/data/jd_parsed/FDA_Business_Analyst_II_parsed.json`
---
### 4. KEYWORD/SKILLS EXTRACTION MODULE
**Design Decision:** Create extraction engine in `/shared/keyword-extractor.md`
#### Extraction Logic
```yaml
Input: Parsed JD (17-point schema)
Process:
  1. Extract all skills from JD:
     - skillsNeeded (hard) â†’ Priority: CRITICAL
     - skillsWanted (hard) â†’ Priority: HIGH
     - softSkillsNeeded â†’ Priority: CRITICAL
     - softSkillsWanted â†’ Priority: HIGH
     - jobResponsibilities â†’ Extract implied skills â†’ Priority: MEDIUM
  
  2. Normalize keywords:
     - "Agile methodology" = "Agile" = "Scrum"
     - "Microsoft SQL Server" = "SQL Server" = "SQL"
     - Create synonym mapping
  
  3. Weight by frequency:
     - Count mentions across JD sections
     - Skills mentioned 3+ times = CRITICAL
     - Skills mentioned 2 times = HIGH
     - Skills mentioned 1 time = MEDIUM
  
  4. Categorize by type:
     - Hard skills: Technical, Tools, Platforms
     - Soft skills: Interpersonal, Behavioral
     - Domain: Industry-specific knowledge
     - Certifications: Required credentials
Output: Structured keyword database
{
  "jd_id": "FDA_Business_Analyst_II",
  "extraction_date": "2025-12-28",
  "keywords": [
    {
      "term": "SQL",
      "category": "hard_skill",
      "subcategory": "programming_language",
      "priority": "CRITICAL",
      "mentions": 5,
      "sections": ["skillsNeeded", "jobResponsibilities", "qualificationsNeeded"],
      "synonyms": ["SQL Server", "MySQL", "PostgreSQL"],
      "exact_match_required": true
    },
    {
      "term": "Communication",
      "category": "soft_skill",
      "subcategory": "interpersonal",
      "priority": "CRITICAL",
      "mentions": 3,
      "sections": ["softSkillsNeeded", "jobResponsibilities"],
      "synonyms": ["Communicate", "Verbal communication", "Written communication"],
      "exact_match_required": false  // Can be inferred from context
    }
  ]
}
```
**Integration Point:**
- Mode 3 calls this AFTER JD parsing
- Extracted keywords used for evidence matching
- Keywords inform bullet optimization recommendations
---
### 5. PROFESSIONAL SUMMARY CUSTOMIZATION
**Design Decision:** Two-tier summary system
#### Tier 1: Master Summary (Mode 1 - Full Analysis)
**Location:** Stored in job_history_v2.0.json under `master_summary`
**Generation Logic:**
```yaml
When: Mode 1 completes full resume analysis
Process:
  1. Aggregate career metrics:
     - Total years experience (calculated from positions)
     - Total revenue/cost savings (sum all positions)
     - Number of companies/industries worked
     - Largest team led, budget managed
  
  2. Identify notable companies:
     - Extract company names from top 3 positions
     - Prioritize Fortune 500, recognizable brands
  
  3. Select top hard skills:
     - Count frequency across ALL positions
     - Choose top 2-3 most mentioned
  
  4. Select top soft skills:
     - Extract from soft_skills arrays
     - Choose 1-2 most prominent
  
  5. Compose 3-4 sentence summary:
     - Sentence 1: Years + Domain + Top hard skills
     - Sentence 2: Aggregate metrics + Notable companies
     - Sentence 3: Leadership/scope quantified
     - Sentence 4 (optional): Unique differentiator
Output: Master summary stored in v2.0 schema
```
**Example Master Summary:**
> "Business Analyst with 12+ years driving digital transformation using Agile, SQL, and Python across federal and commercial sectors. Delivered $25M in cumulative value working with DHS, FDA, and Department of Energy. Led cross-functional teams of up to 20 members managing $5M+ budgets. Recognized for translating complex technical requirements into stakeholder-friendly solutions that exceed compliance standards."
#### Tier 2: Per-JD Customized Summary (Mode 3 - JD Comparison)
**Location:** Generated dynamically, stored in JD-specific output file
**Generation Logic:**
```yaml
When: Mode 3 completes JD comparison
Process:
  1. Start with Master Summary as template
  
  2. Inject JD-specific keywords:
     - Replace generic skills with JD CRITICAL keywords
     - Example: "Agile, SQL, Python" â†’ "SAFe Agile, Oracle SQL, Salesforce"
  
  3. Emphasize matching experience:
     - If JD wants "federal government", lead with federal companies
     - If JD wants "healthcare", mention healthcare domain
  
  4. Mirror JD language:
     - Use exact phrases from JD where natural
     - "data-driven decision making" if JD says that
  
  5. Maintain 300-350 character limit
  
  6. Preserve aggregate metrics (don't repeat position-specific)
Output: Per-JD summary in bullet output file
```
**Example Per-JD Summary (for FDA Business Analyst role):**
> "Business Analyst with 12+ years in federal healthcare systems using SAFe Agile, Oracle SQL, and FDA compliance frameworks. Delivered $25M in value for agencies including FDA, DHS, and HHS. Led 20+ person teams managing $5M+ budgets for enterprise EHR implementations. Expert in translating 21 CFR Part 11 requirements into validated technical solutions."
**Storage Strategy:**
- Master summary: Persistent in job_history_v2.0.json
- Per-JD summaries: Stored in `/shared/data/summaries/[company]_[job]_summary.txt`
- User can choose which to use in final resume
---
### 6. EVIDENCE-BASED MATCHING & GAP TRACKING
**Design Decision:** Restore legacy evidence structure with citations
#### Evidence Matching Logic
**NEW FILE:** `/shared/evidence-matcher.md`
```yaml
Input: 
  - Parsed JD keywords (from keyword extractor)
  - Job History v2.0 (all positions)
Process:
  For each JD requirement:
    1. Search across ALL positions for evidence
    
    2. Match types:
       - EXACT: Keyword found verbatim in hard_skills or tools_technologies
       - PARTIAL: Synonym or related term found
       - INFERRED: Soft skill demonstrated via achievement context
       - MISSING: No evidence found
    
    3. Collect evidence with citations:
       - Format: "Evidence text | Source"
       - Source: "Company | Job Title"
       - Multiple sources if found in multiple positions
    
    4. Rank evidence:
       - Position 1 (most recent) = Highest value
       - Evidence with metrics > Evidence without
       - Direct mention > Inferred
Output: Requirement Analysis with Evidence
{
  "requirement": "SQL database design",
  "category": "hard_skill",
  "priority": "CRITICAL",
  "status": "MATCHED",
  "match_strength": "EXACT",
  "evidence": [
    {
      "content": "Designed normalized database schemas for 50+ tables supporting 10K users",
      "source": "DHS CISA | Senior Business Analyst",
      "metric_included": true,
      "relevance_score": 95
    },
    {
      "content": "Optimized SQL queries reducing page load time 60%",
      "source": "FDA | Business Analyst II",
      "metric_included": true,
      "relevance_score": 90
    }
  ],
  "gap_notes": null
}
```
#### Gap Tracking Structure
```json
{
  "overall_match_score": 78,
  "blocking_gates": {
    "gate_1_hard_skill_deficit": false,
    "gate_2_low_match_score": false,
    "gate_3_location_mismatch": false
  },
  "gaps": [
    {
      "requirement": "Salesforce administration",
      "category": "hard_skill",
      "priority": "HIGH",
      "status": "MISSING",
      "gap_severity": "MODERATE",
      "recommendation": "Consider online Salesforce Admin certification course",
      "transferable_skills": ["CRM experience with HubSpot", "Database administration"]
    }
  ],
  "strengths": [
    {
      "requirement": "Federal government experience",
      "category": "domain_expertise",
      "match_score": 100,
      "evidence_count": 4,
      "competitive_advantage": "You have 8+ years federal experience vs. 3+ required"
    }
  ]
}
```
**Integration with Mode 3:**
- Evidence matcher runs BEFORE bullet generation
- If blocking gates triggered, stop and show brief summary
- If gates pass, evidence informs bullet recommendations
- Gap analysis shown in final output
---
### 7. ENTRY POINT ROUTING SYSTEM
**Design Decision:** Create orchestration layer in `/shared/entry-point-router.md`
#### Router Logic Flow
```yaml
Trigger: User uploads resume or pastes resume text
Step 1: Content Analysis
  - Check if content includes:
    * Multiple positions with dates (Full resume)
    * 1-5 standalone bullets (Bullet optimization)
    * Job description + reference to experience (JD comparison)
Step 2: Context Check
  - Does job_history_v2.0.json exist?
  - Does user have active JD parsed files?
  - What was last mode used?
Step 3: Intent Detection
  Heuristics:
    IF (
      content.has_multiple_positions AND
      content.has_education_section AND
      NOT job_history_exists
    ) THEN
      detected_intent = "full_analysis"
    
    ELSE IF (
      content.is_short_text AND
      content.has_bullet_markers AND
      content.bullet_count <= 5
    ) THEN
      detected_intent = "bullet_optimization"
    
    ELSE IF (
      content.mentions_job_description OR
      content.has_requirements_list
    ) THEN
      detected_intent = "jd_comparison"
Step 4: Confirmation Dialog
  Present to user:
    "I detected that you want to [INTENT]. 
    
    I recommend this workflow:
    1. [Step 1 description]
    2. [Step 2 description]
    3. [Step 3 description]
    
    Does this sound right? Or would you prefer a different approach?"
  
  Options:
    A) Proceed with detected workflow
    B) Manually select different mode
    C) Explain options
Step 5: Workflow Execution
  Set session flags:
    - workflow_type: "full_analysis" | "bullet_optimization" | "jd_comparison"
    - auto_proceed: true | false
    - use_v2_schema: true
  
  Route to appropriate mode with flags
Step 6: Handoff
  - Mode 1: Create job_history_v2.0 if not exists
  - Mode 2: Reference job_history_v2.0 if available
  - Mode 3: Use JD parser + evidence matcher
```
#### Routing Decision Tree
```
User Input
    |
    â†“
[Is complete resume?]
    |
    â”œâ”€ YES â†’ [Job history exists?]
    |           |
    |           â”œâ”€ NO â†’ Route to MODE 1 (Full Analysis)
    |           |       â†’ Create job_history_v2.0
    |           |
    |           â””â”€ YES â†’ "Your job history exists. What would you like to do?"
    |                     Options:
    |                     - Update job history (Mode 1)
    |                     - Optimize bullets (Mode 2)
    |                     - Compare to JD (Mode 3)
    |
    â”œâ”€ NO â†’ [Is JD text?]
    |           |
    |           â”œâ”€ YES â†’ Route to MODE 3 (JD Comparison)
    |           |       â†’ Parse JD (17-point)
    |           |       â†’ Extract keywords
    |           |       â†’ Match evidence
    |           |
    |           â””â”€ NO â†’ [Is 1-5 bullets?]
    |                     |
    |                     â””â”€ YES â†’ Route to MODE 2 (Bullet Optimization)
    |
    â””â”€ UNCLEAR â†’ Ask user to clarify intent
```
**Implementation Location:**
- Primary logic: `/shared/entry-point-router.md`
- Called from: PROJECT-INSTRUCTIONS.md (Mode Detection section)
- No changes to individual mode files
---
## PART 4: PLAN COMPARISON & EFFICIENCY ANALYSIS
### Claude Plan vs. Gemini Plan
**Gemini Plan:** Not available (docs/plans/v4.7_output_optimization_enhancements.md does not exist)
**Claude Plan Advantages:**
1. **Surgical Approach:**
   - Zero rewrites of existing mode files
   - All new features in `/shared/` modules
   - Composition over replacement
2. **Data Layer Separation:**
   - v2.0 schema coexists with v1.0
   - Fresh start avoids migration complexity
   - JSON + Markdown dual format
3. **Progressive Enhancement:**
   - Each module works independently
   - Graceful degradation if components missing
   - Can deploy incrementally
4. **Industry-Aligned:**
   - 17-point schema matches 2025 ATS best practices
   - Hard/soft skill separation per latest research
   - Evidence-based matching for credibility
**Potential Inefficiencies:**
1. **Dual Storage:** JSON + Markdown adds complexity
   - **Mitigation:** Generate .md from .json automatically
2. **Router Overhead:** Extra detection step adds latency
   - **Mitigation:** Cache detection results, make confirmation optional
3. **File Proliferation:** Many new files in `/shared/`
   - **Mitigation:** Clear naming conventions, organized subdirectories
### Efficiency Metrics
| Aspect | Claude Plan | Notes |
|--------|-------------|-------|
| **Code Changes** | Minimal | Only additions, no rewrites |
| **Migration Effort** | Zero | Fresh start for v2.0 |
| **Testing Scope** | Modular | Test each component independently |
| **Deployment Risk** | Low | Existing features unaffected |
| **Future Maintenance** | Medium | More files to manage |
| **User Learning Curve** | Low | Auto-routing reduces choices |
---
## PART 5: ALTERNATIVE OPTIONS FROM INDUSTRY RESEARCH
### Google Search Findings (2025 Best Practices)
**Source:** [Top 10 Resume Tips For 2025](https://blog.theinterviewguys.com/top-10-resume-tips-for-2025/)
**Key Insights:**
1. **ATS Keyword Weighting:**
   - Professional summary carries MOST weight for ATS
   - Recommendation: Prioritize keyword density in summary
   - **Impact on Plan:** Validates per-JD summary customization
2. **Exact Phrasing Matters:**
   - ATS doesn't always recognize synonyms
   - Recommendation: Mirror JD wording exactly
   - **Impact on Plan:** Keyword extractor must preserve exact terms
3. **15-25 Keyword Sweet Spot:**
   - Too few = missed by ATS
   - Too many = keyword stuffing penalty
   - **Impact on Plan:** Add keyword density checker to evidence matcher
**Source:** [ATS Resume Builder Architecture](https://www.resumly.ai/blog/designing-a-resume-that-emphasizes-both-hard-skills-and-soft-skills-equally)
**Key Insights:**
1. **Hard Skills = 70-80% of Skills Section:**
   - ATS prioritizes scannable technical skills
   - Soft skills should be PROVEN in experience, not just listed
   - **Impact on Plan:** v2.0 schema correctly separates hard/soft with evidence
2. **Core Competencies Section:**
   - Dedicated section below summary for keyword concentration
   - 3-4 categories organized
   - **Impact on Plan:** Consider adding `core_competencies` to master_summary
3. **Date-Based Skill Weighting:**
   - Some ATS assign experience duration based on date proximity
   - Skills in recent positions weighted higher
   - **Impact on Plan:** Evidence ranker should prioritize recent positions
### Alternative Architectures Considered
**Option A: Database Backend**
- SQLite database for job history instead of JSON
- Pros: Query performance, relational integrity
- Cons: Adds dependency, harder to version control
- **Decision:** Rejected - JSON is simpler for this use case
**Option B: AI-Powered Skill Categorizer**
- Use GPT-4 API to categorize hard vs soft skills
- Pros: More accurate than rules
- Cons: API costs, latency, requires internet
- **Decision:** Deferred - implement rule-based first, AI as v6.1 enhancement
**Option C: Single Unified Mode**
- Merge all 3 modes into one intelligent mode
- Pros: Simpler user experience
- Cons: Violates "surgical changes" constraint
- **Decision:** Rejected - violates user constraint
---
## PART 6: FINAL RECOMMENDATIONS
### Recommended Implementation Sequence
**Phase 1: Foundation (Week 1)**
Priority: CRITICAL - Must implement first
1. Create Job History Schema v2.0
   - Define JSON structure in `/shared/schemas/job-history-v2.0.json`
   - Create template in `/shared/schemas/job-history-v2.0-template.md`
   - Add validation rules
2. Create 17-Point JD Parser
   - Implement `/shared/jd-parser-17point.md`
   - Add hard/soft skill categorization logic
   - Test with 3 sample JDs
3. Create Keyword Extractor
   - Implement `/shared/keyword-extractor.md`
   - Build synonym mapping database
   - Add priority weighting logic
**Phase 2: Integration (Week 2)**
Priority: HIGH - Connects components
4. Create Evidence Matcher
   - Implement `/shared/evidence-matcher.md`
   - Build citation formatter ("Company | Job Title")
   - Add gap tracking structure
5. Enhance Mode 1 (Full Analysis)
   - Add call to create job_history_v2.0.json after analysis
   - Generate master_summary from aggregated data
   - NO changes to existing analysis logic
6. Enhance Mode 3 (JD Comparison)
   - Add call to JD Parser at start
   - Add call to Keyword Extractor after parsing
   - Add call to Evidence Matcher before bullet generation
   - NO changes to existing fit assessment logic
**Phase 3: Routing (Week 3)**
Priority: MEDIUM - Improves UX
7. Create Entry Point Router
   - Implement `/shared/entry-point-router.md`
   - Add detection heuristics
   - Add confirmation dialog logic
8. Update PROJECT-INSTRUCTIONS.md
   - Add router import in Mode Detection section
   - Add workflow flags documentation
   - NO changes to mode behavior descriptions
**Phase 4: Summary Customization (Week 4)**
Priority: MEDIUM - Final feature
9. Create Summary Generator
   - Implement `/shared/summary-generator.md`
   - Add master summary logic (Mode 1)
   - Add per-JD customization logic (Mode 3)
10. Integration Testing
    - Test full workflow: Upload â†’ Analyze â†’ Compare â†’ Optimize
    - Test each mode independently
    - Test error handling and graceful degradation
### Testing Strategy
**Unit Tests (Per Module):**
```yaml
JD Parser:
  - Test: Parse sample JD with all 17 points present
  - Test: Parse minimal JD with only 5 points
  - Test: Correctly categorize 20 hard skills, 10 soft skills
  - Test: Handle missing sections gracefully
Keyword Extractor:
  - Test: Extract keywords with correct priorities
  - Test: Synonym normalization (SQL = SQL Server)
  - Test: Frequency counting across sections
  - Test: Category assignment accuracy
Evidence Matcher:
  - Test: Find exact match in position hard_skills
  - Test: Find inferred match in achievements
  - Test: Return MISSING for gap
  - Test: Citation format correctness
  - Test: Rank evidence by recency and metrics
Summary Generator:
  - Test: Aggregate metrics correctly from 5 positions
  - Test: Extract top 3 hard skills by frequency
  - Test: Maintain 300-350 character limit
  - Test: Per-JD customization injects keywords
  - Test: No repetition of position-specific metrics
```
**Integration Tests:**
```yaml
Full Workflow:
  1. Upload resume with 5 positions
  2. Verify Mode 1 creates job_history_v2.0.json
  3. Verify master_summary generated
  4. Upload JD
  5. Verify JD parsed to 17 points
  6. Verify keywords extracted
  7. Verify evidence matched with citations
  8. Verify per-JD summary customized
  9. Verify bullet recommendations reference evidence
  10. Verify final output file generated
```
### Deployment Sequence
**Deployment 1: Schema + Parser (Safe)**
- Deploy job_history_v2.0 schema (no impact on existing system)
- Deploy JD parser (not called yet)
- Deploy keyword extractor (not called yet)
- Risk: ZERO - no code paths call these yet
**Deployment 2: Mode 1 Enhancement (Low Risk)**
- Add job_history_v2.0 creation to Mode 1
- Add master_summary generation
- Test: Does Mode 1 still work without new modules?
- Risk: LOW - additions only, no replacements
**Deployment 3: Mode 3 Enhancement (Medium Risk)**
- Add JD parser call to Mode 3
- Add keyword extractor call
- Add evidence matcher call
- Test: Does Mode 3 still work if modules fail?
- Risk: MEDIUM - requires error handling
**Deployment 4: Router + Summary Customization (Medium Risk)**
- Deploy entry point router
- Add per-JD summary customization
- Test: Can users bypass router if needed?
- Risk: MEDIUM - changes entry experience
### Success Criteria
**Functional Requirements:**
- [ ] Upload resume â†’ Auto-routes to Mode 1 â†’ Creates v2.0 job history
- [ ] Job history v2.0 contains hard_skills and soft_skills arrays
- [ ] Job history v2.0 contains education and certifications
- [ ] Upload JD â†’ Parses to 17-point schema
- [ ] JD parser correctly categorizes hard vs soft skills (95%+ accuracy on test set)
- [ ] Keywords extracted with priority weighting
- [ ] Evidence matcher finds citations in "Company | Job Title" format
- [ ] Master summary generated with aggregate metrics (no position duplication)
- [ ] Per-JD summary injects critical keywords from JD
- [ ] Blocking gates work (hard skill deficit, low match score)
- [ ] Final output includes evidence-based gap analysis
**Non-Functional Requirements:**
- [ ] Zero changes to existing mode files (except surgical additions)
- [ ] v1.0 job histories still readable (backward compatibility)
- [ ] System degrades gracefully if modules unavailable
- [ ] Performance: JD parsing completes in <5 seconds
- [ ] Performance: Evidence matching completes in <10 seconds
- [ ] Documentation: All new modules have clear docstrings
- [ ] Testing: 90%+ unit test coverage for new modules
**User Experience:**
- [ ] Router confirmation dialog is clear and concise
- [ ] User can override auto-routing if needed
- [ ] Error messages explain what went wrong (not cryptic)
- [ ] Per-JD summary noticeably better than generic master summary
---
## PART 7: RISK MITIGATION
### Identified Risks
**Risk 1: Complexity Creep**
- **Impact:** Too many modules, hard to maintain
- **Mitigation:**
  - Limit to 6 core modules (schema, parser, extractor, matcher, generator, router)
  - Use composition - each module does ONE thing well
  - Document module dependencies clearly
**Risk 2: Performance Degradation**
- **Impact:** Parsing + extraction + matching takes too long
- **Mitigation:**
  - Cache parsed JDs (don't re-parse same JD)
  - Parallelize evidence matching across positions
  - Add performance benchmarks to tests
**Risk 3: Schema Evolution**
- **Impact:** v2.0 schema needs changes in future
- **Mitigation:**
  - Include schema_version in JSON
  - Write migration utility for v2.0 â†’ v2.1
  - Keep v1.0 as fallback indefinitely
**Risk 4: Hard/Soft Skill Misclassification**
- **Impact:** Skills categorized incorrectly, affects matching
- **Mitigation:**
  - Build extensive test set (100 skills)
  - Allow manual override in v2.0 schema
  - Add confidence score to categorization
**Risk 5: User Confusion with Routing**
- **Impact:** Users don't understand workflow suggestions
- **Mitigation:**
  - Clear explanation in confirmation dialog
  - Show example of what will happen
  - Allow manual mode selection always
### Rollback Plan
If deployment causes issues:
1. **Immediate Rollback:**
   - Remove router from PROJECT-INSTRUCTIONS.md
   - System reverts to manual mode selection
   - New modules ignored but don't break anything
2. **Partial Rollback:**
   - Keep schema v2.0 and parser
   - Disable router and evidence matcher
   - System works with reduced features
3. **Data Preservation:**
   - v2.0 job histories remain on disk
   - v1.0 histories unchanged
   - No data loss in any rollback scenario
---
## PART 8: FILE MODIFICATION PLAN
### Files to CREATE
**Core Schema & Data:**
1. `/shared/schemas/job-history-v2.0.json` - Schema definition
2. `/shared/schemas/job-history-v2.0-template.md` - Human-readable template
3. `/shared/data/job_history_v2.0.json` - User's actual data (generated)
4. `/shared/data/job_history_v2.0.md` - Human-readable version (generated)
**New Modules:**
5. `/shared/jd-parser-17point.md` - 17-point JD parsing logic
6. `/shared/keyword-extractor.md` - Keyword extraction from JD
7. `/shared/evidence-matcher.md` - Evidence-based gap analysis
8. `/shared/summary-generator.md` - Master + per-JD summary logic
9. `/shared/entry-point-router.md` - Workflow routing orchestration
10. `/shared/skills-categorizer.md` - Hard vs soft skill classification
**Data Storage Directories:**
11. `/shared/data/jd_parsed/` - Directory for parsed JD JSONs
12. `/shared/data/summaries/` - Directory for per-JD summaries
13. `/shared/data/.gitkeep` - Ensure directories tracked
**Documentation:**
14. `/docs/v6.0-implementation-guide.md` - Developer guide
15. `/docs/v6.0-user-guide.md` - User-facing documentation
16. `/docs/schemas/job-history-v2.0-spec.md` - Technical specification
### Files to MODIFY (Surgically)
**PROJECT-INSTRUCTIONS.md:**
```diff
<mode_detection>
  <overview>
    Upon receiving user input, automatically determine the analysis MODE and route accordingly.
+   <!-- v6.0 Change: Add entry point router for auto-detect + confirm -->
+   <routing_module>
+     Import and execute /shared/entry-point-router.md before mode selection.
+     Router will:
+     - Detect intent from input content
+     - Check for existing job_history_v2.0.json
+     - Present workflow confirmation to user
+     - Set session flags for mode execution
+   </routing_module>
  </overview>
</mode_detection>
```
**modes/mode-1-full-analysis.md:**
```diff
  <behavior>
    - Calculate years of experience using experience_calculation methodology
    - Analyze EVERY position using position-by-position loop
    - Score resume across 4 categories
+   <!-- v6.0 Change: Create job history v2.0 after analysis -->
+   <job_history_creation>
+     After completing analysis, call /shared/summary-generator.md to:
+     1. Create job_history_v2.0.json with all positions
+     2. Separate hard_skills and soft_skills arrays
+     3. Extract education and certifications if present
+     4. Generate master_summary with aggregate metrics
+     5. Store in /shared/data/job_history_v2.0.json
+   </job_history_creation>
    - Output comprehensive analysis report
  </behavior>
```
**modes/mode-3-jd-comparison.md:**
```diff
  <behavior>
    - Pull from /mnt/project/claude_generated_job_history_summaries.txt if company mentioned
+   <!-- v6.0 Change: Use v2.0 job history if available -->
+   - Pull from /shared/data/job_history_v2.0.json if exists (priority)
+   <!-- v6.0 Change: Parse JD with 17-point schema -->
+   <jd_parsing>
+     Execute /shared/jd-parser-17point.md to extract:
+     - All 17 fields (company, location, workLifestyle, etc.)
+     - Hard skills: skillsNeeded, skillsWanted
+     - Soft skills: softSkillsNeeded, softSkillsWanted
+     - Store parsed JD in /shared/data/jd_parsed/[company]_[job].json
+   </jd_parsing>
+   
+   <keyword_extraction>
+     Execute /shared/keyword-extractor.md to:
+     - Extract all keywords from parsed JD
+     - Assign priority weights (CRITICAL/HIGH/MEDIUM)
+     - Normalize synonyms
+     - Output structured keyword database
+   </keyword_extraction>
+   
    - Perform PRELIMINARY FIT ASSESSMENT before generating bullets
+   <!-- v6.0 Change: Evidence-based matching with citations -->
+   <evidence_matching>
+     Execute /shared/evidence-matcher.md to:
+     - Match each JD requirement against job history
+     - Collect evidence with "Company | Job Title" citations
+     - Categorize: MATCHED/PARTIAL/MISSING
+     - Generate gap analysis with transferable skills
+   </evidence_matching>
+   
    - If critical gaps found, ask user about missing experience
    - Only proceed with bullet generation if fit is adequate
+   <!-- v6.0 Change: Generate per-JD customized summary -->
+   <jd_summary_customization>
+     Execute /shared/summary-generator.md with per_jd mode:
+     - Start with master_summary template
+     - Inject JD CRITICAL keywords
+     - Mirror JD language/phrasing
+     - Emphasize matching domain experience
+     - Maintain 300-350 character limit
+     - Store in /shared/data/summaries/[company]_[job]_summary.txt
+   </jd_summary_customization>
+   
    - Perform JD match analysis
    - Identify gaps and strengths
    - Generate optimized bullets tailored to JD keywords
    - Apply verb diversity rule
  </behavior>
```
**shared/job-summary-creation.md:**
```diff
  <summary_generation_process>
+   <!-- v6.0 Change: Generate both v1.0 and v2.0 formats -->
    After collecting user's detailed information:
    
    1. Parse and organize all provided information
+   
+   2. Categorize skills into hard vs soft:
+      - Hard skills: Technical, tools, platforms, methodologies
+      - Soft skills: Interpersonal, behavioral, leadership
    
+   3. Draft v2.0 JSON structure:
+      {
+        "position_number": X,
+        "job_title": "...",
+        "hard_skills": [
+          {"skill": "Python", "proficiency": "advanced", "context": "..."}
+        ],
+        "soft_skills": [
+          {"skill": "Leadership", "evidence": "...", "source": "Company | Title"}
+        ],
+        "education": [...],
+        "certifications": [...]
+      }
+   
-   2. Ask clarifying questions about any gaps
+   4. Ask clarifying questions about any gaps
    
-   3. Draft the summary following this format: [v1.0 format]
+   5. Generate both formats:
+      - v1.0 markdown for legacy compatibility
+      - v2.0 JSON for new features
    
-   4. Review with user to verify accuracy
+   6. Review with user to verify accuracy
    
-   5. Mark for future use as reference material
+   7. Store in both locations:
+      - v1.0: claude_generated_job_history_summaries.txt (append)
+      - v2.0: /shared/data/job_history_v2.0.json (structured)
  </summary_generation_process>
```
### Files to NOT TOUCH
**Leave Completely Unchanged:**
- `/core/format-rules.md` - No changes needed
- `/core/verb-categories.md` - No changes needed
- `/core/fit-thresholds.md` - No changes needed
- `/core/metrics-requirements.md` - No changes needed
- `/modes/mode-2-bullet-optimization.md` - No changes needed (can call v2.0 if available, but not required)
- `/wireframes/*` - All wireframes unchanged
- All legacy prompts in `/docs/prompts/legacy-prompts/` - Keep for reference only
**Rationale:** These files define rules and specifications that don't need to change for v6.0. The new features augment but don't replace existing logic.
---
## CRITICAL FILES FOR IMPLEMENTATION
### 1. `/shared/jd-parser-17point.md`
**Reason:** Core logic to extract 17-point schema from JD text  
**Priority:** CRITICAL - Mode 3 depends on this  
**Complexity:** HIGH - Must correctly categorize hard vs soft skills  
**Estimated LOC:** ~400 lines with examples and edge cases
### 2. `/shared/schemas/job-history-v2.0.json`
**Reason:** Defines data structure for all new features  
**Priority:** CRITICAL - Foundation for entire v6.0 system  
**Complexity:** MEDIUM - Schema design with validation rules  
**Estimated LOC:** ~200 lines JSON + documentation
### 3. `/shared/evidence-matcher.md`
**Reason:** Implements evidence-based gap analysis with citations  
**Priority:** HIGH - Differentiator from v5.0, core Mode 3 enhancement  
**Complexity:** HIGH - Must search across positions, rank evidence, format citations  
**Estimated LOC:** ~350 lines with matching heuristics
### 4. `/shared/entry-point-router.md`
**Reason:** Orchestrates workflow auto-detection and confirmation  
**Priority:** MEDIUM - Improves UX but not strictly required  
**Complexity:** MEDIUM - Detection heuristics and dialog logic  
**Estimated LOC:** ~250 lines with decision tree
### 5. `/shared/summary-generator.md`
**Reason:** Generates both master summary and per-JD customization  
**Priority:** HIGH - Implements professional summary requirements  
**Complexity:** MEDIUM - Template logic and keyword injection  
**Estimated LOC:** ~300 lines with both generation modes
---
## APPENDIX: INDUSTRY SOURCES
This plan incorporated 2025 industry best practices from:
**ATS Optimization:**
- [Top 10 Resume Tips For 2025](https://blog.theinterviewguys.com/top-10-resume-tips-for-2025/) - Professional summary weighting, keyword matching
- [ATS Resume Keywords Guide](https://uppl.ai/ats-resume-keywords/) - 15-25 keyword sweet spot, exact phrasing importance
- [How to Make an ATS-Friendly Resume](https://topresume.com/career-advice/what-is-an-ats-resume) - Section architecture, parsing requirements
**Skills Separation:**
- [Designing a Resume That Highlights Hard & Soft Skills Equally](https://www.resumly.ai/blog/designing-a-resume-that-emphasizes-both-hard-skills-and-soft-skills-equally) - 70-80% hard skills ratio, evidence-based soft skills
- [Resume Skills Section: What to Include](https://www.ourskillstory.com/blog/resume-skills-section-guide) - Core competencies structure, categorization
**Resume Architecture:**
- [Free AI Resume Builder](https://www.tealhq.com/tools/resume-builder) - Workflow patterns, job description parsing
- [ATS Resume Optimization: The Ultimate 2025 Guide](https://blog.theinterviewguys.com/ats-resume-optimization/) - Parser architecture, keyword extraction
**Job History Schema:**
- [How To Write an ATS Resume](https://www.indeed.com/career-advice/resumes-cover-letters/ats-resume-template) - Recommended data structure, date handling
- [The Ultimate Guide to ATS Friendly Resume Templates 2025](https://www.resumly.ai/blog/ats-friendly-resume-templates-2025) - Schema best practices, section ordering
---
## FINAL RECOMMENDATION
**PROCEED WITH CLAUDE PLAN** for the following reasons:
1. **Aligns with User Constraint:** Zero rewrites, only surgical additions
2. **Industry-Validated:** Incorporates 2025 ATS best practices from multiple sources
3. **Low-Risk Deployment:** Modular design allows incremental rollout
4. **Future-Proof:** Schema versioning enables evolution without breaking changes
5. **Complete Feature Coverage:** Addresses all 6 user requirements
6. **Testable:** Each module can be unit tested independently
7. **Maintainable:** Clear separation of concerns, well-documented
**Next Step:** Begin Phase 1 implementation (Foundation week) starting with job_history_v2.0 schema definition.
**Estimated Timeline:**
- Phase 1 (Foundation): 5-7 days
- Phase 2 (Integration): 5-7 days
- Phase 3 (Routing): 3-5 days
- Phase 4 (Summary Customization): 3-5 days
- Total: 16-24 days to full v6.0 deployment
**Success Probability:** 85% - High confidence based on:
- Clear requirements
- Proven patterns from v5.0
- Industry validation
- Low-risk deployment strategy
Read Resume_Analyzer_Prompt.md
ðŸ¤–
Claude
Sonnet 4.5
12/28/2025, 3:08:04 PM
Let me read the document mentioned in your global instructions and explore the codebase structure to understand the current architecture better.

Glob **/*.md
Bash
List root directory structure
IN
ls -la /Users/mkaplan/Documents/GitHub/optimize-my-resume
OUT
total 184
drwxr-xr-x@ 25 mkaplan  staff    800 Dec 28 15:07 .
drwxr-xr-x@ 10 mkaplan  staff    320 Dec 27 18:57 ..
drwx------   3 mkaplan  staff     96 Dec 28 14:51 .claude
-rw-r--r--   1 mkaplan  staff   6148 Dec 28 14:15 .DS_Store
drwxr-xr-x@ 16 mkaplan  staff    512 Dec 28 15:02 .git
-rw-r--r--@  1 mkaplan  staff     66 Dec 27 17:34 .gitattributes
-rw-r--r--   1 mkaplan  staff     29 Dec 28 14:29 .gitignore
drwxr-xr-x@  2 mkaplan  staff     64 Dec 27 17:02 {core,modes,wireframes,shared}
-rw-------   1 mkaplan  staff   4794 Dec 28 15:07 ADD_REMOTE_WORK_LOGIC.md
-rw-r--r--   1 mkaplan  staff   2533 Dec 27 19:12 CHANGELOG.md
drwxr-xr-x@  3 mkaplan  staff     96 Dec 27 19:12 chat-history
drwxr-xr-x   6 mkaplan  staff    192 Dec 27 19:12 core
drwxr-xr-x@ 11 mkaplan  staff    352 Dec 28 14:03 docs
drwxr-xr-x   5 mkaplan  staff    160 Dec 28 14:04 modes
-rw-r--r--   1 mkaplan  staff     60 Dec 27 19:12 optimize-my-resume.code-workspace
-rw-r--r--   1 mkaplan  staff  23240 Dec 28 14:04 PROJECT-INSTRUCTIONS.md
-rw-r--r--   1 mkaplan  staff  20342 Dec 27 19:12 quick-start-mode.md
-rw-r--r--   1 mkaplan  staff   2899 Dec 27 19:12 README.md
drwxr-xr-x@  3 mkaplan  staff     96 Dec 27 19:12 scripts
-rw-r--r--   1 mkaplan  staff    535 Dec 27 19:12 settings.json
-rw-r--r--   1 mkaplan  staff   3513 Dec 27 19:12 settings.local.json
-rw-r--r--   1 mkaplan  staff   1200 Dec 27 19:12 settings.local.json.example
drwxr-xr-x   4 mkaplan  staff    128 Dec 27 19:12 shared
drwxr-xr-x@  4 mkaplan  staff    128 Dec 27 19:12 templates
drwxr-xr-x   5 mkaplan  staff    160 Dec 27 19:12 wireframes
Bash
Find job history storage files
IN
find /Users/mkaplan/Documents/GitHub/optimize-my-resume -type f -name "*.txt" | head -20
OUT
/Users/mkaplan/Documents/GitHub/optimize-my-resume/templates/gitignore.txt
WebSearch best practices for resume professional summary customization 2025 ATS systems
WebSearch job description parsing schema hard skills soft skills separation 2025
ðŸ¤–
Claude
Sonnet 4.5
12/28/2025, 3:08:33 PM
Now let me check if there's a v4.7 plan mentioned in your CLAUDE.md instructions:

Glob **/v4.7*.md
Bash
Find plans directory and files
IN
find /Users/mkaplan/Documents/GitHub/optimize-my-resume/docs/plans -type f -name "*.md" 2>/dev/null || echo "Plans directory not found"
OUT
Read ADD_REMOTE_WORK_LOGIC.md
ðŸ¤–
Claude
12/28/2025, 3:08:38 PM
You've hit your limit Â· resets 5pm (America/New_York)

ðŸ”€ Fork
The user is providing two important pieces of information:

1. The plan eventually needs to go into PROJECT-INSTRUCTIONS.md for the Claude project (not just exist as a plan file)
2. I should check ~/Documents/GitHub/Resume_Analyzer_Optimizer for additional context - this was the original legacy project that the current project is v2.0 of

Since I'm in plan mode and have a Plan agent running, I should:
1. Acknowledge these inputs
2. Launch an Explore agent to check the Resume_Analyzer_Optimizer directory for useful context
3. Note that the final implementation should update PROJECT-INSTRUCTIONS.md
4. Wait for both agents to complete, then synthesize the plan

Let me launch an Explore agent to check that directory while the Plan agent is still running.
ðŸ”€ Fork
ðŸ¤–
Claude
Sonnet 4.5
12/28/2025, 3:07:57 PM
Thank you for that context! I'll explore the Resume_Analyzer_Optimizer directory for additional insights and note that the final implementation needs to update PROJECT-INSTRUCTIONS.md.

Let me launch an Explore agent to check that legacy project directory:

ðŸ”€ Fork
ðŸ¤–
Task
Explore Resume_Analyzer_Optimizer legacy project
Explore
Prompt:
Explore the ~/Documents/GitHub/Resume_Analyzer_Optimizer directory to find useful patterns, schemas, or implementation details that can inform the v6.0 design.

**Focus Areas:**
1. **Job history schema/format** - how was it structured in the original?
2. **JD parsing implementation** - any code that implements the 17-point schema
3. **Professional summary generation** - prompts or logic for creating summaries
4. **Keyword extraction/matching** - any existing algorithms or patterns
5. **Workflow routing** - how did entry points and mode transitions work?
6. **File structure** - overall architecture and organization

**Deliverables:**
- List key files and their purposes
- Identify any schemas, data structures, or patterns we should adopt
- Note any features or implementations that would be valuable to port to v6.0
- Flag anything that conflicts with or differs from the legacy-prompts documentation

This is to inform the v6.0 design plan for the optimize-my-resume project (which is v2.0 of Resume_Analyzer_Optimizer).
Status:
completed
Duration:
N/A
Tokens:
N/A
Tool Uses:
0
ðŸ‘¤
You
12/28/2025, 3:08:05 PM
Explore the ~/Documents/GitHub/Resume_Analyzer_Optimizer directory to find useful patterns, schemas, or implementation details that can inform the v6.0 design.

Focus Areas:

Job history schema/format - how was it structured in the original?
JD parsing implementation - any code that implements the 17-point schema
Professional summary generation - prompts or logic for creating summaries
Keyword extraction/matching - any existing algorithms or patterns
Workflow routing - how did entry points and mode transitions work?
File structure - overall architecture and organization
Deliverables:

List key files and their purposes
Identify any schemas, data structures, or patterns we should adopt
Note any features or implementations that would be valuable to port to v6.0
Flag anything that conflicts with or differs from the legacy-prompts documentation
This is to inform the v6.0 design plan for the optimize-my-resume project (which is v2.0 of Resume_Analyzer_Optimizer).

ðŸ¤–
Claude
Haiku 4.5
12/28/2025, 3:08:08 PM
I'll explore the Resume_Analyzer_Optimizer directory to identify useful patterns and implementations that can inform v6.0 design. Let me start by getting an overview of the directory structure and then focus on your specified areas.

Bash
List key files in Resume_Analyzer_Optimizer directory
IN
find ~/Documents/GitHub/Resume_Analyzer_Optimizer -type f -name "*.md" -o -name "*.json" -o -name "*.js" -o -name "*.py" | head -50
OUT
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/chat-history/2025_12_20-19_27-chat_history-Antigravity.md
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/chat-history/2025_12_20-14_38-chat_history_Antigravity.md
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/chat-history/2025_12_19-16_14-chat_history-Antigravity.md
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/chat-history/2025_12_20-16_56-chat_history-Antigravity.md
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/chat-history/2025_12_20-13_58-chat_history-Antigravity.md
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/chat-history/2025_12_21-16_00-chat_history-Antigravity.md
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/chat-history/.chat-history-tracker.template.json
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/chat-history/2025_12_21-12_14-chat_history-Antigravity.md
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/chat-history/.chat-history-tracker.json
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/test_evidence_verification.js
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/dist/assets/index-leBftoPE.js
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/js/export.js
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/js/logic/display-analytics.js
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/js/logic/pipeline.js
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/js/config.js
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/js/main.js
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/js/prompt-loader.js
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/js/ai/claude.js
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/js/ai/gemini.js
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/js/ai/providers.js
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/js/state.js
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/js/utils.js
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/js/PROMPT_LOADER_README.md
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/js/analytics/scoring.js
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/js/analytics/consolidation.js
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/js/analytics/config/scoring-rules.js
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/js/analytics/config/experience-targets.js
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/js/analytics/config/verb-lists.js
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/js/analytics/redundancy.js
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/js/analytics/utils/impact-detection.js
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/js/analytics/utils/tests.js
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/js/analytics/reordering.js
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/js/analytics/summary-validation.js
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/js/analytics/bullet-strength.js
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/js/analytics/section-compliance.js
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/js/analytics/verb-validation.js
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/js/analytics/quality-checks.js
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/local_auth.json
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/node_modules/jws/CHANGELOG.md
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/node_modules/jws/index.js
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/node_modules/jws/readme.md
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/node_modules/jws/package.json
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/node_modules/jws/lib/tostring.js
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/node_modules/jws/lib/sign-stream.js
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/node_modules/jws/lib/verify-stream.js
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/node_modules/jws/lib/data-stream.js
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/node_modules/tinyglobby/README.md
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/node_modules/tinyglobby/package.json
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/node_modules/@pkgjs/parseargs/CHANGELOG.md
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/node_modules/@pkgjs/parseargs/internal/validators.js
ðŸ¤–
Claude
Haiku 4.5
12/28/2025, 3:08:18 PM
Let me explore the main directories and documentation structure:

Bash
List root directory contents
IN
ls -la ~/Documents/GitHub/Resume_Analyzer_Optimizer/ | head -30
OUT
total 336
drwxr-xr-x@  29 mkaplan  staff    928 Dec 27 17:30 .
drwxr-xr-x@  10 mkaplan  staff    320 Dec 27 18:57 ..
drwxr-xr-x    3 mkaplan  staff     96 Dec  9 17:10 .agent
drwx------    7 mkaplan  staff    224 Dec 19 09:40 .claude
-rw-r--r--@   1 mkaplan  staff  10244 Dec 28 13:27 .DS_Store
drwxr-xr-x@  17 mkaplan  staff    544 Dec 22 13:35 .git
drwxr-xr-x    3 mkaplan  staff     96 Dec  2 16:47 .github
-rw-r--r--    1 mkaplan  staff    987 Dec 18 00:30 .gitignore
drwxr-xr-x   26 mkaplan  staff    832 Dec 26 14:11 chat-history
-rw-r--r--@   1 mkaplan  staff    656 Dec 11 15:27 CLAUDE.md
drwxr-xr-x@   4 mkaplan  staff    128 Dec 21 15:06 dist
drwxr-xr-x@  14 mkaplan  staff    448 Dec 21 15:35 docs
-rw-r--r--    1 mkaplan  staff  10904 Dec 17 16:24 index.html
-rw-r--r--@   1 mkaplan  staff      0 Dec  2 11:46 index.tsx
drwxr-xr-x   13 mkaplan  staff    416 Dec 21 15:35 js
-rw-r--r--@   1 mkaplan  staff     81 Dec  2 11:46 local_auth.json
-rw-r--r--    1 mkaplan  staff   1163 Dec  2 17:56 local_auth.template.json
-rw-r--r--@   1 mkaplan  staff    119 Dec  2 11:46 metadata.json
drwxr-xr-x  104 mkaplan  staff   3328 Dec  3 22:02 node_modules
-rw-r--r--    1 mkaplan  staff  87999 Dec  2 16:48 package-lock.json
-rw-r--r--@   1 mkaplan  staff    456 Dec  2 11:46 package.json
-rw-r--r--@   1 mkaplan  staff  12364 Dec 21 15:35 README.md
-rw-r--r--    1 mkaplan  staff     60 Dec 27 17:30 Resume_Analyzer_Optimizer.code-workspace
drwxr-xr-x    8 mkaplan  staff    256 Dec 22 14:26 scripts
drwxr-xr-x@   8 mkaplan  staff    256 Dec  2 18:09 src
drwxr-xr-x@   4 mkaplan  staff    128 Dec  2 11:46 templates
-rw-r--r--@   1 mkaplan  staff   1923 Dec  8 20:24 test_evidence_verification.js
-rw-r--r--@   1 mkaplan  staff    542 Dec  2 11:46 tsconfig.json
-rw-r--r--    1 mkaplan  staff   1807 Dec 17 16:24 vite.config.ts
ðŸ¤–
Claude
Haiku 4.5
12/28/2025, 3:08:20 PM
Now let me explore the docs and key implementation files:

Bash
List documentation directory
IN
ls -la ~/Documents/GitHub/Resume_Analyzer_Optimizer/docs/
OUT
total 312
drwxr-xr-x@ 14 mkaplan  staff    448 Dec 21 15:35 .
drwxr-xr-x@ 29 mkaplan  staff    928 Dec 27 17:30 ..
-rw-r--r--@  1 mkaplan  staff  10244 Dec 28 14:15 .DS_Store
-rw-r--r--@  1 mkaplan  staff  33343 Dec 21 15:35 CHANGELOG_DEV.md
-rw-r--r--@  1 mkaplan  staff  40564 Dec 21 15:35 CHANGELOG.md
drwxr-xr-x   9 mkaplan  staff    288 Dec 18 00:30 lessons-learned
drwxr-xr-x@  2 mkaplan  staff     64 Dec 18 19:28 plan-analysis-results
drwxr-xr-x  12 mkaplan  staff    384 Dec 22 13:53 plans
drwxr-xr-x  10 mkaplan  staff    320 Dec  9 17:10 prompts
-rw-r--r--@  1 mkaplan  staff   4566 Dec  9 21:38 README.md
-rw-r--r--@  1 mkaplan  staff  57373 Dec 21 15:35 ROADMAP.md
drwxr-xr-x   3 mkaplan  staff     96 Dec 10 20:25 testing
drwxr-xr-x   5 mkaplan  staff    160 Dec 21 15:35 wireframes
drwxr-xr-x   7 mkaplan  staff    224 Dec 11 15:27 workflows
Bash
List prompts directory structure
IN
ls -la ~/Documents/GitHub/Resume_Analyzer_Optimizer/docs/prompts/
OUT
total 40
drwxr-xr-x  10 mkaplan  staff   320 Dec  9 17:10 .
drwxr-xr-x@ 14 mkaplan  staff   448 Dec 21 15:35 ..
-rw-r--r--@  1 mkaplan  staff  8196 Dec 28 14:15 .DS_Store
drwxr-xr-x@  7 mkaplan  staff   224 Dec 21 15:35 analyzer
drwxr-xr-x   4 mkaplan  staff   128 Dec  8 20:24 comparative
drwxr-xr-x   6 mkaplan  staff   192 Dec 17 16:24 dev
-rw-r--r--@  1 mkaplan  staff  2748 Dec  3 22:00 PARAMETERS.md
-rw-r--r--@  1 mkaplan  staff  3640 Dec  4 12:35 README.md
drwxr-xr-x   6 mkaplan  staff   192 Dec 19 16:00 sys
drwxr-xr-x   4 mkaplan  staff   128 Dec  9 17:10 tmp
ðŸ¤–
Claude
Haiku 4.5
12/28/2025, 3:08:23 PM
Let me now read the key documentation and prompt files to understand the structure:

Read README.md
Bash
List JavaScript module directory structure
IN
ls -la ~/Documents/GitHub/Resume_Analyzer_Optimizer/js/
OUT
total 192
drwxr-xr-x  13 mkaplan  staff    416 Dec 21 15:35 .
drwxr-xr-x@ 29 mkaplan  staff    928 Dec 27 17:30 ..
-rw-r--r--@  1 mkaplan  staff   6148 Dec 26 14:42 .DS_Store
drwxr-xr-x   5 mkaplan  staff    160 Dec  2 17:56 ai
drwxr-xr-x  13 mkaplan  staff    416 Dec 20 17:47 analytics
-rw-r--r--@  1 mkaplan  staff  19592 Dec 21 15:35 config.js
-rw-r--r--   1 mkaplan  staff  15970 Dec 10 20:31 export.js
drwxr-xr-x   4 mkaplan  staff    128 Dec 21 15:35 logic
-rw-r--r--   1 mkaplan  staff  16991 Dec 17 16:24 main.js
-rw-r--r--   1 mkaplan  staff   8448 Dec  9 17:21 PROMPT_LOADER_README.md
-rw-r--r--   1 mkaplan  staff   3781 Dec  9 17:10 prompt-loader.js
-rw-r--r--@  1 mkaplan  staff   3246 Dec 19 16:00 state.js
-rw-r--r--@  1 mkaplan  staff   9499 Dec 21 15:35 utils.js
Bash
Find prompt documentation files
IN
find ~/Documents/GitHub/Resume_Analyzer_Optimizer/docs/prompts -name "*.md" | head -20
OUT
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/docs/prompts/PARAMETERS.md
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/docs/prompts/comparative/README.md
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/docs/prompts/comparative/JD_Comparative_Prompt.md
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/docs/prompts/README.md
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/docs/prompts/sys/README.md
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/docs/prompts/sys/UI_Prompt.md
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/docs/prompts/sys/App_Gen_Prompt.md
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/docs/prompts/sys/System_Prompt.md
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/docs/prompts/dev/Pre_Merge_Checklist.md
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/docs/prompts/dev/Testing_Protocol.md
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/docs/prompts/dev/Update_Doc_Prompt.md
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/docs/prompts/dev/README.md
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/docs/prompts/tmp/README.md
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/docs/prompts/analyzer/Resume_Analyzer_Wireframe.md
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/docs/prompts/analyzer/Resume_Analyzer_Prompt.md
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/docs/prompts/analyzer/wireframes/04_Comparative_Evidence.md
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/docs/prompts/analyzer/wireframes/v4.12.3_evidence_audit_wireframes.md
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/docs/prompts/analyzer/wireframes/01_Executive_Summary.md
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/docs/prompts/analyzer/wireframes/00_Mode_Selection.md
/Users/mkaplan/Documents/GitHub/Resume_Analyzer_Optimizer/docs/prompts/analyzer/wireframes/05_Skills_Inventory.md
ðŸ¤–
Claude
Haiku 4.5
12/28/2025, 3:08:26 PM
Now let me examine the key prompt files and implementation details:

Read JD_Comparative_Prompt.md
Read PARAMETERS.md
Read Resume_Analyzer_Prompt.md
ðŸ¤–
Claude
Haiku 4.5
12/28/2025, 3:08:29 PM
Let me continue examining the key implementation files:

Read config.js
Read pipeline.js
ðŸ¤–
Claude
12/28/2025, 3:08:31 PM
You've hit your limit Â· resets 5pm (America/New_York)

ðŸ”€ Fork
ðŸ¤–
Claude
12/28/2025, 3:08:31 PM
You've hit your limit Â· resets 5pm (America/New_York)

ðŸ”€ Fork
ðŸ¤–
Claude
12/28/2025, 3:08:32 PM
You've hit your limit Â· resets 5pm (America/New_York)

ðŸ”€ Fork
ðŸ‘¤
You
12/28/2025, 3:08:32 PM
/rate-limit-options
/rate-limit-options

ðŸ”€ Fork
ðŸ¤–
Claude
12/28/2025, 3:08:33 PM
You've hit your limit Â· resets 5pm (America/New_York)

ðŸ”€ Fork
ðŸ‘¤
You
12/28/2025, 3:08:38 PM
<agent-notification> <agent-id>a85044d</agent-id> <output-file>/tmp/claude/-Users-mkaplan-Documents-GitHub-optimize-my-resume/tasks/a85044d.output</output-file> <status>completed</status> <summary>Agent "Design v6.0 workflow system" completed.</summary> Read the output file to retrieve the full result. </agent-notification>
ðŸ”€ Fork
ðŸ¤–
Claude
12/28/2025, 3:08:39 PM
You've hit your limit Â· resets 5pm (America/New_York)

ðŸ”€ Fork
ðŸ‘¤
You
12/28/2025, 5:07:42 PM
continue with plan. identify any logic issue that I might not have thought of, or any workflow steps that I might have forgotten or overlooked that the user could perform

ðŸ”€ Fork
Good, the Plan agent has completed. Let me:
1. Read the agent output to see the design
2. Read ADD_REMOTE_WORK_LOGIC.md that the user mentioned
3. Synthesize everything into a comprehensive plan
4. Identify any logic issues or workflow gaps the user might have overlooked
5. Write the final plan to the plan file
6. Call ExitPlanMode

Let me start by reading the agent output and the ADD_REMOTE_WORK_LOGIC file.
ðŸ”€ Fork
ðŸ¤–
Claude
Sonnet 4.5
12/28/2025, 5:07:48 PM
I'll retrieve the Plan agent's output and read the ADD_REMOTE_WORK_LOGIC.md file, then synthesize everything into a comprehensive plan while identifying any potential logic issues or workflow gaps.

ðŸ”€ Fork
TaskOutput
ðŸ”€ Fork
Read ADD_REMOTE_WORK_LOGIC.md
ðŸ”€ Fork
I see the Plan agent hit the rate limit, so I didn't get the full output. Let me read the output file directly to see what was produced.

I also now see ADD_REMOTE_WORK_LOGIC.md which provides the specific implementation for v5.1.0 remote work classification.

Let me read the agent's output file to see what it produced.
ðŸ”€ Fork
ðŸ¤–
Claude
Sonnet 4.5
12/28/2025, 5:07:54 PM
Let me read the full output from the Plan agent:

ðŸ”€ Fork
Read a85044d.output
ðŸ”€ Fork
The Plan agent hit rate limits and didn't produce a full design. However, I have enough context from:

1. The conversation summary showing all exploration was completed
2. The user's design decisions (fresh start, both summary options, full 17-point schema, hybrid routing)
3. Legacy prompts documentation
4. Current architecture understanding
5. ADD_REMOTE_WORK_LOGIC.md showing the v5.1.0 pattern

I should now create the comprehensive plan myself based on all this information. Let me write the plan file covering:

1. Architecture overview
2. Job history schema v2.0
3. 17-point JD parsing restoration
4. Entry point routing logic
5. Professional summary customization (dual-mode)
6. Implementation sequence
7. File modification plan
8. Logic issues/workflow gaps to watch for

Let me create a thorough plan now.
ðŸ”€ Fork
ðŸ¤–
Claude
Sonnet 4.5
12/28/2025, 5:08:05 PM
The Plan agent hit rate limits, but I have enough context from the exploration phase and your inputs. Let me synthesize everything into a comprehensive plan, including potential logic issues and workflow gaps you should be aware of.

ðŸ”€ Fork
Created
distributed-knitting-leaf.md
1100 lines
# v6.0 Complete Workflow System Implementation Plan
## Overview
**Version:** 6.0.0 (MAJOR - Breaking schema changes)
**Branch:** `v6.0-complete_workflow_system`
**Scope:** Restore legacy features + add complete entry-to-exit workflow routing
**Key Changes:**
- Job History Schema v2.0 (hard/soft skills separation, education, certifications)
- Restore 17-point JD parsing from legacy system
- Professional summary customization (master + per-JD options)
- Entry point routing with auto-detect and confirmation
- Keyword/skills extraction and evidence-based matching
---
## Architecture Overview
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ENTRY POINT ROUTER                          â”‚
â”‚                   (new: shared/entry-router.md)                  â”‚
â”‚                                                                   â”‚
â”‚  User uploads resume â†’ Analyze file â†’ Detect state â†’ Confirm     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                 â”‚                  â”‚
             â–¼                 â–¼                  â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  MODE 1  â”‚      â”‚  MODE 2  â”‚      â”‚  MODE 3  â”‚
      â”‚  Full    â”‚â”€â”€â”   â”‚  Bullet  â”‚      â”‚    JD    â”‚
      â”‚ Analysis â”‚  â”‚   â”‚   Opt    â”‚      â”‚ Compare  â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                            â–²
                    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
                    â””â”€â”€â–¶â”‚ Job History  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚  Creation    â”‚
                        â”‚  (v2.0)      â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
**Data Flow:**
1. **Entry Router:** User provides resume â†’ system detects state (new user, has job history, has JD)
2. **Mode 1:** New resume â†’ Full analysis â†’ Generate job history v2.0 â†’ Offer next steps
3. **Mode 2:** Has job history â†’ Upload bullets â†’ Optimize â†’ Update job history
4. **Mode 3:** Has job history + JD â†’ Parse JD (17-point) â†’ Gap analysis â†’ Recommendations
---
## Job History Schema v2.0
### Storage Location
- **File:** `shared/job-history-v2-creation.md` (NEW)
- **Output:** `claude_generated_job_history_summaries_v2.txt` (NEW)
- **Format:** Plain text with v2.0 structured sections
### Schema Structure
Each job entry contains **12 sections** (up from 8 in v1.0):
```xml
<job_entry_schema_v2>
  <metadata>
    <job_title>Senior Product Manager</job_title>
    <company>TechCorp Inc.</company>
    <dates>Jan 2020 - Dec 2022</dates>
    <schema_version>2.0</schema_version>
  </metadata>
  <professional_summary>
    <!-- Master summary for this role (2-3 sentences) -->
    <!-- Aggregate metrics, key achievements, scope -->
  </professional_summary>
  <core_responsibilities>
    <!-- 3-5 bullet points of primary duties -->
    <!-- Focus on scope and accountability -->
  </core_responsibilities>
  <key_achievements>
    <!-- 3-5 bullet points with quantified results -->
    <!-- STAR format with metrics -->
  </key_achievements>
  <hard_skills_demonstrated>
    <!-- Array of technical/measurable skills -->
    <!-- Example: Python, SQL, Agile, JIRA, AWS, GDPR compliance -->
  </hard_skills_demonstrated>
  <soft_skills_demonstrated>
    <!-- Array of interpersonal/behavioral skills -->
    <!-- Example: Leadership, Communication, Problem-solving, Collaboration -->
  </soft_skills_demonstrated>
  <education>
    <!-- Degree, institution, year (if mentioned in this role context) -->
    <!-- Example: "MBA, Stanford University, 2019" -->
  </education>
  <certifications>
    <!-- Professional certifications relevant to this role -->
    <!-- Example: "PMP, Certified Scrum Master, AWS Solutions Architect" -->
  </certifications>
  <tools_technologies>
    <!-- Specific tools used (subset of hard skills, more granular) -->
    <!-- Example: "JIRA, Confluence, Tableau, Salesforce, GitHub" -->
  </tools_technologies>
  <impact_metrics>
    <!-- Quantified business impact -->
    <!-- Example: "Increased revenue by $2M, Reduced costs by 30%, Led team of 12" -->
  </impact_metrics>
  <industry_domain>
    <!-- Industry sector and domain expertise -->
    <!-- Example: "Fintech, Healthcare SaaS, E-commerce" -->
  </industry_domain>
  <team_scope>
    <!-- Leadership and team size -->
    <!-- Example: "Managed cross-functional team of 15, Reported to VP Product" -->
  </team_scope>
</job_entry_schema_v2>
```
### Key Differences from v1.0
**Added (6 new sections):**
- `hard_skills_demonstrated` - Separates technical skills
- `soft_skills_demonstrated` - Separates behavioral skills
- `education` - Formal education details
- `certifications` - Professional certifications
- `tools_technologies` - Granular tool listing
- `professional_summary` - Master summary per role
**Modified:**
- `skills_demonstrated` â†’ split into hard/soft
- Added `schema_version` metadata for compatibility tracking
**Preserved:**
- `core_responsibilities`, `key_achievements`, `impact_metrics`, `industry_domain`, `team_scope`
### Migration Strategy
**Fresh Start (per user decision):**
- No migration of existing v1.0 job histories
- New schema only (`claude_generated_job_history_summaries_v2.txt`)
- Keep v1.0 file (`claude_generated_job_history_summaries.txt`) for reference
- Mode 1 generates v2.0 format for all new analyses
- User can manually port old histories if desired
---
## 17-Point JD Parsing (Restored from Legacy)
### Implementation Location
- **File:** `modes/mode-3-jd-comparison.md` (ENHANCE)
- **Section:** Phase 1, Step 1 - `extract_critical_requirements`
### Complete 17-Point Schema
```xml
<jd_parsing_schema_17_point>
  <!-- Company & Role Info (4 fields) -->
  <company>Employer name</company>
  <job_title>Role title</job_title>
  <location>Physical location or "Remote"</location>
  <work_lifestyle>Remote | On-Site | Hybrid</work_lifestyle>
  <!-- Work Conditions (4 fields) -->
  <remote_restrictions>State restrictions or "fake remote" indicators</remote_restrictions>
  <employee_type>Full-time | Part-time | Contract</employee_type>
  <travel_required>Travel percentage or frequency</travel_required>
  <clearance>Security clearance requirements</clearance>
  <!-- Compensation & Requirements (4 fields) -->
  <salary_range>Compensation range</salary_range>
  <required_experience>Years and type of experience</required_experience>
  <required_education>Degree requirements</required_education>
  <job_responsibilities>Array of core duties</job_responsibilities>
  <!-- Hard Skills (2 fields) -->
  <skills_needed>Array of REQUIRED hard skills (Python, SQL, AWS, etc.)</skills_needed>
  <skills_wanted>Array of PREFERRED hard skills</skills_wanted>
  <!-- Soft Skills (2 fields) -->
  <soft_skills_needed>Array of REQUIRED soft skills (Leadership, Communication, etc.)</soft_skills_needed>
  <soft_skills_wanted>Array of PREFERRED soft skills</soft_skills_wanted>
  <!-- Qualifications & Certifications (4 fields) -->
  <qualifications_needed>Array of required qualifications</qualifications_needed>
  <qualifications_wanted>Array of preferred qualifications</qualifications_wanted>
  <certifications_needed>Array of required certifications</certifications_needed>
  <certifications_wanted>Array of preferred certifications</certifications_wanted>
</jd_parsing_schema_17_point>
```
### Hard vs Soft Skills Distinction Rules
**Hard Skills (Technical/Measurable):**
- Programming languages (Python, Java, JavaScript, SQL)
- Tools and frameworks (JIRA, AWS, Docker, React, Tableau)
- Domain knowledge (HIPAA, GDPR, Agile, Six Sigma, SEO)
- Technical certifications (PMP, AWS Solutions Architect, CPA)
**Soft Skills (Interpersonal/Behavioral):**
- Communication (written, verbal, presentation, stakeholder management)
- Leadership (team management, mentoring, coaching, delegation)
- Collaboration (teamwork, cross-functional, conflict resolution)
- Work style (time management, adaptability, problem-solving, critical thinking)
**AI Classification Instruction:**
> "You MUST categorize each skill correctly. Misclassification affects blocking logic. When in doubt, technical/measurable = hard, interpersonal/behavioral = soft."
---
## Evidence-Based Gap Analysis (Enhanced)
### Requirement-by-Requirement Tracking
**Current State (v5.1):** Aggregate gap categories
**v6.0 State:** Individual requirement analysis with evidence citations
```javascript
// For EVERY requirement in JD, create an analysis entry:
{
  requirement: "Python programming",
  subcategory: "Skills Needed",
  importance: "Required",
  status: "Matched", // or "Partial" or "Missing"
  evidence: [
    {
      content: "Developed ETL pipelines using Python and Pandas",
      source: "Data Engineer | TechCorp"
    },
    {
      content: "Automated workflows with Python scripts (saved 20 hrs/week)",
      source: "Senior Analyst | StartupCo"
    }
  ],
  gap_rationale: "Strong evidence across multiple roles"
}
```
### Evidence Formatting Rules (CRITICAL)
**Schema Structure:**
```json
"evidence": [
  {
    "content": "Direct quote or achievement from resume",
    "source": "Company | Job Title"
  }
]
```
**Rules:**
1. **Separate Items:** Do not combine multiple achievements into one evidence block
2. **Mandatory Source:** Every evidence item MUST have a source in "Company | Title" format
3. **Clean Source:** NO prefixes like "Resume -", "Candidate -", "at" - just "Company | Title"
4. **No "Not found":** If no evidence exists, return empty array `[]` or `null`, NOT string "Not found"
5. **Exact Quotes:** Use verbatim resume text when possible, paraphrase only if needed for clarity
### Color-Coded Output Format
**Key/Legend (Display First):**
```
KEY: [MATCHED] (Green) | [PARTIAL] (Yellow) | [MISSING] (Red)
```
**Section Headers:**
```markdown
[HARD SKILLS - REQUIRED]
[MATCHED] Python
  Evidence:
  - "Developed ETL pipelines using Python and Pandas" (Data Engineer | TechCorp)
  - "Automated workflows with Python scripts" (Senior Analyst | StartupCo)
[PARTIAL] Machine Learning
  Evidence:
  - "Applied statistical models to forecast trends" (Data Analyst | StartupCo)
  Gap: Resume shows statistical analysis but not explicit ML frameworks (scikit-learn, TensorFlow)
[MISSING] Kubernetes
  Evidence: None found
  Gap: No container orchestration experience mentioned
```
**Sorting Order (Within Each Section):**
- Matched items first
- Partial items second
- Missing items last
---
## Blocking Gates (Restored from Legacy)
### Gate 1: Hard Skill Deficit
**Rule:**
```javascript
IF count(Missing Hard Skills) > count(Matched Hard Skills)
THEN BLOCK recommendations
```
**Output:**
```
âš  CRITICAL SKILL DEFICIT DETECTED
You are missing 7 required hard skills, while only matching 3.
Missing: Kubernetes, Docker, Terraform, React, TypeScript, GraphQL, AWS Lambda
Matched: Python, SQL, Git
Recommendations have been suppressed. It is not strategic to apply for a role
where you lack the majority of mandatory technical requirements.
```
### Gate 2: Low Match Score
**Rule:**
```javascript
IF gapAnalysis.score < 30
THEN BLOCK recommendations
```
**Output:**
```
âš  LOW MATCH SCORE DETECTED (<30)
Final Match Score: 24/100
Based on the analysis, this position has significant gaps compared to your profile.
Optimization is unlikely to bridge this gap effectively.
Recommendation: Focus on roles with 50+ match scores where optimization can be strategic.
```
### Gate 3: Location Mismatch (Already in v5.1)
**Keep existing logic from ADD_REMOTE_WORK_LOGIC.md:**
- On-site vs Remote conflicts
- State residency restrictions
- "Fake remote" detection
- Hybrid distance requirements
**Output:** (Already implemented in v5.1)
---
## Professional Summary Customization
### Dual-Mode Strategy (Per User Decision)
**Mode 1: Master Summary Generation**
- Generate ONE master summary per role during job history creation
- Stored in `<professional_summary>` section of job entry
- Generic but comprehensive (not JD-specific)
- Used as baseline for Mode 3 customization
**Mode 3: Per-JD Summary Customization**
- User can request JD-specific summary
- Takes master summary + JD keywords â†’ tailored version
- NOT stored (ephemeral, generated on-demand)
- Presented as optimization recommendation
### Master Summary Requirements (Mode 1)
**Structure (3-4 sentences):**
1. **Role + Scope:** "Senior Product Manager with 8 years leading B2B SaaS products"
2. **Achievements + Metrics:** "Launched 12+ features generating $5M ARR, led teams of 10+"
3. **Hard Skills (2-3):** "Expert in Agile methodologies, JIRA, SQL, and data-driven decision-making"
4. **Soft Skills (1-2):** "Known for stakeholder communication and cross-functional collaboration"
**Example:**
```
Senior Product Manager with 8 years leading B2B SaaS products at Google and Salesforce.
Launched 12+ revenue-generating features ($5M ARR), managed roadmaps for 500K+ users,
and led cross-functional teams of 10+. Expert in Agile methodologies, JIRA, SQL, and
data-driven prioritization. Known for exceptional stakeholder communication and ability
to translate technical concepts for executive audiences.
```
### Per-JD Summary Customization (Mode 3)
**When to Trigger:**
- User explicitly requests: "Generate a customized professional summary for this JD"
- OR Mode 3 automatically offers after gap analysis (if match score >50)
**Customization Logic:**
1. Start with master summary from job history
2. Extract top 3-5 missing hard skills from JD that have "Partial" matches in resume
3. Replace generic hard skills with JD-specific keywords
4. Add JD-specific industry/domain terms
5. Maintain same metric/achievement structure
**Example:**
```
Original (Master):
"Expert in Agile methodologies, JIRA, SQL, and data-driven decision-making"
Customized for JD requiring (Python, Kubernetes, AWS):
"Expert in Python, AWS cloud architecture, Kubernetes orchestration, and data-driven decision-making"
```
**Presentation:**
```markdown
[PROFESSIONAL SUMMARY - CUSTOMIZED FOR THIS JD]
[Your customized summary here]
Changes Made:
- Added JD keywords: "Python", "AWS", "Kubernetes"
- Emphasized cloud architecture experience (from "Managed AWS deployments" achievement)
- Retained leadership scope and metrics
```
---
## Entry Point Routing Logic
### New File: `shared/entry-router.md`
**Purpose:** Detect user state and route to appropriate mode with confirmation
### Detection Logic (Hybrid Auto-Detect + Confirmation)
```xml
<entry_router>
  <step_1_analyze_context>
    <!-- Check for existing job history -->
    <check name="job_history_exists">
      IF file exists: claude_generated_job_history_summaries_v2.txt
      AND file is not empty
      THEN state.hasJobHistory = true
    </check>
    <!-- Check for job description in input -->
    <check name="jd_provided">
      IF user message contains job posting indicators:
        - "Job Description:", "JD:", "Role:", "Requirements:"
        - "Apply for:", "Position at [company]"
        - Length > 200 words with structured sections
      THEN state.hasJD = true
    </check>
    <!-- Check for resume file -->
    <check name="resume_uploaded">
      IF user uploads PDF/DOCX/TXT file
      OR provides resume text
      THEN state.hasResume = true
    </check>
  </step_1_analyze_context>
  <step_2_route_with_confirmation>
    <!-- Scenario 1: New User (No job history, resume provided) -->
    <scenario priority="1">
      <condition>state.hasResume = true AND state.hasJobHistory = false</condition>
      <auto_route>Mode 1 (Full Analysis)</auto_route>
      <confirmation_prompt>
        "I detected a new resume upload. I'll perform a comprehensive resume analysis
        and create your job history profile. This will take 3-5 minutes.
        After analysis, you can:
        - Optimize specific bullets (Mode 2)
        - Check fit for a job description (Mode 3)
        Proceed with full analysis?"
      </confirmation_prompt>
    </scenario>
    <!-- Scenario 2: Has Job History + JD (Most common) -->
    <scenario priority="2">
      <condition>state.hasJobHistory = true AND state.hasJD = true</condition>
      <auto_route>Mode 3 (JD Comparison)</auto_route>
      <confirmation_prompt>
        "I detected your job history and a job description. I'll analyze your fit
        for this role using the 17-point gap analysis system.
        This will compare your profile against:
        - Required/preferred hard skills
        - Required/preferred soft skills
        - Experience, education, certifications
        - Location/remote work compatibility
        Proceed with JD fit analysis?"
      </confirmation_prompt>
    </scenario>
    <!-- Scenario 3: Has Job History, wants bullet optimization -->
    <scenario priority="3">
      <condition>state.hasJobHistory = true AND user mentions "bullet", "optimize", "improve wording"</condition>
      <auto_route>Mode 2 (Bullet Optimization)</auto_route>
      <confirmation_prompt>
        "I'll optimize your resume bullets using your job history as context.
        Which bullets would you like me to improve? You can:
        - Paste specific bullets to optimize
        - Upload your current resume for bulk optimization
        Proceed?"
      </confirmation_prompt>
    </scenario>
    <!-- Scenario 4: Ambiguous (Has job history, unclear intent) -->
    <scenario priority="4">
      <condition>state.hasJobHistory = true AND state.hasJD = false</condition>
      <auto_route>None (Ask user)</auto_route>
      <clarification_prompt>
        "I see you have a job history on file. What would you like to do?
        1. Check fit for a specific job description (Mode 3)
        2. Optimize resume bullets (Mode 2)
        3. Re-analyze my resume with updated info (Mode 1)
        Please select 1, 2, or 3, or describe what you need."
      </clarification_prompt>
    </scenario>
    <!-- Scenario 5: No context at all (First interaction) -->
    <scenario priority="5">
      <condition>state.hasResume = false AND state.hasJobHistory = false</condition>
      <auto_route>None (Explain system)</auto_route>
      <welcome_prompt>
        "Welcome to the Resume Analyzer & Optimizer!
        I can help you:
        1. **Analyze your resume** - Get comprehensive feedback (Mode 1)
        2. **Optimize bullets** - Improve specific resume lines (Mode 2)
        3. **Check job fit** - Compare your resume to a job description (Mode 3)
        To get started, please upload your resume (PDF, DOCX, or paste text).
        If you have a specific job description you're targeting, include that too!"
      </welcome_prompt>
    </scenario>
  </step_2_route_with_confirmation>
  <step_3_execute_mode>
    <!-- After user confirms, execute the selected mode -->
    <!-- Pass state context to mode for personalized handling -->
  </step_3_execute_mode>
</entry_router>
```
### User Experience Flow
```
User uploads resume
       â†“
Router detects: New user, no job history
       â†“
Router suggests: "Run full analysis?"
       â†“
User confirms: "Yes"
       â†“
Mode 1 executes â†’ Generates job history v2.0
       â†“
Mode 1 completes: "Analysis done! Next steps: 1) Optimize bullets, 2) Check job fit"
       â†“
User: "Here's a JD I want to apply for"
       â†“
Router detects: Has job history + JD
       â†“
Router suggests: "Run JD fit analysis?"
       â†“
User confirms: "Yes"
       â†“
Mode 3 executes â†’ 17-point parsing â†’ Gap analysis â†’ Recommendations
```
---
## Implementation Sequence (Step-by-Step)
### Phase 1: Schema & Core Infrastructure (3 files)
**1.1 Create Job History Schema v2.0**
- **File:** `shared/job-history-v2-creation.md` (NEW)
- **Content:** Full 12-section schema with examples
- **Test:** Run Mode 1 on sample resume, verify v2.0 output format
**1.2 Create 17-Point JD Parsing Schema**
- **File:** `shared/jd-parsing-17-point.md` (NEW)
- **Content:** Complete parsing instructions + hard/soft skill classification rules
- **Test:** Parse sample JD, verify all 17 fields extracted
**1.3 Create Entry Point Router**
- **File:** `shared/entry-router.md` (NEW)
- **Content:** 5-scenario detection logic + confirmation prompts
- **Test:** Simulate 5 scenarios, verify correct routing
### Phase 2: Mode Enhancements (3 files modified)
**2.1 Enhance Mode 1 (Full Analysis)**
- **File:** `PROJECT-INSTRUCTIONS.md` (MODIFY)
- **Changes:**
  - Update job history creation to use v2.0 schema
  - Add professional summary generation (master summary)
  - Add hard/soft skill separation logic
  - Add education and certification extraction
  - Add "Next Steps" offer at end (route to Mode 2 or 3)
- **Test:** Analyze resume, verify job history v2.0 generated
**2.2 Enhance Mode 3 (JD Comparison)**
- **File:** `modes/mode-3-jd-comparison.md` (MODIFY)
- **Changes:**
  - Replace current JD extraction with 17-point schema
  - Add requirement-by-requirement gap tracking
  - Add evidence-based matching with citations
  - Add color-coded output formatting
  - Add blocking gates (hard skill deficit, low score)
  - Keep existing location blocking gate from v5.1
  - Add per-JD summary customization option
- **Test:** Run JD comparison, verify all 17 fields + evidence + blocking gates
**2.3 Update Mode 2 (Bullet Optimization)**
- **File:** `modes/mode-2-bullet-optimization.md` (MODIFY - MINOR)
- **Changes:**
  - Update to read from job history v2.0 (backward compatible)
  - Reference hard/soft skills arrays for keyword insertion
  - No major logic changes (already reads job history correctly)
- **Test:** Optimize bullets, verify v2.0 job history usage
### Phase 3: Integration & Documentation (2 files modified)
**3.1 Update PROJECT-INSTRUCTIONS.md**
- **File:** `PROJECT-INSTRUCTIONS.md` (MODIFY)
- **Changes:**
  - Add entry router reference at top
  - Update Mode 1 section with v2.0 schema
  - Update Mode 3 section with 17-point parsing
  - Add "How the System Works" section explaining routing
  - Update version to 6.0.0
- **Test:** Full end-to-end workflow (new user â†’ analysis â†’ JD comparison)
**3.2 Update CHANGELOG.md**
- **File:** `docs/CHANGELOG.md` (MODIFY)
- **Changes:**
  - Add v6.0.0 entry with breaking changes notice
  - Document all new features
  - Explain schema migration strategy (fresh start)
- **Test:** Verify version history is clear
### Phase 4: Testing & Validation
**4.1 Scenario Testing**
- Test all 5 router scenarios
- Test Mode 1 â†’ Mode 2 transition
- Test Mode 1 â†’ Mode 3 transition
- Test blocking gates (hard skill deficit, low score, location)
- Test evidence citation formatting
**4.2 Edge Case Testing**
- Resume with no education/certifications (should handle gracefully)
- JD with missing fields (should fill with "Not specified")
- Job history v1.0 compatibility (Mode 2 should still work)
- Ambiguous skills (AI must classify correctly)
---
## File Modification Plan (Surgical Changes)
### NEW Files (5 files)
1. **`shared/entry-router.md`**
   - Purpose: Entry point routing logic (5 scenarios)
   - Size: ~150 lines
   - Dependencies: None (standalone)
2. **`shared/job-history-v2-creation.md`**
   - Purpose: Job history schema v2.0 with 12 sections
   - Size: ~200 lines
   - Dependencies: Called by Mode 1
3. **`shared/jd-parsing-17-point.md`**
   - Purpose: 17-point JD parsing schema + hard/soft skill rules
   - Size: ~180 lines
   - Dependencies: Called by Mode 3
4. **`docs/plans/v6.0-complete_workflow_system.md`**
   - Purpose: This plan document (for future reference)
   - Size: ~400 lines
   - Dependencies: None (documentation)
5. **`claude_generated_job_history_summaries_v2.txt`**
   - Purpose: Output file for job history v2.0 data
   - Size: Variable (user data)
   - Dependencies: Generated by Mode 1
### MODIFIED Files (4 files)
1. **`PROJECT-INSTRUCTIONS.md`** (Lines ~1-800)
   - **Section 1 (NEW):** Add entry router reference (after line 15)
     ```xml
     <!-- Add after line 15 -->
     <entry_routing>
       Before executing any mode, consult shared/entry-router.md to detect user state
       and route to appropriate mode with confirmation.
     </entry_routing>
     ```
   - **Section 2 (MODIFY):** Update Mode 1 job history creation (lines 40-120)
     - Change: Reference `shared/job-history-v2-creation.md` instead of current schema
     - Add: Professional summary generation instructions
     - Add: Hard/soft skill separation logic
   - **Section 3 (NEW):** Add "Next Steps" offer at end of Mode 1 (after line 120)
     ```xml
     <mode_1_completion>
       After analysis, offer next steps:
       "Analysis complete! Next, you can:
       1. Optimize specific bullets (Mode 2)
       2. Check fit for a job description (Mode 3)"
     </mode_1_completion>
     ```
   - **Section 4 (MODIFY):** Update version number (line ~800)
     - Change: `v5.1.0` â†’ `v6.0.0`
2. **`modes/mode-3-jd-comparison.md`** (Lines ~1-400)
   - **Section 1 (MODIFY):** Replace JD extraction (lines 80-120)
     - Change: Use `shared/jd-parsing-17-point.md` schema
     - Add: All 17 fields (company, location, skills_needed, soft_skills_needed, etc.)
   - **Section 2 (NEW):** Add requirement-by-requirement gap tracking (after line 150)
     - Add: Evidence array structure with source citations
     - Add: Status tracking (Matched/Partial/Missing)
   - **Section 3 (NEW):** Add color-coded output formatting (after line 180)
     - Add: KEY legend, section headers, sorting order
   - **Section 4 (NEW):** Add blocking gates (after line 220)
     - Add: Gate 1 (hard skill deficit)
     - Add: Gate 2 (low match score)
     - Keep: Gate 3 (location mismatch from v5.1)
   - **Section 5 (NEW):** Add per-JD summary customization (after line 280)
     - Add: Trigger logic and customization instructions
3. **`modes/mode-2-bullet-optimization.md`** (Lines ~1-200)
   - **Section 1 (MODIFY):** Update job history file reference (line ~30)
     - Change: Support BOTH v1.0 and v2.0 formats (backward compatible)
     - Add: Read from `claude_generated_job_history_summaries_v2.txt` if exists
     - Fallback: Read from `claude_generated_job_history_summaries.txt` if v2.0 not found
   - **Section 2 (MINOR):** Reference hard/soft skills arrays (line ~60)
     - Add: Use `<hard_skills_demonstrated>` for technical keyword insertion
     - Add: Use `<soft_skills_demonstrated>` for behavioral keyword insertion
4. **`docs/CHANGELOG.md`** (Lines ~1-100)
   - **Section 1 (NEW):** Add v6.0.0 entry (after line 10)
     - Document: Breaking changes (schema v2.0)
     - Document: All 6 major features
     - Document: Migration strategy (fresh start)
### FILES TO NOT TOUCH (Preserve Existing)
- `modes/mode-1-workflow.md` - Keep as reference, not active
- `wireframes/*.md` - All wireframes (historical reference)
- `docs/prompts/legacy-prompts/*.md` - Legacy documentation (keep for reference)
- `docs/lessons-learned/*.md` - Preserve all lessons learned
- `claude_generated_job_history_summaries.txt` - Keep v1.0 file (don't delete)
- `.gitignore` - Already configured correctly (legacy-prompts ignored)
---
## Potential Logic Issues & Workflow Gaps
### âš ï¸ ISSUE 1: Job History v1.0 vs v2.0 Compatibility
**Problem:** User might have existing v1.0 job history, but Mode 2 expects v2.0 format.
**Risk:** Mode 2 bullet optimization breaks for users with v1.0 job histories.
**Solution:**
- Mode 2 must support BOTH formats (backward compatibility)
- Check for v2.0 file first, fallback to v1.0 if not found
- If v1.0 found, MODE 2 should recommend: "I see you have v1.0 job history. Consider re-running Mode 1 to upgrade to v2.0 for better keyword matching."
**Implementation:**
```xml
<job_history_loading logic="backward_compatible">
  IF file exists: claude_generated_job_history_summaries_v2.txt
    THEN use v2.0 schema (has hard/soft skills separation)
  ELSE IF file exists: claude_generated_job_history_summaries.txt
    THEN use v1.0 schema (combined skills_demonstrated)
    AND recommend upgrade to v2.0
  ELSE
    RETURN error: "No job history found. Run Mode 1 first."
</job_history_loading>
```
### âš ï¸ ISSUE 2: Hard/Soft Skill Misclassification
**Problem:** AI might misclassify skills (e.g., "Project Management" as soft skill when it should be hard).
**Risk:** Blocking gates fail (hard skill deficit calculated incorrectly).
**Solution:**
- Provide explicit examples in `shared/jd-parsing-17-point.md`
- Add validation rule: If skill appears in both hard/soft arrays, flag for review
- When in doubt, default to HARD skill (safer for blocking gate logic)
**Validation Logic:**
```javascript
// After JD parsing, check for duplicates:
const duplicates = skillsNeeded.filter(s => softSkillsNeeded.includes(s));
if (duplicates.length > 0) {
  warn(`Ambiguous skills detected: ${duplicates.join(', ')}`);
  // Keep in hard skills array (safer default)
}
```
### âš ï¸ ISSUE 3: Evidence Citation Source Format Inconsistency
**Problem:** User job histories might have inconsistent company/title formats.
**Risk:** Evidence sources display as "at Google" vs "Google | PM" vs "Product Manager at Google".
**Solution:**
- Standardize format during job history creation (Mode 1)
- Enforce "Company | Job Title" format in v2.0 schema
- Add post-processing in Mode 3 to normalize sources:
  ```javascript
  // Normalize evidence source format:
  source = source.replace(/^at\s+/, '').replace(/\s+at\s+/, ' | ');
  // "Product Manager at Google" â†’ "Product Manager | Google"
  // Then flip: "Google | Product Manager"
  ```
### âš ï¸ ISSUE 4: Entry Router False Positives (JD Detection)
**Problem:** User pastes long text that looks like JD but isn't (e.g., article, LinkedIn post).
**Risk:** Router auto-routes to Mode 3, but JD parsing fails.
**Solution:**
- Add JD validation heuristics in router:
  - Must contain keywords: "requirements", "qualifications", "responsibilities"
  - Must have structured sections (not just prose)
  - Must be >200 words but <5000 words (reasonable JD length)
- If validation fails, ask user: "This looks like a job description, but I'm not certain. Confirm: Is this a JD you want to analyze?"
**Implementation:**
```xml
<jd_validation>
  <heuristics>
    - Contains "requirements" OR "qualifications" OR "responsibilities"
    - Length between 200-5000 words
    - Has bullet points or numbered lists
    - Mentions company name or role title
  </heuristics>
  <fallback>
    IF validation fails THEN ask user for confirmation
  </fallback>
</jd_validation>
```
### âš ï¸ ISSUE 5: Professional Summary Customization Timing
**Problem:** User might want per-JD summary BEFORE running full gap analysis (to include in application).
**Risk:** Current workflow: Gap analysis â†’ Recommendations â†’ Summary at end (too late).
**Solution:**
- Add option in Mode 3 Phase 1 (after JD parsing):
  ```xml
  <early_summary_offer>
    After JD parsing complete, ask:
    "Would you like me to generate a customized professional summary for this JD
    before running the full gap analysis? (Recommended if you're ready to apply)"
    IF yes: Generate summary â†’ Present â†’ Continue to gap analysis
    IF no: Proceed to gap analysis â†’ Offer summary at end
  </early_summary_offer>
  ```
### âš ï¸ ISSUE 6: Blocking Gate Too Aggressive
**Problem:** Hard skill deficit gate might block users who are close matches (e.g., 4 matched, 5 missing).
**Risk:** User misses strategic opportunities where slight optimization could bridge gap.
**Solution:**
- Add threshold tolerance: Only block if `missing > matched + 2`
- Add override option: "This role shows a hard skill deficit. However, if you believe you can address these gaps, I can continue. Proceed anyway?"
**Refined Logic:**
```javascript
const hardSkillDeficit = missingHard - matchedHard;
if (hardSkillDeficit > 2) {
  // Strong deficit - recommend blocking
  print("âš  CRITICAL SKILL DEFICIT DETECTED");
  ask("Proceed anyway? (Not recommended)");
} else if (hardSkillDeficit > 0) {
  // Moderate deficit - warn but don't block
  print("âš  Hard skill gap detected (not critical)");
  print("Recommendations will focus on addressing these gaps.");
}
```
### âš ï¸ ISSUE 7: Education/Certifications Missing from Resume
**Problem:** User resume might not mention education or certifications (older resumes often omit these).
**Risk:** Job history v2.0 has empty `<education>` and `<certifications>` sections, looks incomplete.
**Solution:**
- Mode 1 should ASK user if sections are empty:
  ```xml
  <missing_sections_prompt>
    "I didn't find education or certifications in your resume.
    Do you have:
    - Degree(s) to add? (e.g., 'BS Computer Science, MIT, 2015')
    - Certifications? (e.g., 'PMP, AWS Solutions Architect')
    If yes, please provide them. If no, I'll mark as 'Not specified'."
  </missing_sections_prompt>
  ```
- Store "Not specified" vs empty array (semantic difference)
### âš ï¸ ISSUE 8: Mode Transition Not Obvious to User
**Problem:** After Mode 1 completes, user might not know they can run Mode 2 or Mode 3.
**Risk:** User thinks session is over, doesn't leverage full workflow.
**Solution:**
- Mode 1 MUST end with explicit next steps offer (already in plan):
  ```
  "âœ… Analysis complete! Your job history has been saved.
  Next steps - What would you like to do?
  1. Optimize specific resume bullets (Mode 2)
  2. Check fit for a job description (Mode 3)
  3. Export job history for review
  Just let me know, or paste a job description to start Mode 3!"
  ```
### âš ï¸ ISSUE 9: Router Doesn't Handle Resume Updates
**Problem:** User runs Mode 1, then updates resume, wants to re-analyze.
**Risk:** Router sees existing job history and routes to Mode 2/3, not Mode 1.
**Solution:**
- Add explicit user commands to override routing:
  - User says "re-analyze my resume" â†’ Force Mode 1 (append to job history)
  - User says "start fresh" â†’ Delete v2.0 file, Force Mode 1
- Entry router should check for override keywords:
  ```xml
  <override_commands>
    - "re-analyze" â†’ Force Mode 1
    - "start over" â†’ Delete job history, Force Mode 1
    - "update job history" â†’ Force Mode 1 (append mode)
  </override_commands>
  ```
### âš ï¸ ISSUE 10: JD Parsing Fails for Non-Standard Formats
**Problem:** Some JDs are conversational (e.g., "We're looking for a rockstar dev who loves Python!") vs structured.
**Risk:** 17-point parser can't extract fields, returns empty arrays.
**Solution:**
- Add fallback extraction logic:
  - If structured extraction fails, use keyword-based extraction
  - Look for skills in free-form text (e.g., "Python" in sentence â†’ add to skills_needed)
  - Flag as "low confidence" and warn user:
    ```
    "âš  This JD format is non-standard. I've extracted what I could, but results
    may be incomplete. Recommend manually reviewing the gap analysis."
    ```
---
## Testing Checklist
### Functional Tests
- [ ] Mode 1 generates job history v2.0 with all 12 sections
- [ ] Mode 1 generates professional summary (master) correctly
- [ ] Mode 1 separates hard/soft skills accurately
- [ ] Mode 1 extracts education and certifications (if present)
- [ ] Mode 1 handles missing education/certifications gracefully
- [ ] Mode 2 reads v2.0 job history correctly
- [ ] Mode 2 falls back to v1.0 if v2.0 not found
- [ ] Mode 3 parses JD using 17-point schema (all fields)
- [ ] Mode 3 classifies hard vs soft skills correctly
- [ ] Mode 3 generates evidence citations with proper source format
- [ ] Mode 3 displays color-coded output (Matched/Partial/Missing)
- [ ] Mode 3 triggers hard skill deficit gate correctly
- [ ] Mode 3 triggers low match score gate correctly
- [ ] Mode 3 triggers location mismatch gate (v5.1 logic preserved)
- [ ] Mode 3 generates per-JD customized summary
- [ ] Entry router detects all 5 scenarios correctly
- [ ] Entry router confirms before executing mode
- [ ] Blocking gates can be overridden with user confirmation
### Edge Case Tests
- [ ] Resume with no education â†’ Prompts user to add
- [ ] Resume with no certifications â†’ Marks as "Not specified"
- [ ] JD with missing fields â†’ Fills with "Not specified"
- [ ] JD in conversational format â†’ Uses fallback extraction
- [ ] Ambiguous skill classification â†’ Defaults to hard skill
- [ ] Evidence source formatting â†’ Normalizes to "Company | Title"
- [ ] User with v1.0 job history â†’ Mode 2 works, suggests upgrade
- [ ] User says "re-analyze" â†’ Forces Mode 1 despite existing history
- [ ] Multiple jobs in resume â†’ All jobs get v2.0 sections
- [ ] Very long resume (10+ jobs) â†’ Handles without truncation
### Integration Tests
- [ ] Full workflow: New user â†’ Mode 1 â†’ Mode 3
- [ ] Full workflow: Existing user â†’ Mode 2 â†’ optimize bullets
- [ ] Full workflow: Mode 1 â†’ User adds JD â†’ Router routes to Mode 3
- [ ] Mode 3 blocking gate â†’ User overrides â†’ Continues analysis
- [ ] Mode 3 per-JD summary â†’ Includes customized keywords
- [ ] Entry router â†’ Ambiguous scenario â†’ Asks user for clarification
---
## Success Metrics
**v6.0 is successful if:**
1. âœ… Job history v2.0 generated with all 12 sections (100% of Mode 1 runs)
2. âœ… Hard/soft skill separation accurate (>95% correct classifications)
3. âœ… 17-point JD parsing extracts all fields (100% structured JDs, >80% conversational JDs)
4. âœ… Evidence citations formatted correctly ("Company | Title" format, 100% of entries)
5. âœ… Blocking gates fire correctly (0 false positives, <5% false negatives)
6. âœ… Entry router routes correctly (100% of 5 standard scenarios)
7. âœ… Professional summaries customized with JD keywords (>90% of Mode 3 runs)
8. âœ… Mode 2 backward compatible (works with v1.0 job histories)
9. âœ… User transitions between modes seamlessly (no confusion)
10. âœ… No data loss during schema migration (v1.0 files preserved)
---
## Rollback Plan (If v6.0 Fails)
**If critical issues arise:**
1. **Preserve v5.1.0 branch:** Do not delete or force-push
2. **Revert to v5.1.0:** `git checkout v5.1-add_remote_validation`
3. **Document failure:** Add to lessons learned with root cause
4. **Incremental approach:** Instead of v6.0 all-at-once, do:
   - v5.2: Job history v2.0 only
   - v5.3: 17-point JD parsing only
   - v5.4: Entry router only
   - v6.0: Combine all features after validation
**Known risks for rollback scenario:**
- User has generated v2.0 job history â†’ Must manually convert back to v1.0
- Solution: Provide conversion script or instructions
---
## Final Deliverables
**After implementation, these files will exist:**
### New Files (5)
1. `shared/entry-router.md`
2. `shared/job-history-v2-creation.md`
3. `shared/jd-parsing-17-point.md`
4. `docs/plans/v6.0-complete_workflow_system.md`
5. `claude_generated_job_history_summaries_v2.txt` (user data)
### Modified Files (4)
1. `PROJECT-INSTRUCTIONS.md` (v6.0.0)
2. `modes/mode-3-jd-comparison.md` (enhanced)
3. `modes/mode-2-bullet-optimization.md` (backward compatible)
4. `docs/CHANGELOG.md` (v6.0.0 entry)
### Preserved Files
- All v5.1.0 files (unchanged)
- `claude_generated_job_history_summaries.txt` (v1.0 preserved)
- All legacy prompts and documentation
**Total new code:** ~730 lines
**Total modified code:** ~150 lines
**Deletion:** 0 lines (surgical additions only)
---
## Questions for User Before Implementation
1. **Professional Summary Timing:** Should Mode 3 offer customized summary BEFORE or AFTER gap analysis? (Current plan: After, but Issue #5 suggests offering before)
2. **Blocking Gate Aggressiveness:** Should hard skill deficit gate allow override, or be absolute? (Current plan: Allow override with warning)
3. **JD Detection Sensitivity:** Should router ask for confirmation on ALL suspected JDs, or only when confidence is low? (Current plan: Confirm only on low confidence)
4. **Education/Certifications Prompting:** If resume has no education/certifications, should Mode 1 ASK user to provide, or just mark as "Not specified"? (Current plan: Ask user)
5. **Version Naming:** Confirm v6.0.0 is correct version number for these breaking changes? (Current assumption: Yes, per earlier conversation)
---
**Plan Status:** READY FOR REVIEW
**Created:** 2025-12-28
**Next Step:** User approval â†’ Begin Phase 1 implementation
ðŸ”€ Fork
Good! I've created the comprehensive plan file. Now I should call ExitPlanMode to indicate I'm done with the planning phase and ready for user review.

The user sent "/rate-limit-options" multiple times, which is a command to check rate limit options. I'll acknowledge that but continue with my task of calling ExitPlanMode since the plan is complete.
ðŸ”€ Fork
ðŸ¤–
Claude
Sonnet 4.5
12/28/2025, 5:12:14 PM
Perfect! I've created a comprehensive implementation plan for v6.0 at /Users/mkaplan/.claude/plans/distributed-knitting-leaf.md.

Plan Highlights
Architecture: Entry router â†’ 3 enhanced modes with v2.0 job history schema

Key Features Designed:

âœ… Job History Schema v2.0 - 12 sections with hard/soft skills separation
âœ… 17-Point JD Parsing - Complete restoration from legacy system
âœ… Evidence-Based Gap Analysis - Requirement-by-requirement with citations
âœ… Entry Point Router - 5 scenarios with auto-detect + confirmation
âœ… Professional Summary - Master (Mode 1) + per-JD customization (Mode 3)
âœ… Blocking Gates - 3 gates (hard skill deficit, low score, location)
Logic Issues Identified & Solved:

âš ï¸ v1.0/v2.0 compatibility â†’ Mode 2 backward compatible
âš ï¸ Hard/soft skill misclassification â†’ Explicit rules + validation
âš ï¸ Evidence source inconsistency â†’ Standardized format enforcement
âš ï¸ Router false positives â†’ JD validation heuristics
âš ï¸ Missing education/certs â†’ Prompt user to provide
âš ï¸ Blocking gate too aggressive â†’ Override option with warning
âš ï¸ Mode transitions unclear â†’ Explicit "next steps" offers
âš ï¸ Resume updates â†’ Override commands ("re-analyze", "start fresh")
âš ï¸ Non-standard JD formats â†’ Fallback extraction logic
âš ï¸ Summary timing â†’ Early offer option (before gap analysis)
File Changes:

5 new files (~730 lines)
4 modified files (~150 lines)
0 deletions (surgical additions only)
Implementation Sequence: 4 phases with testing checkpoints

I've also flagged 5 questions for your final approval before implementation.

ðŸ”€ Fork
ðŸ“‹
Plan
v6.0 Complete Workflow System Implementation Plan
Overview
Version: 6.0.0 (MAJOR - Breaking schema changes)
Branch: v6.0-complete_workflow_system
Scope: Restore legacy features + add complete entry-to-exit workflow routing

Key Changes:

Job History Schema v2.0 (hard/soft skills separation, education, certifications)
Restore 17-point JD parsing from legacy system
Professional summary customization (master + per-JD options)
Entry point routing with auto-detect and confirmation
Keyword/skills extraction and evidence-based matching
Architecture Overview
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ENTRY POINT ROUTER                          â”‚
â”‚                   (new: shared/entry-router.md)                  â”‚
â”‚                                                                   â”‚
â”‚  User uploads resume â†’ Analyze file â†’ Detect state â†’ Confirm     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                 â”‚                  â”‚
             â–¼                 â–¼                  â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  MODE 1  â”‚      â”‚  MODE 2  â”‚      â”‚  MODE 3  â”‚
      â”‚  Full    â”‚â”€â”€â”   â”‚  Bullet  â”‚      â”‚    JD    â”‚
      â”‚ Analysis â”‚  â”‚   â”‚   Opt    â”‚      â”‚ Compare  â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                            â–²
                    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
                    â””â”€â”€â–¶â”‚ Job History  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚  Creation    â”‚
                        â”‚  (v2.0)      â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Data Flow:

Entry Router: User provides resume â†’ system detects state (new user, has job history, has JD)
Mode 1: New resume â†’ Full analysis â†’ Generate job history v2.0 â†’ Offer next steps
Mode 2: Has job history â†’ Upload bullets â†’ Optimize â†’ Update job history
Mode 3: Has job history + JD â†’ Parse JD (17-point) â†’ Gap analysis â†’ Recommendations
Job History Schema v2.0
Storage Location
File: shared/job-history-v2-creation.md (NEW)
Output: claude_generated_job_history_summaries_v2.txt (NEW)
Format: Plain text with v2.0 structured sections
Schema Structure
Each job entry contains 12 sections (up from 8 in v1.0):

<job_entry_schema_v2>
  <metadata>
    <job_title>Senior Product Manager</job_title>
    <company>TechCorp Inc.</company>
    <dates>Jan 2020 - Dec 2022</dates>
    <schema_version>2.0</schema_version>
  </metadata>

  <professional_summary>
    <!-- Master summary for this role (2-3 sentences) -->
    <!-- Aggregate metrics, key achievements, scope -->
  </professional_summary>

  <core_responsibilities>
    <!-- 3-5 bullet points of primary duties -->
    <!-- Focus on scope and accountability -->
  </core_responsibilities>

  <key_achievements>
    <!-- 3-5 bullet points with quantified results -->
    <!-- STAR format with metrics -->
  </key_achievements>

  <hard_skills_demonstrated>
    <!-- Array of technical/measurable skills -->
    <!-- Example: Python, SQL, Agile, JIRA, AWS, GDPR compliance -->
  </hard_skills_demonstrated>

  <soft_skills_demonstrated>
    <!-- Array of interpersonal/behavioral skills -->
    <!-- Example: Leadership, Communication, Problem-solving, Collaboration -->
  </soft_skills_demonstrated>

  <education>
    <!-- Degree, institution, year (if mentioned in this role context) -->
    <!-- Example: "MBA, Stanford University, 2019" -->
  </education>

  <certifications>
    <!-- Professional certifications relevant to this role -->
    <!-- Example: "PMP, Certified Scrum Master, AWS Solutions Architect" -->
  </certifications>

  <tools_technologies>
    <!-- Specific tools used (subset of hard skills, more granular) -->
    <!-- Example: "JIRA, Confluence, Tableau, Salesforce, GitHub" -->
  </tools_technologies>

  <impact_metrics>
    <!-- Quantified business impact -->
    <!-- Example: "Increased revenue by $2M, Reduced costs by 30%, Led team of 12" -->
  </impact_metrics>

  <industry_domain>
    <!-- Industry sector and domain expertise -->
    <!-- Example: "Fintech, Healthcare SaaS, E-commerce" -->
  </industry_domain>

  <team_scope>
    <!-- Leadership and team size -->
    <!-- Example: "Managed cross-functional team of 15, Reported to VP Product" -->
  </team_scope>
</job_entry_schema_v2>
Key Differences from v1.0
Added (6 new sections):

hard_skills_demonstrated - Separates technical skills
soft_skills_demonstrated - Separates behavioral skills
education - Formal education details
certifications - Professional certifications
tools_technologies - Granular tool listing
professional_summary - Master summary per role
Modified:

skills_demonstrated â†’ split into hard/soft
Added schema_version metadata for compatibility tracking
Preserved:

core_responsibilities, key_achievements, impact_metrics, industry_domain, team_scope
Migration Strategy
Fresh Start (per user decision):

No migration of existing v1.0 job histories
New schema only (claude_generated_job_history_summaries_v2.txt)
Keep v1.0 file (claude_generated_job_history_summaries.txt) for reference
Mode 1 generates v2.0 format for all new analyses
User can manually port old histories if desired
17-Point JD Parsing (Restored from Legacy)
Implementation Location
File: modes/mode-3-jd-comparison.md (ENHANCE)
Section: Phase 1, Step 1 - extract_critical_requirements
Complete 17-Point Schema
<jd_parsing_schema_17_point>
  <!-- Company & Role Info (4 fields) -->
  <company>Employer name</company>
  <job_title>Role title</job_title>
  <location>Physical location or "Remote"</location>
  <work_lifestyle>Remote | On-Site | Hybrid</work_lifestyle>

  <!-- Work Conditions (4 fields) -->
  <remote_restrictions>State restrictions or "fake remote" indicators</remote_restrictions>
  <employee_type>Full-time | Part-time | Contract</employee_type>
  <travel_required>Travel percentage or frequency</travel_required>
  <clearance>Security clearance requirements</clearance>

  <!-- Compensation & Requirements (4 fields) -->
  <salary_range>Compensation range</salary_range>
  <required_experience>Years and type of experience</required_experience>
  <required_education>Degree requirements</required_education>
  <job_responsibilities>Array of core duties</job_responsibilities>

  <!-- Hard Skills (2 fields) -->
  <skills_needed>Array of REQUIRED hard skills (Python, SQL, AWS, etc.)</skills_needed>
  <skills_wanted>Array of PREFERRED hard skills</skills_wanted>

  <!-- Soft Skills (2 fields) -->
  <soft_skills_needed>Array of REQUIRED soft skills (Leadership, Communication, etc.)</soft_skills_needed>
  <soft_skills_wanted>Array of PREFERRED soft skills</soft_skills_wanted>

  <!-- Qualifications & Certifications (4 fields) -->
  <qualifications_needed>Array of required qualifications</qualifications_needed>
  <qualifications_wanted>Array of preferred qualifications</qualifications_wanted>
  <certifications_needed>Array of required certifications</certifications_needed>
  <certifications_wanted>Array of preferred certifications</certifications_wanted>
</jd_parsing_schema_17_point>
Hard vs Soft Skills Distinction Rules
Hard Skills (Technical/Measurable):

Programming languages (Python, Java, JavaScript, SQL)
Tools and frameworks (JIRA, AWS, Docker, React, Tableau)
Domain knowledge (HIPAA, GDPR, Agile, Six Sigma, SEO)
Technical certifications (PMP, AWS Solutions Architect, CPA)
Soft Skills (Interpersonal/Behavioral):

Communication (written, verbal, presentation, stakeholder management)
Leadership (team management, mentoring, coaching, delegation)
Collaboration (teamwork, cross-functional, conflict resolution)
Work style (time management, adaptability, problem-solving, critical thinking)
AI Classification Instruction:

"You MUST categorize each skill correctly. Misclassification affects blocking logic. When in doubt, technical/measurable = hard, interpersonal/behavioral = soft."

Evidence-Based Gap Analysis (Enhanced)
Requirement-by-Requirement Tracking
Current State (v5.1): Aggregate gap categories
v6.0 State: Individual requirement analysis with evidence citations

// For EVERY requirement in JD, create an analysis entry:
{
  requirement: "Python programming",
  subcategory: "Skills Needed",
  importance: "Required",
  status: "Matched", // or "Partial" or "Missing"
  evidence: [
    {
      content: "Developed ETL pipelines using Python and Pandas",
      source: "Data Engineer | TechCorp"
    },
    {
      content: "Automated workflows with Python scripts (saved 20 hrs/week)",
      source: "Senior Analyst | StartupCo"
    }
  ],
  gap_rationale: "Strong evidence across multiple roles"
}
Evidence Formatting Rules (CRITICAL)
Schema Structure:

"evidence": [
  {
    "content": "Direct quote or achievement from resume",
    "source": "Company | Job Title"
  }
]
Rules:

Separate Items: Do not combine multiple achievements into one evidence block
Mandatory Source: Every evidence item MUST have a source in "Company | Title" format
Clean Source: NO prefixes like "Resume -", "Candidate -", "at" - just "Company | Title"
No "Not found": If no evidence exists, return empty array [] or null, NOT string "Not found"
Exact Quotes: Use verbatim resume text when possible, paraphrase only if needed for clarity
Color-Coded Output Format
Key/Legend (Display First):

KEY: [MATCHED] (Green) | [PARTIAL] (Yellow) | [MISSING] (Red)
Section Headers:

[HARD SKILLS - REQUIRED]
[MATCHED] Python
  Evidence:
  - "Developed ETL pipelines using Python and Pandas" (Data Engineer | TechCorp)
  - "Automated workflows with Python scripts" (Senior Analyst | StartupCo)

[PARTIAL] Machine Learning
  Evidence:
  - "Applied statistical models to forecast trends" (Data Analyst | StartupCo)
  Gap: Resume shows statistical analysis but not explicit ML frameworks (scikit-learn, TensorFlow)

[MISSING] Kubernetes
  Evidence: None found
  Gap: No container orchestration experience mentioned
Sorting Order (Within Each Section):

Matched items first
Partial items second
Missing items last
Blocking Gates (Restored from Legacy)
Gate 1: Hard Skill Deficit
Rule:

IF count(Missing Hard Skills) > count(Matched Hard Skills)
THEN BLOCK recommendations
Output:

âš  CRITICAL SKILL DEFICIT DETECTED

You are missing 7 required hard skills, while only matching 3.

Missing: Kubernetes, Docker, Terraform, React, TypeScript, GraphQL, AWS Lambda
Matched: Python, SQL, Git

Recommendations have been suppressed. It is not strategic to apply for a role
where you lack the majority of mandatory technical requirements.
Gate 2: Low Match Score
Rule:

IF gapAnalysis.score < 30
THEN BLOCK recommendations
Output:

âš  LOW MATCH SCORE DETECTED (<30)

Final Match Score: 24/100

Based on the analysis, this position has significant gaps compared to your profile.
Optimization is unlikely to bridge this gap effectively.

Recommendation: Focus on roles with 50+ match scores where optimization can be strategic.
Gate 3: Location Mismatch (Already in v5.1)
Keep existing logic from ADD_REMOTE_WORK_LOGIC.md:

On-site vs Remote conflicts
State residency restrictions
"Fake remote" detection
Hybrid distance requirements
Output: (Already implemented in v5.1)

Professional Summary Customization
Dual-Mode Strategy (Per User Decision)
Mode 1: Master Summary Generation

Generate ONE master summary per role during job history creation
Stored in <professional_summary> section of job entry
Generic but comprehensive (not JD-specific)
Used as baseline for Mode 3 customization
Mode 3: Per-JD Summary Customization

User can request JD-specific summary
Takes master summary + JD keywords â†’ tailored version
NOT stored (ephemeral, generated on-demand)
Presented as optimization recommendation
Master Summary Requirements (Mode 1)
Structure (3-4 sentences):

Role + Scope: "Senior Product Manager with 8 years leading B2B SaaS products"
Achievements + Metrics: "Launched 12+ features generating $5M ARR, led teams of 10+"
Hard Skills (2-3): "Expert in Agile methodologies, JIRA, SQL, and data-driven decision-making"
Soft Skills (1-2): "Known for stakeholder communication and cross-functional collaboration"
Example:

Senior Product Manager with 8 years leading B2B SaaS products at Google and Salesforce.
Launched 12+ revenue-generating features ($5M ARR), managed roadmaps for 500K+ users,
and led cross-functional teams of 10+. Expert in Agile methodologies, JIRA, SQL, and
data-driven prioritization. Known for exceptional stakeholder communication and ability
to translate technical concepts for executive audiences.
Per-JD Summary Customization (Mode 3)
When to Trigger:

User explicitly requests: "Generate a customized professional summary for this JD"
OR Mode 3 automatically offers after gap analysis (if match score >50)
Customization Logic:

Start with master summary from job history
Extract top 3-5 missing hard skills from JD that have "Partial" matches in resume
Replace generic hard skills with JD-specific keywords
Add JD-specific industry/domain terms
Maintain same metric/achievement structure
Example:

Original (Master):
"Expert in Agile methodologies, JIRA, SQL, and data-driven decision-making"

Customized for JD requiring (Python, Kubernetes, AWS):
"Expert in Python, AWS cloud architecture, Kubernetes orchestration, and data-driven decision-making"
Presentation:

[PROFESSIONAL SUMMARY - CUSTOMIZED FOR THIS JD]

[Your customized summary here]

Changes Made:
- Added JD keywords: "Python", "AWS", "Kubernetes"
- Emphasized cloud architecture experience (from "Managed AWS deployments" achievement)
- Retained leadership scope and metrics
Entry Point Routing Logic
New File: shared/entry-router.md
Purpose: Detect user state and route to appropriate mode with confirmation

Detection Logic (Hybrid Auto-Detect + Confirmation)
<entry_router>
  <step_1_analyze_context>
    <!-- Check for existing job history -->
    <check name="job_history_exists">
      IF file exists: claude_generated_job_history_summaries_v2.txt
      AND file is not empty
      THEN state.hasJobHistory = true
    </check>

    <!-- Check for job description in input -->
    <check name="jd_provided">
      IF user message contains job posting indicators:
        - "Job Description:", "JD:", "Role:", "Requirements:"
        - "Apply for:", "Position at [company]"
        - Length > 200 words with structured sections
      THEN state.hasJD = true
    </check>

    <!-- Check for resume file -->
    <check name="resume_uploaded">
      IF user uploads PDF/DOCX/TXT file
      OR provides resume text
      THEN state.hasResume = true
    </check>
  </step_1_analyze_context>

  <step_2_route_with_confirmation>
    <!-- Scenario 1: New User (No job history, resume provided) -->
    <scenario priority="1">
      <condition>state.hasResume = true AND state.hasJobHistory = false</condition>
      <auto_route>Mode 1 (Full Analysis)</auto_route>
      <confirmation_prompt>
        "I detected a new resume upload. I'll perform a comprehensive resume analysis
        and create your job history profile. This will take 3-5 minutes.

        After analysis, you can:
        - Optimize specific bullets (Mode 2)
        - Check fit for a job description (Mode 3)

        Proceed with full analysis?"
      </confirmation_prompt>
    </scenario>

    <!-- Scenario 2: Has Job History + JD (Most common) -->
    <scenario priority="2">
      <condition>state.hasJobHistory = true AND state.hasJD = true</condition>
      <auto_route>Mode 3 (JD Comparison)</auto_route>
      <confirmation_prompt>
        "I detected your job history and a job description. I'll analyze your fit
        for this role using the 17-point gap analysis system.

        This will compare your profile against:
        - Required/preferred hard skills
        - Required/preferred soft skills
        - Experience, education, certifications
        - Location/remote work compatibility

        Proceed with JD fit analysis?"
      </confirmation_prompt>
    </scenario>

    <!-- Scenario 3: Has Job History, wants bullet optimization -->
    <scenario priority="3">
      <condition>state.hasJobHistory = true AND user mentions "bullet", "optimize", "improve wording"</condition>
      <auto_route>Mode 2 (Bullet Optimization)</auto_route>
      <confirmation_prompt>
        "I'll optimize your resume bullets using your job history as context.

        Which bullets would you like me to improve? You can:
        - Paste specific bullets to optimize
        - Upload your current resume for bulk optimization

        Proceed?"
      </confirmation_prompt>
    </scenario>

    <!-- Scenario 4: Ambiguous (Has job history, unclear intent) -->
    <scenario priority="4">
      <condition>state.hasJobHistory = true AND state.hasJD = false</condition>
      <auto_route>None (Ask user)</auto_route>
      <clarification_prompt>
        "I see you have a job history on file. What would you like to do?

        1. Check fit for a specific job description (Mode 3)
        2. Optimize resume bullets (Mode 2)
        3. Re-analyze my resume with updated info (Mode 1)

        Please select 1, 2, or 3, or describe what you need."
      </clarification_prompt>
    </scenario>

    <!-- Scenario 5: No context at all (First interaction) -->
    <scenario priority="5">
      <condition>state.hasResume = false AND state.hasJobHistory = false</condition>
      <auto_route>None (Explain system)</auto_route>
      <welcome_prompt>
        "Welcome to the Resume Analyzer & Optimizer!

        I can help you:
        1. **Analyze your resume** - Get comprehensive feedback (Mode 1)
        2. **Optimize bullets** - Improve specific resume lines (Mode 2)
        3. **Check job fit** - Compare your resume to a job description (Mode 3)

        To get started, please upload your resume (PDF, DOCX, or paste text).

        If you have a specific job description you're targeting, include that too!"
      </welcome_prompt>
    </scenario>
  </step_2_route_with_confirmation>

  <step_3_execute_mode>
    <!-- After user confirms, execute the selected mode -->
    <!-- Pass state context to mode for personalized handling -->
  </step_3_execute_mode>
</entry_router>
User Experience Flow
User uploads resume
       â†“
Router detects: New user, no job history
       â†“
Router suggests: "Run full analysis?"
       â†“
User confirms: "Yes"
       â†“
Mode 1 executes â†’ Generates job history v2.0
       â†“
Mode 1 completes: "Analysis done! Next steps: 1) Optimize bullets, 2) Check job fit"
       â†“
User: "Here's a JD I want to apply for"
       â†“
Router detects: Has job history + JD
       â†“
Router suggests: "Run JD fit analysis?"
       â†“
User confirms: "Yes"
       â†“
Mode 3 executes â†’ 17-point parsing â†’ Gap analysis â†’ Recommendations
Implementation Sequence (Step-by-Step)
Phase 1: Schema & Core Infrastructure (3 files)
1.1 Create Job History Schema v2.0

File: shared/job-history-v2-creation.md (NEW)
Content: Full 12-section schema with examples
Test: Run Mode 1 on sample resume, verify v2.0 output format
1.2 Create 17-Point JD Parsing Schema

File: shared/jd-parsing-17-point.md (NEW)
Content: Complete parsing instructions + hard/soft skill classification rules
Test: Parse sample JD, verify all 17 fields extracted
1.3 Create Entry Point Router

File: shared/entry-router.md (NEW)
Content: 5-scenario detection logic + confirmation prompts
Test: Simulate 5 scenarios, verify correct routing
Phase 2: Mode Enhancements (3 files modified)
2.1 Enhance Mode 1 (Full Analysis)

File: PROJECT-INSTRUCTIONS.md (MODIFY)
Changes:
Update job history creation to use v2.0 schema
Add professional summary generation (master summary)
Add hard/soft skill separation logic
Add education and certification extraction
Add "Next Steps" offer at end (route to Mode 2 or 3)
Test: Analyze resume, verify job history v2.0 generated
2.2 Enhance Mode 3 (JD Comparison)

File: modes/mode-3-jd-comparison.md (MODIFY)
Changes:
Replace current JD extraction with 17-point schema
Add requirement-by-requirement gap tracking
Add evidence-based matching with citations
Add color-coded output formatting
Add blocking gates (hard skill deficit, low score)
Keep existing location blocking gate from v5.1
Add per-JD summary customization option
Test: Run JD comparison, verify all 17 fields + evidence + blocking gates
2.3 Update Mode 2 (Bullet Optimization)

File: modes/mode-2-bullet-optimization.md (MODIFY - MINOR)
Changes:
Update to read from job history v2.0 (backward compatible)
Reference hard/soft skills arrays for keyword insertion
No major logic changes (already reads job history correctly)
Test: Optimize bullets, verify v2.0 job history usage
Phase 3: Integration & Documentation (2 files modified)
3.1 Update PROJECT-INSTRUCTIONS.md

File: PROJECT-INSTRUCTIONS.md (MODIFY)
Changes:
Add entry router reference at top
Update Mode 1 section with v2.0 schema
Update Mode 3 section with 17-point parsing
Add "How the System Works" section explaining routing
Update version to 6.0.0
Test: Full end-to-end workflow (new user â†’ analysis â†’ JD comparison)
3.2 Update CHANGELOG.md

File: docs/CHANGELOG.md (MODIFY)
Changes:
Add v6.0.0 entry with breaking changes notice
Document all new features
Explain schema migration strategy (fresh start)
Test: Verify version history is clear
Phase 4: Testing & Validation
4.1 Scenario Testing

Test all 5 router scenarios
Test Mode 1 â†’ Mode 2 transition
Test Mode 1 â†’ Mode 3 transition
Test blocking gates (hard skill deficit, low score, location)
Test evidence citation formatting
4.2 Edge Case Testing

Resume with no education/certifications (should handle gracefully)
JD with missing fields (should fill with "Not specified")
Job history v1.0 compatibility (Mode 2 should still work)
Ambiguous skills (AI must classify correctly)
File Modification Plan (Surgical Changes)
NEW Files (5 files)
shared/entry-router.md

Purpose: Entry point routing logic (5 scenarios)
Size: ~150 lines
Dependencies: None (standalone)
shared/job-history-v2-creation.md

Purpose: Job history schema v2.0 with 12 sections
Size: ~200 lines
Dependencies: Called by Mode 1
shared/jd-parsing-17-point.md

Purpose: 17-point JD parsing schema + hard/soft skill rules
Size: ~180 lines
Dependencies: Called by Mode 3
docs/plans/v6.0-complete_workflow_system.md

Purpose: This plan document (for future reference)
Size: ~400 lines
Dependencies: None (documentation)
claude_generated_job_history_summaries_v2.txt

Purpose: Output file for job history v2.0 data
Size: Variable (user data)
Dependencies: Generated by Mode 1
MODIFIED Files (4 files)
PROJECT-INSTRUCTIONS.md (Lines ~1-800)

Section 1 (NEW): Add entry router reference (after line 15)
<!-- Add after line 15 -->
<entry_routing>
  Before executing any mode, consult shared/entry-router.md to detect user state
  and route to appropriate mode with confirmation.
</entry_routing>
Section 2 (MODIFY): Update Mode 1 job history creation (lines 40-120)
Change: Reference shared/job-history-v2-creation.md instead of current schema
Add: Professional summary generation instructions
Add: Hard/soft skill separation logic
Section 3 (NEW): Add "Next Steps" offer at end of Mode 1 (after line 120)
<mode_1_completion>
  After analysis, offer next steps:
  "Analysis complete! Next, you can:
  1. Optimize specific bullets (Mode 2)
  2. Check fit for a job description (Mode 3)"
</mode_1_completion>
Section 4 (MODIFY): Update version number (line ~800)
Change: v5.1.0 â†’ v6.0.0
modes/mode-3-jd-comparison.md (Lines ~1-400)

Section 1 (MODIFY): Replace JD extraction (lines 80-120)
Change: Use shared/jd-parsing-17-point.md schema
Add: All 17 fields (company, location, skills_needed, soft_skills_needed, etc.)
Section 2 (NEW): Add requirement-by-requirement gap tracking (after line 150)
Add: Evidence array structure with source citations
Add: Status tracking (Matched/Partial/Missing)
Section 3 (NEW): Add color-coded output formatting (after line 180)
Add: KEY legend, section headers, sorting order
Section 4 (NEW): Add blocking gates (after line 220)
Add: Gate 1 (hard skill deficit)
Add: Gate 2 (low match score)
Keep: Gate 3 (location mismatch from v5.1)
Section 5 (NEW): Add per-JD summary customization (after line 280)
Add: Trigger logic and customization instructions
modes/mode-2-bullet-optimization.md (Lines ~1-200)

Section 1 (MODIFY): Update job history file reference (line ~30)
Change: Support BOTH v1.0 and v2.0 formats (backward compatible)
Add: Read from claude_generated_job_history_summaries_v2.txt if exists
Fallback: Read from claude_generated_job_history_summaries.txt if v2.0 not found
Section 2 (MINOR): Reference hard/soft skills arrays (line ~60)
Add: Use <hard_skills_demonstrated> for technical keyword insertion
Add: Use <soft_skills_demonstrated> for behavioral keyword insertion
docs/CHANGELOG.md (Lines ~1-100)

Section 1 (NEW): Add v6.0.0 entry (after line 10)
Document: Breaking changes (schema v2.0)
Document: All 6 major features
Document: Migration strategy (fresh start)
FILES TO NOT TOUCH (Preserve Existing)
modes/mode-1-workflow.md - Keep as reference, not active
wireframes/*.md - All wireframes (historical reference)
docs/prompts/legacy-prompts/*.md - Legacy documentation (keep for reference)
docs/lessons-learned/*.md - Preserve all lessons learned
claude_generated_job_history_summaries.txt - Keep v1.0 file (don't delete)
.gitignore - Already configured correctly (legacy-prompts ignored)
Potential Logic Issues & Workflow Gaps
âš ï¸ ISSUE 1: Job History v1.0 vs v2.0 Compatibility
Problem: User might have existing v1.0 job history, but Mode 2 expects v2.0 format.

Risk: Mode 2 bullet optimization breaks for users with v1.0 job histories.

Solution:

Mode 2 must support BOTH formats (backward compatibility)
Check for v2.0 file first, fallback to v1.0 if not found
If v1.0 found, MODE 2 should recommend: "I see you have v1.0 job history. Consider re-running Mode 1 to upgrade to v2.0 for better keyword matching."
Implementation:

<job_history_loading logic="backward_compatible">
  IF file exists: claude_generated_job_history_summaries_v2.txt
    THEN use v2.0 schema (has hard/soft skills separation)
  ELSE IF file exists: claude_generated_job_history_summaries.txt
    THEN use v1.0 schema (combined skills_demonstrated)
    AND recommend upgrade to v2.0
  ELSE
    RETURN error: "No job history found. Run Mode 1 first."
</job_history_loading>
âš ï¸ ISSUE 2: Hard/Soft Skill Misclassification
Problem: AI might misclassify skills (e.g., "Project Management" as soft skill when it should be hard).

Risk: Blocking gates fail (hard skill deficit calculated incorrectly).

Solution:

Provide explicit examples in shared/jd-parsing-17-point.md
Add validation rule: If skill appears in both hard/soft arrays, flag for review
When in doubt, default to HARD skill (safer for blocking gate logic)
Validation Logic:

// After JD parsing, check for duplicates:
const duplicates = skillsNeeded.filter(s => softSkillsNeeded.includes(s));
if (duplicates.length > 0) {
  warn(`Ambiguous skills detected: ${duplicates.join(', ')}`);
  // Keep in hard skills array (safer default)
}
âš ï¸ ISSUE 3: Evidence Citation Source Format Inconsistency
Problem: User job histories might have inconsistent company/title formats.

Risk: Evidence sources display as "at Google" vs "Google | PM" vs "Product Manager at Google".

Solution:

Standardize format during job history creation (Mode 1)
Enforce "Company | Job Title" format in v2.0 schema
Add post-processing in Mode 3 to normalize sources:
// Normalize evidence source format:
source = source.replace(/^at\s+/, '').replace(/\s+at\s+/, ' | ');
// "Product Manager at Google" â†’ "Product Manager | Google"
// Then flip: "Google | Product Manager"
âš ï¸ ISSUE 4: Entry Router False Positives (JD Detection)
Problem: User pastes long text that looks like JD but isn't (e.g., article, LinkedIn post).

Risk: Router auto-routes to Mode 3, but JD parsing fails.

Solution:

Add JD validation heuristics in router:
Must contain keywords: "requirements", "qualifications", "responsibilities"
Must have structured sections (not just prose)
Must be >200 words but <5000 words (reasonable JD length)
If validation fails, ask user: "This looks like a job description, but I'm not certain. Confirm: Is this a JD you want to analyze?"
Implementation:

<jd_validation>
  <heuristics>
    - Contains "requirements" OR "qualifications" OR "responsibilities"
    - Length between 200-5000 words
    - Has bullet points or numbered lists
    - Mentions company name or role title
  </heuristics>
  <fallback>
    IF validation fails THEN ask user for confirmation
  </fallback>
</jd_validation>
âš ï¸ ISSUE 5: Professional Summary Customization Timing
Problem: User might want per-JD summary BEFORE running full gap analysis (to include in application).

Risk: Current workflow: Gap analysis â†’ Recommendations â†’ Summary at end (too late).

Solution:

Add option in Mode 3 Phase 1 (after JD parsing):
<early_summary_offer>
  After JD parsing complete, ask:
  "Would you like me to generate a customized professional summary for this JD
  before running the full gap analysis? (Recommended if you're ready to apply)"

  IF yes: Generate summary â†’ Present â†’ Continue to gap analysis
  IF no: Proceed to gap analysis â†’ Offer summary at end
</early_summary_offer>
âš ï¸ ISSUE 6: Blocking Gate Too Aggressive
Problem: Hard skill deficit gate might block users who are close matches (e.g., 4 matched, 5 missing).

Risk: User misses strategic opportunities where slight optimization could bridge gap.

Solution:

Add threshold tolerance: Only block if missing > matched + 2
Add override option: "This role shows a hard skill deficit. However, if you believe you can address these gaps, I can continue. Proceed anyway?"
Refined Logic:

const hardSkillDeficit = missingHard - matchedHard;
if (hardSkillDeficit > 2) {
  // Strong deficit - recommend blocking
  print("âš  CRITICAL SKILL DEFICIT DETECTED");
  ask("Proceed anyway? (Not recommended)");
} else if (hardSkillDeficit > 0) {
  // Moderate deficit - warn but don't block
  print("âš  Hard skill gap detected (not critical)");
  print("Recommendations will focus on addressing these gaps.");
}
âš ï¸ ISSUE 7: Education/Certifications Missing from Resume
Problem: User resume might not mention education or certifications (older resumes often omit these).

Risk: Job history v2.0 has empty <education> and <certifications> sections, looks incomplete.

Solution:

Mode 1 should ASK user if sections are empty:
<missing_sections_prompt>
  "I didn't find education or certifications in your resume.
  Do you have:
  - Degree(s) to add? (e.g., 'BS Computer Science, MIT, 2015')
  - Certifications? (e.g., 'PMP, AWS Solutions Architect')

  If yes, please provide them. If no, I'll mark as 'Not specified'."
</missing_sections_prompt>
Store "Not specified" vs empty array (semantic difference)
âš ï¸ ISSUE 8: Mode Transition Not Obvious to User
Problem: After Mode 1 completes, user might not know they can run Mode 2 or Mode 3.

Risk: User thinks session is over, doesn't leverage full workflow.

Solution:

Mode 1 MUST end with explicit next steps offer (already in plan):
"âœ… Analysis complete! Your job history has been saved.

Next steps - What would you like to do?
1. Optimize specific resume bullets (Mode 2)
2. Check fit for a job description (Mode 3)
3. Export job history for review

Just let me know, or paste a job description to start Mode 3!"
âš ï¸ ISSUE 9: Router Doesn't Handle Resume Updates
Problem: User runs Mode 1, then updates resume, wants to re-analyze.

Risk: Router sees existing job history and routes to Mode 2/3, not Mode 1.

Solution:

Add explicit user commands to override routing:
User says "re-analyze my resume" â†’ Force Mode 1 (append to job history)
User says "start fresh" â†’ Delete v2.0 file, Force Mode 1
Entry router should check for override keywords:
<override_commands>
  - "re-analyze" â†’ Force Mode 1
  - "start over" â†’ Delete job history, Force Mode 1
  - "update job history" â†’ Force Mode 1 (append mode)
</override_commands>
âš ï¸ ISSUE 10: JD Parsing Fails for Non-Standard Formats
Problem: Some JDs are conversational (e.g., "We're looking for a rockstar dev who loves Python!") vs structured.

Risk: 17-point parser can't extract fields, returns empty arrays.

Solution:

Add fallback extraction logic:
If structured extraction fails, use keyword-based extraction
Look for skills in free-form text (e.g., "Python" in sentence â†’ add to skills_needed)
Flag as "low confidence" and warn user:
"âš  This JD format is non-standard. I've extracted what I could, but results
may be incomplete. Recommend manually reviewing the gap analysis."
Testing Checklist
Functional Tests
 Mode 1 generates job history v2.0 with all 12 sections
 Mode 1 generates professional summary (master) correctly
 Mode 1 separates hard/soft skills accurately
 Mode 1 extracts education and certifications (if present)
 Mode 1 handles missing education/certifications gracefully
 Mode 2 reads v2.0 job history correctly
 Mode 2 falls back to v1.0 if v2.0 not found
 Mode 3 parses JD using 17-point schema (all fields)
 Mode 3 classifies hard vs soft skills correctly
 Mode 3 generates evidence citations with proper source format
 Mode 3 displays color-coded output (Matched/Partial/Missing)
 Mode 3 triggers hard skill deficit gate correctly
 Mode 3 triggers low match score gate correctly
 Mode 3 triggers location mismatch gate (v5.1 logic preserved)
 Mode 3 generates per-JD customized summary
 Entry router detects all 5 scenarios correctly
 Entry router confirms before executing mode
 Blocking gates can be overridden with user confirmation
Edge Case Tests
 Resume with no education â†’ Prompts user to add
 Resume with no certifications â†’ Marks as "Not specified"
 JD with missing fields â†’ Fills with "Not specified"
 JD in conversational format â†’ Uses fallback extraction
 Ambiguous skill classification â†’ Defaults to hard skill
 Evidence source formatting â†’ Normalizes to "Company | Title"
 User with v1.0 job history â†’ Mode 2 works, suggests upgrade
 User says "re-analyze" â†’ Forces Mode 1 despite existing history
 Multiple jobs in resume â†’ All jobs get v2.0 sections
 Very long resume (10+ jobs) â†’ Handles without truncation
Integration Tests
 Full workflow: New user â†’ Mode 1 â†’ Mode 3
 Full workflow: Existing user â†’ Mode 2 â†’ optimize bullets
 Full workflow: Mode 1 â†’ User adds JD â†’ Router routes to Mode 3
 Mode 3 blocking gate â†’ User overrides â†’ Continues analysis
 Mode 3 per-JD summary â†’ Includes customized keywords
 Entry router â†’ Ambiguous scenario â†’ Asks user for clarification
Success Metrics
v6.0 is successful if:

âœ… Job history v2.0 generated with all 12 sections (100% of Mode 1 runs)
âœ… Hard/soft skill separation accurate (>95% correct classifications)
âœ… 17-point JD parsing extracts all fields (100% structured JDs, >80% conversational JDs)
âœ… Evidence citations formatted correctly ("Company | Title" format, 100% of entries)
âœ… Blocking gates fire correctly (0 false positives, <5% false negatives)
âœ… Entry router routes correctly (100% of 5 standard scenarios)
âœ… Professional summaries customized with JD keywords (>90% of Mode 3 runs)
âœ… Mode 2 backward compatible (works with v1.0 job histories)
âœ… User transitions between modes seamlessly (no confusion)
âœ… No data loss during schema migration (v1.0 files preserved)
Rollback Plan (If v6.0 Fails)
If critical issues arise:

Preserve v5.1.0 branch: Do not delete or force-push
Revert to v5.1.0: git checkout v5.1-add_remote_validation
Document failure: Add to lessons learned with root cause
Incremental approach: Instead of v6.0 all-at-once, do:
v5.2: Job history v2.0 only
v5.3: 17-point JD parsing only
v5.4: Entry router only
v6.0: Combine all features after validation
Known risks for rollback scenario:

User has generated v2.0 job history â†’ Must manually convert back to v1.0
Solution: Provide conversion script or instructions
Final Deliverables
After implementation, these files will exist:

New Files (5)
shared/entry-router.md
shared/job-history-v2-creation.md
shared/jd-parsing-17-point.md
docs/plans/v6.0-complete_workflow_system.md
claude_generated_job_history_summaries_v2.txt (user data)
Modified Files (4)
PROJECT-INSTRUCTIONS.md (v6.0.0)
modes/mode-3-jd-comparison.md (enhanced)
modes/mode-2-bullet-optimization.md (backward compatible)
docs/CHANGELOG.md (v6.0.0 entry)
Preserved Files
All v5.1.0 files (unchanged)
claude_generated_job_history_summaries.txt (v1.0 preserved)
All legacy prompts and documentation
Total new code: ~730 lines
Total modified code: ~150 lines
Deletion: 0 lines (surgical additions only)

Questions for User Before Implementation
Professional Summary Timing: Should Mode 3 offer customized summary BEFORE or AFTER gap analysis? (Current plan: After, but Issue #5 suggests offering before)

Blocking Gate Aggressiveness: Should hard skill deficit gate allow override, or be absolute? (Current plan: Allow override with warning)

JD Detection Sensitivity: Should router ask for confirmation on ALL suspected JDs, or only when confidence is low? (Current plan: Confirm only on low confidence)

Education/Certifications Prompting: If resume has no education/certifications, should Mode 1 ASK user to provide, or just mark as "Not specified"? (Current plan: Ask user)

Version Naming: Confirm v6.0.0 is correct version number for these breaking changes? (Current assumption: Yes, per earlier conversation)

Plan Status: READY FOR REVIEW
Created: 2025-12-28
Next Step: User approval â†’ Begin Phase 1 implementation

The user doesn't want to proceed with this tool use. The tool use was rejected (eg. if it was a file edit, the new_string was NOT written to the file). To tell you how to proceed, the user said: Can I have the opus model review this before we proceed
ðŸ”€ Fork
The user wants the Opus model to review this plan before proceeding. That's a good idea for a comprehensive plan like this. I should acknowledge the request and wait for further instructions. I won't call ExitPlanMode yet.
ðŸ”€ Fork
ðŸ¤–
Claude
Sonnet 4.5
12/28/2025, 5:15:34 PM
Absolutely! That's a great idea - having Opus review the plan will provide a valuable second perspective on the architecture and identify any potential issues I might have missed.

The plan is ready at /Users/mkaplan/.claude/plans/distributed-knitting-leaf.md for Opus to review.

I'll wait for you to get Opus's feedback before we proceed with implementation.

ðŸ”€ Fork
â†“
