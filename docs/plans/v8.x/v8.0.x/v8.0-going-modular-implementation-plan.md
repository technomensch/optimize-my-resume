# v8.0 Going Modular - Implementation Plan

**Version Strategy:** v8.0 (directory restructure, cascade foundation) â†’ v8.1-8.5 (modular features)  
**Created:** 2026-01-12  
**Status:** ðŸ”´ PLANNING - Awaiting User Approval  
**Related Issues:** #27 (v8.0), #28 (v8.1), #33 (v8.1.1), #29 (v8.2), #30 (v8.3), #31 (v8.4), #32 (v8.5)

---

## Executive Summary

Breaking apart the monolithic `PROJECT-INSTRUCTIONS.md` file (85,000 tokens) into a modular architecture:
- **v8.0**: Directory restructure (CASCADE FOUNDATION - all other changes depend on this)
- **v8.1-8.4**: Module extractions (can be done in parallel after v8.0)
- **v8.5**: Final integration
- Core file: ~47,000 tokens (45% reduction)
- 4 on-demand modules loaded only when needed

### Three Deployment Models
1. **Single Prompt (Multi-LLM)** - Complete file for any LLM, no GUI except markdown
2. **Modular Local React** - Development environment with selective loading
3. **Modular Claude Projects** - 5 files uploaded, 30-45% token savings per session

---

## Why v8.0 = Directory Restructure

**Cascade Logic:**
- ALL module extractions (#28-31) reference paths like `optimization-tools/resume-analyzer/`
- If modules extracted FIRST, then directories restructured â†’ would need to update all module paths AGAIN
- **Directory restructure MUST happen before any module work**

This is the foundation everything else builds on.

---

## âš ï¸ CRITICAL: Validation Rules for AI Implementation

> [!CAUTION]
> **These rules MUST be followed during implementation to prevent errors.**

### Rule 1: "Shadow Modularization" & "Silent Sync" Philosophy
This strategy maintains a "Gold Master" while creating an "Optimized Entry Point":
- **PROJECT-INSTRUCTIONS.md (Gold Master):** Identify and Copy only. Content remains intact. Add **Silent Sync** breadcrumbs (HTML comments) for maintenance tracking without polluting the active prompt logic.
- **Project-GUI-Instructions.md (Optimized Entry Point):** Extract and Remove. Duplicate content is removed and replaced with **Active References** (XML tags) to trigger modular loading.
- **Verification:** Show user BOTH the "Silent Sync" comment in the Gold Master and the "Active Reference" in the GUI entry point.

### Rule 2: User Confirmation Checkpoints
Before proceeding at each stage, STOP and get user approval:
- [ ] Before creating any branch
- [ ] Before renaming any directory or file
- [ ] Before extracting any content block
- [ ] Before adding any reference block
- [ ] Before merging to main
- [ ] **STRICT REQUIREMENT:** Do NOT delete feature branches after merging; they must remain archived on origin.

### Rule 3: No Assumptions
- If the plan says "extract `<section_name>`" but the exact boundaries are unclear â†’ **ASK**
- If a file reference seems wrong â†’ **ASK**
- If you're unsure about any change â†’ **ASK**
- Do NOT infer or guess what should be included

### Rule 4: Validation Before Moving On
After each extraction:
1. Show the user the exact content that was moved
2. Show the user the reference block that was added
3. User confirms both match expectations
4. Only then proceed to next step

### Rule 5: One Change at a Time
- Complete ONE extraction fully before starting the next
- Merge and tag before starting the next version
- Do NOT batch multiple extractions

### Rule 6: Relative Paths Only
- **ALL paths must be relative** - never use absolute paths.
- Correct: `optimization-tools/resume-analyzer/entry-router.md`
- Review all file references before committing

### Rule 7: Maintenance Headers & Synchronized Updates
Starting in v8.1, all core files must include a `<system_maintenance_rule>` header:
- **PROJECT-INSTRUCTIONS.md:** Must state it is the "Gold Master". Use `<!-- MODULAR_SYNC: [path] -->` comments for inline sections to prevent contextual dissonance while ensuring AI agents sync the module FIRST before syncing the baseline.
- **Project-GUI-Instructions.md:** Must state it is an "Optimized Entry Point". Use `<modular_reference file="path" />` active tags to direct the LLM to the authoritative logic.


---

## Branch-to-Issue Mapping

| Version | Branch | Issue | Description | Depends On |
|---------|--------|-------|-------------|------------|
| **v8.0.0** | `v8.0-directory-functional-restructure` | #27 | Directory restructure â†’ optimization-tools/ | None (foundation) |
| v8.1.0 | `v8.1-extract-resume-analyzer-display` | #28 | Extract resume-analyzer-display.md | v8.0 |
| v8.1.1 | `v8.1.1-refine-module-naming` | #33 | Refine naming (jd-parsing, job-history-creation) | v8.1 |
| v8.2.0 | `v8.2-extract-job-fit-assessment` | #29 | Extract job-fit-assessment.md | v8.0 |
| v8.3.0 | `v8.3-extract-quality-gates` | #30 | Extract quality-gates-guardrails.md | v8.0 |
| v8.4.0 | `v8.4-extract-template-system` | #31 | Extract job-history-template-system.md | v8.0 |
| **v8.5.0** | `v8.5-final-integration` | #32 | Final headers, module index, validation | v8.1-8.4 |

**Note:** v8.1-8.4 can theoretically run in parallel after v8.0, but v8.5 must be last.

---

## v8.0.0 - Directory Functional Restructure (Issue #27)

**Branch:** `v8.0-directory-functional-restructure`  
**Priority:** CRITICAL - Foundation for all other work

### Step 1: Create Branch and Link to Issue
```bash
# Create branch
git checkout -b v8.0-directory-functional-restructure

# Link to issue in first commit message
git commit --allow-empty -m "chore: start v8.0 directory restructure

Linked to #27"
```

**This links the branch to Issue #27 so all commits show in the issue.**

### Step 2: Directory Changes:
```
OLD:                          NEW:
optimization-tools/                   â†’   optimization-tools/
â”œâ”€â”€ phase-1/              â†’   â”œâ”€â”€ resume-analyzer/
â”‚   â”œâ”€â”€ entry-router.md       â”‚   â”œâ”€â”€ entry-router.md
â”‚   â”œâ”€â”€ jd-parsing.md         â”‚   â”œâ”€â”€ jd-parsing.md
â”‚   â””â”€â”€ job-history-creation.mdâ”‚   â””â”€â”€ job-history-creation.md
â”œâ”€â”€ phase-2/              â†’   â”œâ”€â”€ bullet-optimizer/
â”‚   â””â”€â”€ evidence-matching.md  â”‚   â””â”€â”€ evidence-matching.md
â”œâ”€â”€ phase-3/              â†’   â”œâ”€â”€ job-fit-analyzer/
â”‚   â”œâ”€â”€ incremental-updates.mdâ”‚   â”œâ”€â”€ incremental-updates.md
â”‚   â”œâ”€â”€ re-comparison.md      â”‚   â”œâ”€â”€ re-comparison.md
â”‚   â””â”€â”€ workflow-router.md    â”‚   â””â”€â”€ workflow-router.md
â””â”€â”€ phase-4/              â†’   â””â”€â”€ narrative-generator/
    â””â”€â”€ summary-generation.md     â””â”€â”€ summary-generation.md
```

### Functional Naming Rationale:
1. **`resume-analyzer/`** - Analyzes resumes, creates job history
2. **`bullet-optimizer/`** - Optimizes bullets, evidence matching
3. **`job-fit-analyzer/`** - JD comparison, fit scoring
4. **`narrative-generator/`** - Summaries, cover letters

### Files to Update (50+):
- `PROJECT-INSTRUCTIONS.md` (all `optimization-tools/` references)
- `Project-GUI-Instructions.md`
- `README.md`, `ROADMAP.md`, `docs/CHANGELOG.md`
- `docs/lessons-learned/` (multiple files)
- All files within `optimization-tools/` (internal cross-references)

---

## v8.1.0 - Resume Analyzer Display Module (Issue #28)

**Branch:** `v8.1-extract-resume-analyzer-display`  
**New File:** `resume-analyzer-display.md` (~12K tokens)

### Step 1: Create Branch and Link to Issue
```bash
git checkout main && git pull
git checkout -b v8.1-extract-resume-analyzer-display
git commit --allow-empty -m "chore: start v8.1 resume-analyzer-display extraction

Linked to #28"
git push origin v8.1-extract-resume-analyzer-display
gh pr create --title "v8.1 Extract Resume Analyzer Display" --body "Extract resume analyzer display rules to a new module. Closes #28." --head v8.1-extract-resume-analyzer-display --base main
```

### Step 2: Content to Extract:
- `<bullet_color_coding_rules>`
- `<bullet_metrics_detection_rules>`
- `<bullet_display_and_grouping_rules>`
- `<hiring_manager_perspective_rules>`
- `<job_history_summary_generation_rules>`
- `<job_history_export_functionality>`
- `<per_bullet_audit_rules>`
- `<prioritized_repairs_summary_rules>`

### Step 3: Shadow Modularization (Verification):
1. **Gold Master:** Add "Silent Sync" breadcrumbs to `PROJECT-INSTRUCTIONS.md`.
2. **Optimized GUI:** Replace extracted blocks in `Project-GUI-Instructions.md` with `<modular_reference file="optimization-tools/resume-analyzer/resume-analyzer-display.md" />`.

---

## v8.1.1 - Naming Refinement (Issue #33)

**Branch:** `v8.1.1-refine-module-naming`  
**Description:** Cleanup legacy terminology and simplify file names.

### Step 1: Create Branch and Link to Issue
```bash
git checkout main && git pull
git checkout -b v8.1.1-refine-module-naming
git commit --allow-empty -m "chore: start v8.1.1 naming refinement

Linked to #33"
git push origin v8.1.1-refine-module-naming
gh pr create --title "v8.1.1 Refine Module Naming" --body "Simplify file names and terminology. Closes #33." --head v8.1.1-refine-module-naming --base main
```

### Step 2: File Renames:
- `optimization-tools/resume-analyzer/jd-parsing.md` (simplified from `jd-parsing-17-point.md`)
- `optimization-tools/resume-analyzer/job-history-creation.md` (simplified from `job-history-v2-creation.md`)

### Step 3: Global Terminology Replacement:
- Replace "17-point" with "parsing" or "analysis" (context-dependent) across ALL files.
- Replace "v2.0" or "v2" with "job history creation" across ALL files.
- Update all 50+ relative path references.

---

## v8.2.0 - Job Fit Assessment Module (Issue #29)

**Branch:** `v8.2-extract-job-fit-assessment`  
**New File:** `job-fit-assessment.md` (~8K tokens)

### Step 1: Create Branch and Link to Issue
```bash
git checkout main && git pull
git checkout -b v8.2-extract-job-fit-assessment
git commit --allow-empty -m "chore: start v8.2 job-fit-assessment extraction

Linked to #29"
git push origin v8.2-extract-job-fit-assessment
gh pr create --title "v8.2 Extract Job Fit Assessment" --body "Extract job fit assessment logic to a new module. Closes #29." --head v8.2-extract-job-fit-assessment --base main
```

### Step 2: Content to Extract:
- `<job_fit_pre_generation_assessment>`
- `<portfolio_project_weighting>`
- `<role_type_experience_validation>`
- `<adjacent_technical_definition>`
- `<industry_context_validation>`
- `<keyword_context_validation>`

### Step 3: Shadow Modularization (Verification):
1. **Gold Master:** Add "Silent Sync" breadcrumbs to `PROJECT-INSTRUCTIONS.md`.
2. **Optimized GUI:** Replace extracted blocks in `Project-GUI-Instructions.md` with `<modular_reference file="optimization-tools/resume-analyzer/job-fit-assessment.md" />`.

---

## v8.3.0 - Quality Gates Module (Issue #30)

**Branch:** `v8.3-extract-quality-gates`  
**New File:** `quality-gates-guardrails.md` (~10K tokens)

### Step 1: Create Branch and Link to Issue
```bash
git checkout main && git pull
git checkout -b v8.3-extract-quality-gates
git commit --allow-empty -m "chore: start v8.3 quality-gates extraction

Linked to #30"
git push origin v8.3-extract-quality-gates
gh pr create --title "v8.3 Extract Quality Gates" --body "Extract quality gates and guardrails to a new module. Closes #30." --head v8.3-extract-quality-gates --base main
```

### Step 2: Content to Extract:
- All 28 system guardrails
- `<quality_assurance_rules>`
- `<automatic_quality_gate>`
- Error detection patterns

### Step 3: Shadow Modularization (Verification):
1. **Gold Master:** Add "Silent Sync" breadcrumbs to `PROJECT-INSTRUCTIONS.md`.
2. **Optimized GUI:** Replace extracted blocks in `Project-GUI-Instructions.md` with `<modular_reference file="optimization-tools/resume-analyzer/quality-gates-guardrails.md" />`.

---

## v8.4.0 - Template System Module (Issue #31)

**Branch:** `v8.4-extract-template-system`  
**New File:** `job-history-template-system.md` (~8K tokens)

### Step 1: Create Branch and Link to Issue
```bash
git checkout main && git pull
git checkout -b v8.4-extract-template-system
git commit --allow-empty -m "chore: start v8.4 template-system extraction

Linked to #31"
git push origin v8.4-extract-template-system
gh pr create --title "v8.4 Extract Template System" --body "Extract job history template system to a new module. Closes #31." --head v8.4-extract-template-system --base main
```

### Step 2: Content to Extract:
- `<job_history_template_system>` (entire section, ~385 lines)
- Template system overview
- Validation/conversion workflows
- `/md-job-history` and `/update-history` skills

### Step 3: Shadow Modularization (Verification):
1. **Gold Master:** Add "Silent Sync" breadcrumbs to `PROJECT-INSTRUCTIONS.md`.
2. **Optimized GUI:** Replace extracted blocks in `Project-GUI-Instructions.md` with `<modular_reference file="optimization-tools/resume-analyzer/job-history-template-system.md" />`.

---

## v8.5.0 - Final Integration (Issue #32)

**Branch:** `v8.5-final-integration`  
**Depends On:** All v8.1-8.4 complete

### Step 1: Create Branch and Link to Issue
```bash
git checkout main && git pull
git checkout -b v8.5-final-integration
git commit --allow-empty -m "chore: start v8.5 final integration

Linked to #32"
git push origin v8.5-final-integration
gh pr create --title "v8.5 Final Integration" --body "Final modular integration, header updates, and GUI cleanup. Closes #32." --head v8.5-final-integration --base main
```

### Step 2: Tasks:
- Update core file header
- Add deployment model guide (3 models)
- Add module index
- Verify all 4 modules working
- Final token count validation (~47K core)
- Update CHANGELOG, ROADMAP, README

### Step 3: GUI Entry Point Finalization
1. **Consolidate** remaining GUI unique instructions into `gui-artifact-config.md`.
2. **Analyze** `Project-GUI-Instructions.md` to ensure ALL redundant content is now replaced by modular references.
3. **Keep File:** `Project-GUI-Instructions.md` remains as the "Optimized Modular Entrypoint" for all system-led interactions (token efficient).
4. **Final Token Check:** Verify GUI entry point is now <10% of its original size.

**Note:** We NO LONGER delete this file. It serves as the optimized alternative to the Gold Master.

---

## Claude Projects Upload (Deployment Model 3)

After v8.5, users upload 5 files (or 6 for GUI):
1. `PROJECT-INSTRUCTIONS.md` (core, ~47K tokens)
2. `resume-analyzer-display.md` (~12K tokens)
3. `job-fit-assessment.md` (~8K tokens)
4. `quality-gates-guardrails.md` (~10K tokens)
5. `job-history-template-system.md` (~8K tokens)
6. `gui-artifact-config.md` (~1K tokens) - *optional, for GUI/React use*

**Token Savings:** 30-45% per session through selective loading.

---

## Timeline

| Version | Time | Session |
|---------|------|---------|
| v8.0.0 | 1-1.5 hours | Session 1 |
| v8.1.0 | 1.5 hours | Session 2 |
| v8.1.1 | 0.5 hours | Session 2 |
| v8.2.0 | 1 hour | Session 2 |
| v8.3.0 | 1 hour | Session 3 |
| v8.4.0 | 1 hour | Session 3 |
| v8.5.0 | 1.5 hours | Session 4 |

**Total:** 8-9 hours across 4 sessions

---

## Success Criteria

- âœ… Core file: 85K â†’ 47K tokens (45% reduction)
- âœ… Functional directory names (clear purpose)
- âœ… 7 clean, independent releases (including v8.1.1)
- âœ… All tools work independently
- âœ… 30-45% token savings per session
- âœ… Shadow Modularization implemented (Risk Mitigated)

---

**Created:** 2026-01-12  
**Version:** 8.2 (Modularized Job Fit Assessment)
**Status:** ðŸ”µ EXECUTION - Phase v8.2.0 complete, proceeding to v8.3.0
