# Implementation Plan - v8.4.1: Version Synchronization and Backlog Management

**Date:** 2026-01-13
**Type:** Maintenance + Backlog Management
**Status:** Planning

---

## Overview

Fix version drift in instruction files (7.1.1 → 8.4.0), defer Multi-JD Context Management to backlog, and document version synchronization protocol in knowledge graph.

---

## Problem Statement

**Version Drift:**
- PROJECT-INSTRUCTIONS.md and Project-GUI-Instructions.md both stuck at v7.1.1
- Project has progressed to v8.4.0
- Gemini AI was applying logic changes but not updating version headers
- No documented protocol for version synchronization

**Multi-JD Scope Creep:**
- v8.5.0 plan included JD history storage not needed for core use case
- Feature should be deferred to backlog for future consideration

---

## Proposed Changes

### 1. Version Header Synchronization

#### Files to Update
- `PROJECT-INSTRUCTIONS.md` (lines 1, 6, 7)
- `Project-GUI-Instructions.md` (lines 1, 6, 7)

#### Changes
```markdown
Line 1:  # Optimize-My-Resume System v8.4.0
Line 6:  <!-- Version: 8.4.0 (January 13, 2026) -->
Line 7:  <!-- Last Updated: January 13, 2026 -->
```

### 2. Backlog Management

#### Directory Structure
```
docs/plans/backlog/
└── multi-jd-context-management.md
```

#### ROADMAP.md Updates
- Remove: "In Development" line for v8.5.0
- Add: Backlog section with Multi-JD entry

#### GitHub Issue
- Create issue #45 for Multi-JD Context Management
- Label: backlog, enhancement, architecture
- Focus: Trend analysis across multiple job postings

### 3. Knowledge Graph Updates

#### A. ADR-004 Enhancement
**File:** `docs/decisions/ADR-004-shadow-modularization.md`
**Location:** After "Implementation Notes" (line 83)

**Add section:**
```markdown
## Version Management Protocol

**Scope:** Version headers in PROJECT-INSTRUCTIONS.md and Project-GUI-Instructions.md

**Problem:** Shadow Modularization handles logic sync but not version sync. Led to drift (7.1.1 → 8.4.0).

**Solution:**

### Version Header Locations
Both files have three version lines:
- Line 1: `# Optimize-My-Resume System vX.X.X`
- Line 6: `<!-- Version: X.X.X (Date) -->`
- Line 7: `<!-- Last Updated: Date -->`

### Synchronization Rule
When releasing:
1. Update ROADMAP.md
2. Update CHANGELOG.md
3. **Update version headers in BOTH instruction files**
4. Keep versions synchronized

### When to Update
- Completing versioned releases (v8.x.x)
- Merging feature branches to main
- NOT for hotfixes or docs-only changes

**Created:** 2026-01-13
**Related:** v8.4.1 version synchronization fix
```

#### B. Lessons Learned Enhancement
**File:** `docs/lessons-learned/architecture/Lessons_Learned_Shadow_Modularization_Strategy.md`
**Location:** After "Lessons for Future Features" (line 118)

**Add section:**
```markdown

### **Lesson 2: Version Header Synchronization**
**Pattern:** Version headers in PROJECT-INSTRUCTIONS.md and Project-GUI-Instructions.md must be updated together.

**Problem Discovered (v8.4.1):**
- Both files remained at v7.1.1 while project reached v8.4.0
- Gemini AI updated logic but not version headers
- No documented protocol

**Solution Applied:**
- Added version sync rule to ADR-004
- Enhanced <system_maintenance_rule> blocks
- Created release checklist

**Application:** Update version headers in both files during release process.

**Result:** Version headers now explicit part of maintenance protocol.
```

#### C. System Maintenance Rules
**Files:** `PROJECT-INSTRUCTIONS.md` and `Project-GUI-Instructions.md`

**PROJECT-INSTRUCTIONS.md (lines 11-17):**
```xml
<system_maintenance_rule>
  CRITICAL: This is the "Gold Master" logic baseline.

  When updating logic, check for <modular_reference> tags within the file.
  1. If a reference exists, apply the update to the external module file FIRST.
  2. Sync this file's text to match the module exactly to maintain the immutable baseline.
  3. Ensure Project-GUI-Instructions.md reflects these changes (usually automatic via reference).

  When releasing a version:
  4. Update version headers in BOTH instruction files (lines 1, 6, 7) to match ROADMAP.md.
  5. Keep version numbers synchronized between this file and Project-GUI-Instructions.md.
</system_maintenance_rule>
```

**Project-GUI-Instructions.md (lines 11-16):**
```xml
<system_maintenance_rule>
  NOTE: This is an OPTIMIZED modular entry point.
  Core logic lives in external modules and PROJECT-INSTRUCTIONS.md (Gold Master).

  1. DO NOT update logic here directly if it exists in a referenced module or the Gold Master.
  2. The purpose of this file is token efficiency; use PROJECT-INSTRUCTIONS.md for the complete baseline logic.

  When releasing a version:
  3. Update version headers (lines 1, 6, 7) to match PROJECT-INSTRUCTIONS.md and ROADMAP.md.
  4. Keep version numbers synchronized across both instruction files.
</system_maintenance_rule>
```

---

## Implementation Steps

1. Create feature branch: `v8.4.1-version-sync-and-backlog`
2. Update version headers in both instruction files
3. Create `docs/plans/backlog/` directory
4. Move Multi-JD plan to backlog
5. Update ROADMAP.md (remove "In Development", add Backlog section)
6. Create GitHub issue #45
7. Update ADR-004 with version management protocol
8. Update Lessons Learned with version sync pattern
9. Update <system_maintenance_rule> blocks in both instruction files
10. Stage all changes
11. Commit with detailed message
12. Push to origin
13. Merge to main
14. Preserve v8.4.1 branch (ADR-006)

---

## Commit Message

```
refactor(v8.4.1): synchronize instruction versions and defer multi-jd to backlog

Version Synchronization:
- Updated PROJECT-INSTRUCTIONS.md: v7.1.1 → v8.4.0
- Updated Project-GUI-Instructions.md: v7.1.1 → v8.4.0
- Fixed 7-version drift caused by Gemini applying changes without updating headers

Backlog Management:
- Moved Multi-JD Context Management plan to docs/plans/backlog/
- Updated ROADMAP.md: removed "In Development" status, added Backlog section
- Created GitHub issue #45 for Multi-JD trend analysis tracking

Knowledge Graph Updates:
- Updated ADR-004 with version management protocol
- Updated Lessons Learned with version synchronization pattern
- Enhanced <system_maintenance_rule> blocks in both instruction files

Closes #45

Co-Authored-By: Claude Haiku 4.5 <noreply@anthropic.com>
```

---

## Verification Plan

### Pre-Commit Checklist
- [ ] Both instruction files show v8.4.0 in headers (lines 1, 6, 7)
- [ ] `docs/plans/backlog/` directory exists
- [ ] `multi-jd-context-management.md` moved to backlog
- [ ] ROADMAP.md no longer shows v8.5.0 "In Development"
- [ ] ROADMAP.md has Backlog section
- [ ] GitHub issue #45 created
- [ ] ADR-004 has "Version Management Protocol" section
- [ ] Lessons Learned has "Lesson 2: Version Header Synchronization"
- [ ] Both <system_maintenance_rule> blocks updated
- [ ] All changes staged on v8.4.1 branch

### Post-Merge Verification
- [ ] Changes visible on origin/main
- [ ] v8.4.1 branch preserved (not deleted)
- [ ] Issue #45 closed via commit reference

---

## Notes

**Why Both Files Need Version Headers:**
- PROJECT-INSTRUCTIONS.md: Used in LLM chatbot (users see this)
- Project-GUI-Instructions.md: Used in Claude Artifact/local dev (users see this)
- Both are independent deployments, so both need accurate version info

**Rationale for Version Sync Protocol:**
- Prevents confusion ("Why does chatbot say v8.4 but artifact says v7.1?")
- Makes version management explicit in maintenance workflow
- Low overhead (3 lines per file per release)
- No automation needed - manual is sufficient given release frequency

---

**Created:** 2026-01-13
**Version:** 1.0
