# v6.1.9 Gap Analysis Test Cases - Patch Plan

**Version:** 6.1.9
**Branch:** `v6.1.9-gap-analysis_test-cases`
**Type:** Improvement/Enhancement
**Date:** 2025-12-30
**Status:** Ready for Implementation

---

## Summary

Consolidate and expand test case coverage for Phases 2-4 by merging Sonnet's baseline tests with Opus expansions, corrections, and gap-filling tests.

---

## Problem Statement

The existing test suite had gaps in Phase 2-4 coverage:
1. Sonnet's 32 baseline tests covered happy paths but missed edge cases
2. Logic errors existed in some test definitions (e.g., INC-004 index direction)
3. Boundary conditions were not tested (score = 30, confidence = 0.5)
4. Error recovery and blocking gate combinations were untested

---

## Changes

### Files Created

| File | Location | Description |
|------|----------|-------------|
| `v6.1.9-consolidated-test-cases.md` | `docs/plans/v6.1.5-testing/` | 79 merged test cases (Sonnet + Opus) |
| `v6.1.5-opus-expanded-test-cases.md` | `docs/plans/v6.1.5-testing/` | 47 Opus expansion tests with FIX series |

### Files Modified

| File | Change |
|------|--------|
| `v6.1.5-test-results.md` | Add execution results for new tests |

### Test Case Additions

| Category | Count | Author | Focus |
|----------|-------|--------|-------|
| INT | 8 | Sonnet | Phase 2 Integration |
| INC | 10 | Sonnet | Incremental Updates |
| DIFF | 7 | Sonnet | Re-Comparison |
| SUM | 7 | Sonnet | Summary Generation |
| INTX | 8 | Opus | Extended Integration |
| INCX | 10 | Opus | Extended Incremental |
| DIFFX | 7 | Opus | Extended Diff |
| SUMX | 8 | Opus | Extended Summary |
| GATE | 7 | Opus | Blocking Gate Combinations |
| ERR | 7 | Opus | Error Recovery |
| FIX | 12 | Opus | Logic Corrections & Gaps |
| **Total** | **79** | | |

---

## Sonnet Logic Corrections Applied

| Original Test | Issue | Correction |
|---------------|-------|------------|
| INC-004 | Said indices "shifted up" | Corrected to "shifted DOWN" |
| SUM-005 | Used score 42 as threshold | Corrected to use gate threshold (<30) |
| INT-007 | No weight ratios specified | Added: Required = 1.5x Preferred |
| INT-006 | Confidence "> 0.5" ambiguous | Clarified: ">= 0.5" (inclusive) |

---

## Implementation Checklist

- [x] Review Sonnet's test cases for logic issues
- [x] Create Opus expanded test cases (INTX, INCX, DIFFX, SUMX, GATE, ERR)
- [x] Create FIX series for logic corrections and gaps
- [x] Merge all tests into consolidated file
- [x] Create patch plan document
- [ ] Create git branch
- [ ] Execute P0/P1 priority tests
- [ ] Update test results file
- [ ] Commit and push

---

## Test Execution Priority

| Priority | Tests | Rationale |
|----------|-------|-----------|
| P0 (Critical) | GATE-*, ERR-001 to ERR-003, FIX-004 to FIX-010 | Blocking gates, data integrity |
| P1 (High) | INT-*, INTX-001 to INTX-004, DIFF-001, DIFFX-001 | Core workflow |
| P2 (Medium) | INC-*, INCX-*, SUM-*, SUMX-* | Feature completeness |
| P3 (Low) | Remaining | Edge cases |

---

## Success Criteria

- [ ] All 79 test cases documented in consolidated file
- [ ] Logic corrections applied to Sonnet baseline
- [ ] P0 and P1 tests executed with results recorded
- [ ] No blocking issues identified

---

## Related Files

- `docs/plans/v6.1.5-testing/v6.1.9-consolidated-test-cases.md`
- `docs/plans/v6.1.5-testing/v6.1.5-opus-expanded-test-cases.md`
- `docs/plans/v6.1.5-testing/v6.1.5-sonnet-test-cases.md`
- `docs/plans/v6.1.5-testing/v6.1.5-test-results.md`
