# v8.0 Going Modular - Implementation Plan

**Version Strategy:** v8.0 (directory restructure, cascade foundation) â†’ v8.1-8.5 (modular features)  
**Created:** 2026-01-12  
**Status:** ðŸ”´ PLANNING - Awaiting User Approval  
**Related Issues:** #27 (v8.0), #28 (v8.1), #29 (v8.2), #30 (v8.3), #31 (v8.4), #32 (v8.5)

---

## Executive Summary

Breaking apart the monolithic `PROJECT-INSTRUCTIONS.md` file (85,000 tokens) into a modular architecture:
- **v8.0**: Directory restructure (CASCADE FOUNDATION - all other changes depend on this)
- **v8.1-8.4**: Module extractions (can be done in parallel after v8.0)
- **v8.5**: Final integration
- Core file: ~47,000 tokens (45% reduction)
- 4 on-demand modules loaded only when needed

### Three Deployment Models
1. **Single Prompt (Multi-LLM)** - Complete file for any LLM, no GUI except markdown
2. **Modular Local React** - Development environment with selective loading
3. **Modular Claude Projects** - 5 files uploaded, 30-45% token savings per session

---

## Why v8.0 = Directory Restructure

**Cascade Logic:**
- ALL module extractions (#28-31) reference paths like `optimization-tools/resume-analyzer/`
- If modules extracted FIRST, then directories restructured â†’ would need to update all module paths AGAIN
- **Directory restructure MUST happen before any module work**

This is the foundation everything else builds on.

---

## âš ï¸ CRITICAL: Validation Rules for AI Implementation

> [!CAUTION]
> **These rules MUST be followed during implementation to prevent errors.**

### Rule 1: Exact Text Match Required
When extracting content from one file to another:
- **COPY the exact text** - do NOT paraphrase, summarize, or "improve" it
- **Show user the extracted text** before creating the new file
- **User must confirm** the extracted text matches the source exactly
- **NO assumptions** about what should be extracted - ask if unclear

### Rule 2: User Confirmation Checkpoints
Before proceeding at each stage, STOP and get user approval:
- [ ] Before creating any branch
- [ ] Before renaming any directory or file
- [ ] Before extracting any content block
- [ ] Before adding any reference block
- [ ] Before merging to main

### Rule 3: No Assumptions
- If the plan says "extract `<section_name>`" but the exact boundaries are unclear â†’ **ASK**
- If a file reference seems wrong â†’ **ASK**
- If you're unsure about any change â†’ **ASK**
- Do NOT infer or guess what should be included

### Rule 4: Validation Before Moving On
After each extraction:
1. Show the user the exact content that was moved
2. Show the user the reference block that was added
3. User confirms both match expectations
4. Only then proceed to next step

### Rule 5: One Change at a Time
- Complete ONE extraction fully before starting the next
- Merge and tag before starting the next version
- Do NOT batch multiple extractions

### Rule 6: Relative Paths Only
- **ALL paths must be relative** - never use absolute paths (e.g., `/Users/...`)
- Correct: `optimization-tools/resume-analyzer/entry-router.md`
- Wrong: `/Users/mkaplan/Documents/GitHub/optimize-my-resume/optimization-tools/...`
- Review all file references before committing

---

## Branch-to-Issue Mapping

| Version | Branch | Issue | Description | Depends On |
|---------|--------|-------|-------------|------------|
| **v8.0.0** | `v8.0-directory-functional-restructure` | #27 | Directory restructure â†’ optimization-tools/ | None (foundation) |
| v8.1.0 | `v8.1-extract-resume-analyzer-display` | #28 | Extract resume-analyzer-display.md | v8.0 |
| v8.2.0 | `v8.2-extract-job-fit-assessment` | #29 | Extract job-fit-assessment.md | v8.0 |
| v8.3.0 | `v8.3-extract-quality-gates` | #30 | Extract quality-gates-guardrails.md | v8.0 |
| v8.4.0 | `v8.4-extract-template-system` | #31 | Extract job-history-template-system.md | v8.0 |
| **v8.5.0** | `v8.5-final-integration` | #32 | Final headers, module index, validation | v8.1-8.4 |

**Note:** v8.1-8.4 can theoretically run in parallel after v8.0, but v8.5 must be last.

---

## v8.0.0 - Directory Functional Restructure (Issue #27)

**Branch:** `v8.0-directory-functional-restructure`  
**Priority:** CRITICAL - Foundation for all other work

### Step 1: Create Branch and Link to Issue
```bash
# Create branch
git checkout -b v8.0-directory-functional-restructure

# Link to issue in first commit message
git commit --allow-empty -m "chore: start v8.0 directory restructure

Linked to #27"
```

**This links the branch to Issue #27 so all commits show in the issue.**

### Step 2: Directory Changes:
```
OLD:                          NEW:
optimization-tools/                   â†’   optimization-tools/
â”œâ”€â”€ phase-1/              â†’   â”œâ”€â”€ resume-analyzer/
â”‚   â”œâ”€â”€ entry-router.md       â”‚   â”œâ”€â”€ entry-router.md
â”‚   â”œâ”€â”€ jd-parsing-17-point.mdâ”‚   â”œâ”€â”€ jd-parsing-17-point.md
â”‚   â””â”€â”€ job-history-v2...md  â”‚   â””â”€â”€ job-history-v2-creation.md
â”œâ”€â”€ phase-2/              â†’   â”œâ”€â”€ bullet-optimizer/
â”‚   â””â”€â”€ evidence-matching.md  â”‚   â””â”€â”€ evidence-matching.md
â”œâ”€â”€ phase-3/              â†’   â”œâ”€â”€ job-fit-analyzer/
â”‚   â”œâ”€â”€ incremental-updates.mdâ”‚   â”œâ”€â”€ incremental-updates.md
â”‚   â”œâ”€â”€ re-comparison.md      â”‚   â”œâ”€â”€ re-comparison.md
â”‚   â””â”€â”€ workflow-router.md    â”‚   â””â”€â”€ workflow-router.md
â””â”€â”€ phase-4/              â†’   â””â”€â”€ narrative-generator/
    â””â”€â”€ summary-generation.md     â””â”€â”€ summary-generation.md
```

### Functional Naming Rationale:
1. **`resume-analyzer/`** - Analyzes resumes, creates job history
2. **`bullet-optimizer/`** - Optimizes bullets, evidence matching
3. **`job-fit-analyzer/`** - JD comparison, fit scoring
4. **`narrative-generator/`** - Summaries, cover letters

### Files to Update (50+):
- `PROJECT-INSTRUCTIONS.md` (all `optimization-tools/` references)
- `Project-GUI-Instructions.md`
- `README.md`, `ROADMAP.md`, `docs/CHANGELOG.md`
- `docs/lessons-learned/` (multiple files)
- All files within `optimization-tools/` (internal cross-references)

---

## v8.1.0 - Resume Analyzer Display Module (Issue #28)

**Branch:** `v8.1-extract-resume-analyzer-display`  
**New File:** `resume-analyzer-display.md` (~12K tokens)

### Step 1: Create Branch and Link to Issue
```bash
git checkout main && git pull
git checkout -b v8.1-extract-resume-analyzer-display
git commit --allow-empty -m "chore: start v8.1 resume-analyzer-display extraction

Linked to #28"
```

### Step 2: Content to Extract:
- `<bullet_color_coding_rules>`
- `<bullet_metrics_detection_rules>`
- `<bullet_display_and_grouping_rules>`
- `<hiring_manager_perspective_rules>`
- `<job_history_summary_generation_rules>`
- `<job_history_export_functionality>`
- `<per_bullet_audit_rules>`
- `<prioritized_repairs_summary_rules>`

---

## v8.2.0 - Job Fit Assessment Module (Issue #29)

**Branch:** `v8.2-extract-job-fit-assessment`  
**New File:** `job-fit-assessment.md` (~8K tokens)

### Step 1: Create Branch and Link to Issue
```bash
git checkout main && git pull
git checkout -b v8.2-extract-job-fit-assessment
git commit --allow-empty -m "chore: start v8.2 job-fit-assessment extraction

Linked to #29"
```

### Step 2: Content to Extract:
- `<job_fit_pre_generation_assessment>`
- `<portfolio_project_weighting>`
- `<role_type_experience_validation>`
- `<adjacent_technical_definition>`
- `<industry_context_validation>`
- `<keyword_context_validation>`

---

## v8.3.0 - Quality Gates Module (Issue #30)

**Branch:** `v8.3-extract-quality-gates`  
**New File:** `quality-gates-guardrails.md` (~10K tokens)

### Step 1: Create Branch and Link to Issue
```bash
git checkout main && git pull
git checkout -b v8.3-extract-quality-gates
git commit --allow-empty -m "chore: start v8.3 quality-gates extraction

Linked to #30"
```

### Step 2: Content to Extract:
- All 28 system guardrails
- `<quality_assurance_rules>`
- `<automatic_quality_gate>`
- Error detection patterns

---

## v8.4.0 - Template System Module (Issue #31)

**Branch:** `v8.4-extract-template-system`  
**New File:** `job-history-template-system.md` (~8K tokens)

### Step 1: Create Branch and Link to Issue
```bash
git checkout main && git pull
git checkout -b v8.4-extract-template-system
git commit --allow-empty -m "chore: start v8.4 template-system extraction

Linked to #31"
```

### Step 2: Content to Extract:
- `<job_history_template_system>` (entire section, ~385 lines)
- Template system overview
- Validation/conversion workflows
- `/md-job-history` and `/update-history` skills

---

## v8.5.0 - Final Integration (Issue #32)

**Branch:** `v8.5-final-integration`  
**Depends On:** All v8.1-8.4 complete

### Step 1: Create Branch and Link to Issue
```bash
git checkout main && git pull
git checkout -b v8.5-final-integration
git commit --allow-empty -m "chore: start v8.5 final integration

Linked to #32"
```

### Step 2: Tasks:
- Update core file header
- Add deployment model guide (3 models)
- Add module index
- Verify all 4 modules working
- Final token count validation (~47K core)
- Update CHANGELOG, ROADMAP, README

### Step 3: GUI Artifact Module & Cleanup
1. **Extract and Consolidate** GUI/Artifact instructions â†’ new `gui-artifact-config.md` (~300-400 lines)
   - **Source 1:** `Project-GUI-Instructions.md` (unique `<artifact_configuration>` block)
   - **Source 2:** `docs/plans/v8.0-going-modular/artifact-creation-instructions.md` (detailed React/API implementation logic)
   - **Storage:** `docs/artifact/`
   - **Content:** Model selection rules, token info, UI rules, React component architecture, error handling.
2. **Verify** main file + consolidated gui module covers all GUI functionality
3. **Delete** `Project-GUI-Instructions.md` (duplicate file)
4. **Update** any references pointing to deleted file

**Why delete:** Analysis showed only ~193 lines are unique. Rest is duplicate of main file that's hard to keep in sync.

---

## Claude Projects Upload (Deployment Model 3)

After v8.5, users upload 5 files (or 6 for GUI):
1. `PROJECT-INSTRUCTIONS.md` (core, ~47K tokens)
2. `resume-analyzer-display.md` (~12K tokens)
3. `job-fit-assessment.md` (~8K tokens)
4. `quality-gates-guardrails.md` (~10K tokens)
5. `job-history-template-system.md` (~8K tokens)
6. `gui-artifact-config.md` (~1K tokens) - *optional, for GUI/React use*

**Token Savings:** 30-45% per session through selective loading.

---

## Timeline

| Version | Time | Session |
|---------|------|---------|
| v8.0.0 | 1-1.5 hours | Session 1 |
| v8.1.0 | 1.5 hours | Session 2 |
| v8.2.0 | 1 hour | Session 2 |
| v8.3.0 | 1 hour | Session 3 |
| v8.4.0 | 1 hour | Session 3 |
| v8.5.0 | 1.5 hours | Session 4 |

**Total:** 8-9 hours across 4 sessions

---

## Success Criteria

- âœ… Core file: 85K â†’ 47K tokens (45% reduction)
- âœ… Functional directory names (clear purpose)
- âœ… 6 clean, independent releases
- âœ… All tools work independently
- âœ… 30-45% token savings per session
- âœ… `Project-GUI-Instructions.md` deleted (no more duplicate maintenance)

---

**Created:** 2026-01-12  
**Version:** 5.0 (Added GUI module extraction + file deletion in v8.5)  
**Status:** Awaiting User Approval
