# Implementation Plan: v9.3.5.6-enh-009-guardrail-registry

**STATUS:** üü° PLANNING (Updated with Housekeeping Tasks)
**GOVERNANCE:** Atomic Approval Required
**SCOPE:** Hardening / Governance (Centralized Guardrail Registry + Production File Cleanup)
**REVIEWED BY:** Claude Opus 4.5 (2026-01-29)

## Objective
Initialize sections and synchronize a master registry (`docs/governance/guardrail-registry.md`) for all system guardrails to resolve ID inconsistencies (Numeric vs G-prefix vs Legacy) and fragmentation across files.

---

## Task Summary

| # | Task | File | Priority | Status |
|---|------|------|----------|--------|
| 1 | Initialize Registry | `docs/governance/guardrail-registry.md` | HIGH | ‚úÖ |
| 2 | Audit & Map | Multiple | HIGH | ‚úÖ |
| 3 | Gold Master Sync | `PROJECT-INSTRUCTIONS.md` | HIGH | ‚úÖ |
| 4 | Agent Governance Sync | `agent-governance.md` | MED | ‚úÖ |
| **CLEANUP** | ‚Äî | ‚Äî | ‚Äî | ‚Äî |
| 5 | Fix Validator Checkboxes | `bo_output-validator.md:56-58` | HIGH | ‚úÖ |
| 6 | Add Missing Section 12 | `bo_output-validator.md:67` | HIGH | ‚úÖ |
| 7 | Update Version History | `bo_bullet-generation-instructions.md` | MED | ‚úÖ |
| 8 | Clean Diff Artifacts | `patterns.md:220-238` | MED | ‚úÖ |
| **STANDARDIZATION** | ‚Äî | ‚Äî | ‚Äî | ‚Äî |
| 9 | Bulk Update SSoT IDs | `ra_quality-gates-guardrails.md` (37 IDs) | HIGH | ‚úÖ |
| 10 | Update Narrative References | Production files (40+ refs) | HIGH | ‚úÖ |
| 11 | Document in CHANGELOG | `docs/CHANGELOG.md` | MED | ‚úÖ |

---

## Steps
1. **Initialize Registry:** Create `docs/governance/guardrail-registry.md` with:
   - ID Mapping Table (Legacy ID -> Unified ID)
   - Scope Definitions (Content vs Agent)
   - SSoT Links (Path to implementation)
2. **Audit & Map:** Scan the codebase for all guardrail definitions and populate the registry map.
   - Target files: `ra_quality-gates-guardrails.md`, `wireframes/`, `PROJECT-INSTRUCTIONS.md`
   - **STANDARDIZATION:** Migrate all legacy numeric IDs (1-37) to G-prefix format (G1-G37)
   - Update ra_quality-gates-guardrails.md to use standardized G-prefix IDs
   - Create guardrail naming schema documentation for future consistency
3. **Gold Master Sync:** Update `PROJECT-INSTRUCTIONS.md` to reference the Registry as the "Phonebook."
4. **Agent Governance Sync:** Ensure `docs/governance/agent-governance.md` rules are indexed.

## Pre-Requisite Cleanup (Production Files Only)

Before proceeding with the Registry, fix these issues in production files identified during implementation review:

### 5. Fix Validator Checkbox Marks
**File:** `optimization-tools/bullet-optimizer/bo_output-validator.md`
**Lines:** 56-58
**Issue:** Lines have `[x]` instead of `[ ]` - implies pre-checked failures
**Fix:** Change `[x]` to `[ ]` on lines 56-58

### 6. Add Missing Section 12 Header
**File:** `optimization-tools/bullet-optimizer/bo_output-validator.md`
**Line:** Before line 67 (em-dash rules)
**Issue:** Section numbering jumps from `### 11.` to `### 13.`
**Fix:** Add `### 12. Symbol & Spacing (Rule: G22)` before line 67

### 7. Update Version History
**File:** `optimization-tools/bullet-optimizer/bo_bullet-generation-instructions.md`
**Issue:** Version history shows v9.3.5.3 as latest but v9.3.5.5 is complete
**Fix:** Add version entries for v9.3.5.4 (ENH-007 prep) and v9.3.5.5 (Agent Governance Extraction)

### 8. Clean Git Diff Artifacts
**File:** `docs/knowledge/patterns.md`
**Lines:** 220-238
**Issue:** Lines contain `+` symbols from uncommitted diff
**Fix:** Remove leading `+` characters from lines 220-238

---

---

## Guardrail ID Standardization Schema

**Effective:** 2026-01-29 (v9.3.5.6+)

### Naming Convention
All guardrails use **G-prefix numeric format**: `G#` (e.g., G1, G24, G42)

| Format | Example | Status | Usage |
|---|---|---|---|
| **Modern (G-prefix)** | G1, G40, G42 | ‚úÖ ACTIVE | All new guardrails |
| **Legacy (numeric)** | 1, 28, 32 | ‚ö†Ô∏è DEPRECATED | Migrate to G-prefix during refactoring |
| **Variant (G-dash)** | G-10, G-24 | ‚ùå INVALID | Do not use |

### Migration Scope
**Files Requiring Updates: 80+ files**

**Priority 1 (Core Production Files):**
- `optimization-tools/resume-analyzer/ra_quality-gates-guardrails.md` - Primary SSoT
- `PROJECT-INSTRUCTIONS.md` - Gold Master
- `optimization-tools/bullet-optimizer/bo_*.md` (4 files)
- `optimization-tools/narrative-generator/ng_*.md` (1 file)
- `optimization-tools/job-fit-analyzer/jfa_*.md` (2 files)

**Priority 2 (Supporting Documentation):**
- `docs/decisions/ADR-*.md` (7 files)
- `docs/enhancements/ENH-*/` (multiple enhancement docs)
- `docs/lessons-learned/` (process and architecture lessons)
- `docs/knowledge/` (concepts, patterns, gotchas)

**Priority 3 (Archived Plans - Lower Urgency):**
- `docs/plans/archive/v6.x/`, `v7.x/`, `v8.x/`, `v9.x/` (40+ files)
- `docs/sessions/` (session notes)
- `wireframes/` (workflow diagrams)

### Migration Path (Task 2 Subtask)
1. **Phase 1:** Update ra_quality-gates-guardrails.md guardrail IDs (1-37 ‚Üí G1-G37)
2. **Phase 2:** Update Priority 1 files (core production files)
3. **Phase 3:** Update Priority 2 files (supporting documentation)
4. **Phase 4 (Optional):** Update archived plans and session notes

### Enforcement
- Code review: Reject any new guardrails without G-prefix format
- Registry updates: Only accept G-prefix IDs in Audit & Map tasks
- Update CLAUDE.md or agent-governance.md with this standard (documented in guardrail-registry.md)

---

## Local Tracking
- **Local ID:** ENH-009
- **Branch:** `v9.3.5.6-enh-009-guardrail-registry` (CREATED)
- **Status:** In Progress (Implementing Standardization)
