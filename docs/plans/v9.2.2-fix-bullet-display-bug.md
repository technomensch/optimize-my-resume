# Implementation Plan: v9.2.2 - Resume Bullet Display Fix

## Problem Statement
The newly implemented validation and regeneration loop (v9.2.1) is inadvertently deleting all generated resume bullets before they reach the UI. This happens because the `validatePositionMetadata` validator requires an exact or fuzzy match against a "Reference History" parsed from the original job history. If this parsing fails or is incomplete, the validator deletes the "unmatched" bullets to ensure data integrity, resulting in an empty display.

## Root Causes
1. **Brittle Reference Parsing**: `parseOriginalHistory` relies on an LLM call to extract structured data. If the LLM output is malformed or the call fails, the reference history becomes empty.
2. **Aggressive Validation**: `validatePositionMetadata` returns early and excludes bullets that don't match the history, rather than flagging them for correction or keeping them as-is if the reference data is missing.
3. **Empty History Handling**: No fallback mechanism exists when the stable reference history cannot be established.

## Proposed Changes

### 1. Robust Reference History Parsing
- Update `parseOriginalHistory` to include a rudimentary regex-based fallback if the LLM extraction fails.
- Improve the extraction prompt to be more resilient to different job history formats.
- Add logging to track matches vs. misses during the validation phase.

### 2. Safeguard `validatePositionMetadata`
- Modify the validator to *preserve* bullets even if a match isn't found, but flag them with a `CRITICAL` error.
- Allow the component to display the "Corrected Content" even if it contains validation errors (currently it does, but the bullets are missing because they were never added to `correctedBullets`).
- Ensure `correctedBullets.push(bullet)` still happens for unmatched bullets, but with an error status.

### 3. Validation Loop Resilience
- If `referenceHistory` is empty, skip position-specific validators (Metadata, Chronology Depth, Chronological Order) but continue with content-based validators (Bullet Format, Verb Diversity, etc.).
- Inform the user via the Validation Report if the history could not be parsed for verification.

### 4. UI/UX Improvements
- Ensure the `ValidationReport` clearly explains why certain checks were skipped or why positions might be flagged.

## Implementation Steps

### Task 1: Update `parseOriginalHistory`
- [ ] Add regex fallback for basic Position/Company/Date extraction.
- [ ] Enhance error handling.

### Task 2: Refactor `validatePositionMetadata`
- [ ] Ensure all bullets are pushed to `correctedBullets` regardless of match status.
- [ ] Implement a "Soft Match" flag to allow minor variations without triggering a full error.

### Task 3: Sync to WebGUI Artifact
- [ ] Mirror all local changes to `claude-artifacts/Should-I-Apply-webgui.jsx`.

### Task 4: Verification
- [ ] Test with "messy" job history text.
- [ ] Verify bullets display even if metadata validation fails.
- [ ] verify keyword coverage report still shows all positions.

## Schedule
- **v9.2.2-fix-bullet-display**: Targeted for immediate implementation.
