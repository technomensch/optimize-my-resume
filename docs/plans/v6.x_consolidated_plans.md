]633;E;for f in docs/plans/v6.0.1-foundation.md docs/plans/v6.0.2-core-integration.md docs/plans/v6.0.3-router-workflows.md docs/plans/v6.0.4-summary-polish.md docs/plans/v6.0.5-docs_cleanup.md docs/plans/v6.1.0.md docs/plans/v6.1.1-folder-restructure.md docs/plans/v6.1.2-documentation-updates.md docs/plans/v6.1.3-wireframes.md docs/plans/v6.1.4-legacy-archival.md\x3b do echo -e "\\n\\n# --- FILE: $f ---\\n\\n"\x3b cat "$f"\x3b done > docs/plans/v6.x_consolidated_plans.md && rm docs/plans/v6.0.1-foundation.md docs/plans/v6.0.2-core-integration.md docs/plans/v6.0.3-router-workflows.md docs/plans/v6.0.4-summary-polish.md docs/plans/v6.0.5-docs_cleanup.md docs/plans/v6.1.0.md docs/plans/v6.1.1-folder-restructure.md docs/plans/v6.1.2-documentation-updates.md docs/plans/v6.1.3-wireframes.md docs/plans/v6.1.4-legacy-archival.md;3dd10a7d-b58a-44d7-864c-cb9942d54c14]633;C

# --- FILE: docs/plans/v6.0.1-foundation.md ---


# v6.0.1 Foundation - Schema & Core Infrastructure

**Version:** 6.0.1 (Part 1 of 4)
**Branch:** `v6.0.1-foundation`
**Token Budget:** 53,000 tokens (within 200K limit)
**Status:** Ready for Implementation

---

## Overview

This is the first phase of the v6.0 complete workflow system. It establishes the foundational schemas and parsing logic that all other phases will build upon.

**Goal:** Create the core data structures and parsing modules without modifying existing modes.

**Strategy:** Build in isolation - all new files, no modifications to existing code. This allows safe testing and rollback.

---

## Scope

### ‚úÖ Included in v6.0.1

1. **Job History Schema v2.0** - Complete 12-section schema with hard/soft skills separation
2. **Skills Categorization Module** - Hard vs soft skill classification with confidence scoring
3. **17-Point JD Parser** - Full extraction schema from legacy system

### ‚ùå Not Included (Deferred to Later Phases)

- Mode modifications (v6.0.2)
- Entry point router (v6.0.3)
- Professional summary generation (v6.0.4)
- Integration with existing workflows (v6.0.2+)

---

## Files to Create (3 New Files)

### File 1: `/shared/schemas/job-history-v2.0-schema.json`

**Purpose:** JSON schema definition for job history v2.0 with validation rules

**Size:** ~250 lines

**Content Structure:**
```json
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Job History Schema v2.0",
  "version": "2.0.0",
  "type": "object",
  "required": ["schema_version", "positions"],
  "properties": {
    "schema_version": {
      "type": "string",
      "const": "2.0.0"
    },
    "positions": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["job_title", "company", "dates"],
        "properties": {
          "job_title": {"type": "string"},
          "company": {"type": "string"},
          "dates": {"type": "string"},
          "professional_summary": {"type": "string"},
          "core_responsibilities": {
            "type": "array",
            "items": {"type": "string"}
          },
          "key_achievements": {
            "type": "array",
            "items": {"type": "string"}
          },
          "hard_skills_demonstrated": {
            "type": "array",
            "items": {"type": "string"},
            "description": "Technical/measurable skills (Python, SQL, AWS, etc.)"
          },
          "soft_skills_demonstrated": {
            "type": "array",
            "items": {"type": "string"},
            "description": "Interpersonal/behavioral skills (Leadership, Communication, etc.)"
          },
          "education": {
            "type": "string",
            "description": "Degree, institution, year"
          },
          "certifications": {
            "type": "array",
            "items": {"type": "string"},
            "description": "Professional certifications"
          },
          "tools_technologies": {
            "type": "array",
            "items": {"type": "string"}
          },
          "impact_metrics": {
            "type": "array",
            "items": {"type": "string"}
          },
          "industry_domain": {"type": "string"},
          "team_scope": {"type": "string"}
        }
      }
    }
  }
}
```

**Key Features:**
- Semantic versioning (2.0.0)
- Hard/soft skills separation
- Education and certifications fields
- Validation rules for required fields

---

### File 2: `/shared/modules/skills-categorizer.md`

**Purpose:** Decision tree logic for classifying skills as hard or soft

**Size:** ~150 lines

**Content Structure:**
```xml
<skills_categorizer>
  <purpose>
    Classify each skill as HARD (technical/measurable) or SOFT (interpersonal/behavioral)
    with confidence scoring to flag ambiguous cases.
  </purpose>

  <categorization_decision_tree>
    <step_1_exact_match>
      Check against known skills database:

      HARD_SKILLS_DATABASE = [
        "Python", "Java", "JavaScript", "SQL", "C++", "Ruby", "PHP",
        "AWS", "Azure", "GCP", "Docker", "Kubernetes", "Terraform",
        "JIRA", "Confluence", "Tableau", "Salesforce", "SAP", "Excel",
        "HIPAA", "GDPR", "SOX", "ISO 27001", "Agile", "Scrum", "Six Sigma",
        "PMP", "CPA", "CFA", "AWS Solutions Architect", ...
      ]

      SOFT_SKILLS_DATABASE = [
        "Leadership", "Communication", "Teamwork", "Problem-solving",
        "Time management", "Adaptability", "Critical thinking",
        "Stakeholder management", "Conflict resolution", "Mentoring",
        "Delegation", "Active listening", "Empathy", ...
      ]

      IF skill in HARD_SKILLS_DATABASE:
        RETURN {category: "hard", confidence: "high"}
      ELSE IF skill in SOFT_SKILLS_DATABASE:
        RETURN {category: "soft", confidence: "high"}
      ELSE:
        CONTINUE to step_2_context_analysis
    </step_1_exact_match>

    <step_2_context_analysis>
      Check surrounding words in JD text:

      HARD_SKILL_CONTEXT = [
        "certification", "proficiency", "years experience",
        "proficient in", "expertise in", "knowledge of"
      ]

      SOFT_SKILL_CONTEXT = [
        "ability to", "demonstrated", "proven track record",
        "strong", "excellent", "effective"
      ]

      IF context matches HARD_SKILL_CONTEXT:
        RETURN {category: "hard", confidence: "medium"}
      ELSE IF context matches SOFT_SKILL_CONTEXT:
        RETURN {category: "soft", confidence: "medium"}
      ELSE:
        CONTINUE to step_3_linguistic_analysis
    </step_2_context_analysis>

    <step_3_linguistic_analysis>
      Analyze part of speech:

      IF skill is a noun (Python, SQL, Tableau):
        RETURN {category: "hard", confidence: "medium"}
      ELSE IF skill is an adjective/adverb (collaborative, efficiently):
        RETURN {category: "soft", confidence: "medium"}
      ELSE IF skill is a verb (communicate, lead, manage):
        Extract implied skill ‚Üí categorize as soft
        RETURN {category: "soft", confidence: "low"}
    </step_3_linguistic_analysis>

    <step_4_default_fallback>
      When in doubt, default to HARD skill (safer for blocking gate logic)

      RETURN {category: "hard", confidence: "low", flag: "review_needed"}
    </step_4_default_fallback>
  </categorization_decision_tree>

  <validation_rules>
    <!-- Check for skills appearing in both hard and soft arrays -->
    <duplicate_check>
      IF skill appears in BOTH hard_skills and soft_skills:
        WARN "Ambiguous skill detected: {skill}"
        KEEP in hard_skills (safer default)
        REMOVE from soft_skills
    </duplicate_check>

    <!-- Flag low-confidence categorizations for human review -->
    <confidence_flag>
      IF confidence == "low":
        ADD to review_queue: {skill, category, reasoning}
    </confidence_flag>
  </validation_rules>

  <output_format>
    {
      "skill": "Data Analysis",
      "category": "hard",
      "confidence": "medium",
      "reasoning": "Paired with 'proficiency' and '3+ years experience'"
    }
  </output_format>
</skills_categorizer>
```

**Key Features (from Opus review):**
- Three-tier decision tree (exact match ‚Üí context ‚Üí linguistic)
- Confidence scoring (high/medium/low)
- Ambiguous skill detection
- Safe default (hard skills when uncertain)

---

### File 3: `/shared/modules/jd-processing.md`

**Purpose:** 17-point JD parsing with keyword extraction and inference

**Size:** ~250 lines

**Content Structure:**
```xml
<jd_parser_17_point>
  <purpose>
    Extract structured data from job description text using the legacy 17-point schema.
    Handle both structured and conversational JD formats.
  </purpose>

  <schema_17_point>
    <!-- Company & Role Info (4 fields) -->
    <company type="string">Employer name</company>
    <job_title type="string">Role title</job_title>
    <location type="string">Physical location or "Remote"</location>
    <work_lifestyle type="enum">Remote | On-Site | Hybrid</work_lifestyle>

    <!-- Work Conditions (4 fields) -->
    <remote_restrictions type="string">State restrictions or "fake remote" indicators</remote_restrictions>
    <employee_type type="enum">Full-time | Part-time | Contract</employee_type>
    <travel_required type="string">Travel percentage or frequency</travel_required>
    <clearance type="string">Security clearance requirements</clearance>

    <!-- Compensation & Requirements (4 fields) -->
    <salary_range type="string">Compensation range</salary_range>
    <required_experience type="string">Years and type of experience</required_experience>
    <required_education type="string">Degree requirements</required_education>
    <job_responsibilities type="array">Core duties</job_responsibilities>

    <!-- Hard Skills (2 fields) -->
    <skills_needed type="array">REQUIRED hard skills</skills_needed>
    <skills_wanted type="array">PREFERRED hard skills</skills_wanted>

    <!-- Soft Skills (2 fields) -->
    <soft_skills_needed type="array">REQUIRED soft skills</soft_skills_needed>
    <soft_skills_wanted type="array">PREFERRED soft skills</soft_skills_wanted>

    <!-- Qualifications & Certifications (4 fields) -->
    <qualifications_needed type="array">Required qualifications</qualifications_needed>
    <qualifications_wanted type="array">Preferred qualifications</qualifications_wanted>
    <certifications_needed type="array">Required certifications</certifications_needed>
    <certifications_wanted type="array">Preferred certifications</certifications_wanted>
  </schema_17_point>

  <extraction_strategy>
    <structured_jd_parsing>
      <!-- For JDs with clear sections (Requirements, Qualifications, etc.) -->

      STEP 1: Identify section headers
      - "Requirements", "Qualifications", "Responsibilities", "Nice to Have"

      STEP 2: Extract from structured sections
      - skills_needed ‚Üê "Requirements" section
      - skills_wanted ‚Üê "Nice to Have" or "Preferred" section
      - job_responsibilities ‚Üê "Responsibilities" section

      STEP 3: Categorize skills using skills-categorizer.md
      - Run each skill through categorization logic
      - Separate into hard vs soft skill arrays

      STEP 4: Fill metadata fields
      - company ‚Üê Extract from header or signature
      - location ‚Üê Look for "Location:", "Based in", address patterns
      - work_lifestyle ‚Üê "Remote", "Hybrid", "On-site" keywords
    </structured_jd_parsing>

    <conversational_jd_parsing>
      <!-- For JDs without clear structure (narrative/conversational format) -->

      STEP 1: Keyword-based extraction
      - Scan full text for skill keywords (Python, SQL, Leadership, etc.)
      - Add to skills_needed if mentioned in requirements context

      STEP 2: Pattern matching
      - "X years of experience in [SKILL]" ‚Üí skills_needed
      - "Bonus if you know [SKILL]" ‚Üí skills_wanted
      - "Proficient in [TOOL]" ‚Üí skills_needed

      STEP 3: Contextual inference
      - "We're looking for a Python developer" ‚Üí skills_needed: ["Python"]
      - "Love working with AWS?" ‚Üí skills_wanted: ["AWS"]

      STEP 4: Confidence flagging
      - Mark extraction as "low confidence"
      - Warn user: "JD format is non-standard. Results may be incomplete."
    </conversational_jd_parsing>

    <missing_fields_handling>
      <!-- Per Opus Decision 6: Null + Infer -->

      IF field not found:
        - salary_range ‚Üí null (continue silently)
        - clearance ‚Üí null (continue silently)
        - location ‚Üí null (continue silently)
        - skills_needed ‚Üí Infer from job_responsibilities text
        - certifications ‚Üí null (continue silently)

      NO warnings about incomplete JDs - work with what's available
    </missing_fields_handling>
  </extraction_strategy>

  <hard_soft_skill_rules>
    <!-- Critical: Correct classification affects blocking gates -->

    <hard_skills>
      DEFINITION: Technical, measurable, teachable skills

      EXAMPLES:
      - Programming languages (Python, Java, JavaScript, SQL, C++, Ruby)
      - Cloud platforms (AWS, Azure, GCP)
      - Tools/frameworks (Docker, Kubernetes, React, Django, Tableau)
      - Domain knowledge (HIPAA, GDPR, Agile, Six Sigma, SEO)
      - Technical certifications (PMP, AWS Solutions Architect, CPA)

      WHEN IN DOUBT: If it can be tested or measured, it's HARD
    </hard_skills>

    <soft_skills>
      DEFINITION: Interpersonal, behavioral, personality traits

      EXAMPLES:
      - Communication (written, verbal, presentation, stakeholder management)
      - Leadership (team management, mentoring, coaching, delegation)
      - Collaboration (teamwork, cross-functional, conflict resolution)
      - Work style (time management, adaptability, problem-solving, critical thinking)

      WHEN IN DOUBT: If it describes how someone works with others, it's SOFT
    </soft_skills>

    <classification_instruction>
      You MUST categorize each skill correctly. Misclassification affects blocking logic.

      RULE: When uncertain ‚Üí default to HARD skill (safer for blocking gate calculations)
    </classification_instruction>
  </hard_soft_skill_rules>

  <output_format>
    {
      "jd_parsed": {
        "company": "TechCorp Inc.",
        "job_title": "Senior Product Manager",
        "location": "Remote",
        "work_lifestyle": "Remote",
        "skills_needed": ["Python", "SQL", "AWS", "Agile"],
        "skills_wanted": ["Kubernetes", "Terraform"],
        "soft_skills_needed": ["Leadership", "Communication"],
        "soft_skills_wanted": ["Stakeholder management"],
        "remote_restrictions": "US only",
        "salary_range": "$120K-$160K",
        "required_experience": "5+ years in product management",
        "required_education": "Bachelor's degree",
        "certifications_wanted": ["PMP", "Certified Scrum Master"]
      },
      "extraction_confidence": "high",
      "extraction_method": "structured"
    }
  </output_format>
</jd_parser_17_point>
```

**Key Features (from Opus review):**
- Dual extraction strategy (structured vs conversational)
- Inference for missing skills sections
- Null handling for optional fields
- Hard/soft skill separation with classification rules

---

## Implementation Steps

### Step 1: Create Schema File
```bash
# Create schema directory if it doesn't exist
mkdir -p shared/schemas

# Create job-history-v2.0-schema.json
# Write complete JSON schema with validation rules
```

**Validation:**
- Schema is valid JSON
- All 12 sections defined
- Required fields marked
- Version is "2.0.0"

---

### Step 2: Create Skills Categorizer Module
```bash
# Create modules directory if it doesn't exist
mkdir -p shared/modules

# Create skills-categorizer.md
# Write decision tree logic with confidence scoring
```

**Validation:**
- Test with 20 sample skills (10 hard, 10 soft)
- Verify confidence scoring works
- Check ambiguous skill detection

---

### Step 3: Create JD Parser Module
```bash
# Create jd-processing.md in shared/modules/
# Write 17-point extraction logic
```

**Validation:**
- Test with structured JD (all 17 fields present)
- Test with conversational JD (narrative format)
- Test with minimal JD (only job title and requirements)
- Verify hard/soft skill separation

---

## Testing Checklist

### Schema Validation Tests

- [ ] Schema validates valid v2.0 job history
- [ ] Schema rejects invalid data (missing required fields)
- [ ] All 12 sections defined with correct types
- [ ] Version field is "2.0.0"

### Skills Categorizer Tests

- [ ] Exact match: "Python" ‚Üí hard (high confidence)
- [ ] Exact match: "Leadership" ‚Üí soft (high confidence)
- [ ] Context: "Proficiency in Data Analysis" ‚Üí hard (medium confidence)
- [ ] Context: "Strong communication skills" ‚Üí soft (medium confidence)
- [ ] Ambiguous: "Project Management" ‚Üí hard (default, low confidence)
- [ ] Duplicate detection: Skill in both hard/soft arrays ‚Üí keeps hard only
- [ ] Confidence flagging: Low confidence skills added to review queue

### JD Parser Tests

**Structured JD:**
- [ ] Extracts all 17 fields from well-formatted JD
- [ ] Separates skills into hard vs soft correctly
- [ ] Distinguishes "required" vs "preferred" (needed vs wanted)
- [ ] Handles missing optional fields (salary, clearance) with null

**Conversational JD:**
- [ ] Extracts skills from narrative text
- [ ] Infers skills from responsibilities when skills section missing
- [ ] Flags as "low confidence" extraction
- [ ] Still produces usable 17-point output

**Edge Cases:**
- [ ] JD with no skills section ‚Üí infers from responsibilities
- [ ] JD with mixed hard/soft in same list ‚Üí categorizes correctly
- [ ] JD with ambiguous skills ‚Üí defaults to hard, flags for review

---

## Dependencies

**Requires:**
- None (this phase is self-contained)

**Required by:**
- v6.0.2 (Mode 1 will use job-history schema)
- v6.0.2 (Mode 3 will use JD parser)
- v6.0.4 (Summary generator will use skills categorizer)

---

## Success Criteria

v6.0.1 is successful if:

1. ‚úÖ Schema file validates correctly with JSON Schema validator
2. ‚úÖ Skills categorizer achieves >95% accuracy on test set of 100 skills
3. ‚úÖ JD parser extracts all 17 fields from 100% of structured JDs
4. ‚úÖ JD parser extracts ‚â•12 fields from >80% of conversational JDs
5. ‚úÖ Hard/soft skill separation is correct in >90% of cases
6. ‚úÖ All tests pass without errors

---

## Issues & Mitigations

### Issue 1: Hard/Soft Skill Ambiguity (from Opus review)

**Problem:** Skills like "Agile" could be hard (methodology certification) or soft (agile mindset).

**Mitigation:**
- Context analysis in decision tree
- Confidence scoring to flag ambiguous cases
- Default to hard skill when uncertain (safer for blocking gates)

### Issue 2: Conversational JD Extraction Incomplete

**Problem:** Narrative JDs might not have all 17 fields extractable.

**Mitigation:**
- Inference from responsibilities text
- Keyword-based fallback extraction
- Clear confidence flagging ("low confidence" warning)
- Allow nulls for optional fields (salary, clearance, location)

---

## Next Steps

**After v6.0.1 Completes:**

1. **Git Workflow:**
   ```bash
   git checkout -b v6.0.1-foundation
   git add shared/schemas/ shared/modules/
   git commit -m "feat(v6.0.1): add job history schema v2.0, skills categorizer, and JD parser"
   git push origin v6.0.1-foundation
   ```

2. **Proceed to v6.0.2:**
   - Integrate schema into Mode 1 (job history generation)
   - Integrate JD parser into Mode 3 (gap analysis)
   - See `/docs/plans/v6.0.2-core-integration.md`

---

**Plan Created:** 2025-12-28
**Token Budget:** 53,000 tokens (estimated)
**Dependencies:** None
**Next Phase:** v6.0.2 Core Integration


# --- FILE: docs/plans/v6.0.2-core-integration.md ---


# v6.0.2 Core Integration - Mode Enhancements

**Version:** 6.0.2 (Part 2 of 4)
**Branch:** `v6.0.2-core-integration`
**Token Budget:** 64,000 tokens (within 200K limit)
**Status:** Ready for Implementation

---

## Overview

This phase integrates the foundational schemas from v6.0.1 into the existing mode workflows. It's where the system starts generating v2.0 job histories and performing evidence-based gap analysis.

**Goal:** Surgically enhance Mode 1 and Mode 3 to use v6.0.1 schemas without breaking existing functionality.

**Strategy:** Modify existing files minimally - add references to v6.0.1 modules, preserve all current logic.

---

## Prerequisites

**Must have v6.0.1 completed:**
- ‚úÖ `shared/schemas/job-history-v2.0-schema.json` exists
- ‚úÖ `shared/modules/skills-categorizer.md` exists
- ‚úÖ `shared/modules/jd-processing.md` exists

---

## Scope

### ‚úÖ Included in v6.0.2

1. **Evidence Matcher Module** - Links parsed JD to job history with citations
2. **Mode 1 Enhancement** - Generate job history v2.0 format
3. **Mode 3 Enhancement** - Use 17-point parser + evidence matching + blocking gates

### ‚ùå Not Included (Deferred to Later Phases)

- Entry point router (v6.0.3)
- Incremental updates (v6.0.3)
- Professional summary generation (v6.0.4)
- Re-comparison workflow (v6.0.3)

---

## Files to Create (1 New File)

### File 1: `/shared/modules/evidence-matching.md`

**Purpose:** Match JD requirements against job history with evidence citations and diff generation

**Size:** ~200 lines

**Content Structure:**
```xml
<evidence_matcher>
  <purpose>
    For EVERY requirement in the parsed JD, find evidence in job history and cite sources.
    Generate requirement-by-requirement gap analysis with evidence citations.
  </purpose>

  <matching_logic>
    <step_1_requirement_extraction>
      Extract all requirements from parsed JD:

      requirements = [
        ...jd.skills_needed.map(r => ({req: r, subcategory: "Skills Needed", importance: "Required"})),
        ...jd.skills_wanted.map(r => ({req: r, subcategory: "Skills Wanted", importance: "Preferred"})),
        ...jd.soft_skills_needed.map(r => ({req: r, subcategory: "Soft Skills Needed", importance: "Required"})),
        ...jd.soft_skills_wanted.map(r => ({req: r, subcategory: "Soft Skills Wanted", importance: "Preferred"})),
        ...jd.qualifications_needed.map(r => ({req: r, subcategory: "Qualifications Needed", importance: "Required"})),
        ...jd.certifications_needed.map(r => ({req: r, subcategory: "Certifications Needed", importance: "Required"})),
        ...jd.job_responsibilities.map(r => ({req: r, subcategory: "Responsibility", importance: "Required"}))
      ]
    </step_1_requirement_extraction>

    <step_2_evidence_search>
      For EACH requirement:

      1. **Exact Match Search:**
         - Search job history for exact keyword
         - Check: hard_skills_demonstrated, soft_skills_demonstrated, certifications
         - If found ‚Üí status = "Matched"

      2. **Semantic Match Search:**
         - Search for related concepts (e.g., "Python" matches "developed ETL pipelines")
         - Check: core_responsibilities, key_achievements
         - If found ‚Üí status = "Partial"

      3. **Missing:**
         - No evidence found in any section
         - status = "Missing"
    </step_2_evidence_search>

    <step_3_citation_formatting>
      For each evidence found:

      {
        "content": "Direct quote from resume (exact text from achievement/responsibility)",
        "source": "Company | Job Title",
        "source_type": "achievement" | "responsibility" | "skill"
      }

      FORMATTING RULES (Opus Decision 5):
      - Same company, multiple roles ‚Üí Show each role with dates
        Example: "Google | PM (2018-2020)" and "Google | Lead PM (2022-2024)"
      - Contractor ‚Üí "Accenture (Client: DHS) | Analyst"
      - Freelance ‚Üí "Consultant | Freelance (5 clients)"
      - NO prefixes like "Resume -", "at", "Candidate -"
      - Format: "Company | Job Title (dates if multiple roles at same company)"
    </step_3_citation_formatting>

    <step_4_gap_rationale>
      For each requirement, explain the gap:

      MATCHED:
        "Strong evidence across multiple roles"
        "Exact keyword match in skills section"

      PARTIAL:
        "Resume shows related experience (statistical analysis) but not explicit ML frameworks"
        "Demonstrated leadership but not at required scale (led team of 5, JD requires 10+)"

      MISSING:
        "No evidence of [SKILL] found in job history"
        "Experience gap: JD requires [X], resume shows [Y]"
    </step_4_gap_rationale>
  </matching_logic>

  <evidence_based_vs_keyword_check>
    <!-- Opus Decision 3: Two-part check -->

    For EACH requirement:

    1. **Evidence Match:** Did the candidate DEMONSTRATE this skill?
       - Look for achievements, responsibilities, projects
       - This is the PRIMARY assessment

    2. **Keyword Check:** Does the resume EXPLICITLY mention this keyword?
       - Check if keyword appears in skills section or summary
       - This is SECONDARY (for ATS optimization)

    OUTPUT:
    - IF evidence found AND keyword present ‚Üí [MATCHED]
    - IF evidence found BUT keyword missing ‚Üí [PARTIAL] with keyword recommendation
    - IF no evidence ‚Üí [MISSING]

    Example:
    ```
    [MATCHED] Agile
      Evidence: "Led sprint planning and backlog grooming sessions" (TechCorp | PM)
      Keyword status: ‚úì "Agile" appears in skills section

    [PARTIAL] Agile
      Evidence: "Managed iterative product development cycles" (StartupCo | PM)
      Gap: Keyword "Agile" not explicitly listed - add to skills section for ATS
    ```
  </evidence_based_vs_keyword_check>

  <color_coded_output>
    KEY: [MATCHED] (Green) | [PARTIAL] (Yellow) | [MISSING] (Red)

    [HARD SKILLS - REQUIRED]

    [MATCHED] Python
      Evidence:
      - "Developed ETL pipelines using Python and Pandas"
        ‚Üí TechCorp | Data Engineer (2020-2022)
      - "Automated workflows with Python scripts (saved 20 hrs/week)"
        ‚Üí StartupCo | Senior Analyst (2018-2020)

    [PARTIAL] Machine Learning
      Evidence:
      - "Applied statistical models to forecast trends"
        ‚Üí StartupCo | Data Analyst (2017-2018)
      Gap: Resume shows statistical analysis but not explicit ML frameworks (scikit-learn, TensorFlow)
      Recommendation: If you have ML experience, add specific framework keywords

    [MISSING] Kubernetes
      Evidence: None found
      Gap: No container orchestration experience mentioned
      Recommendation: Not strategic to apply unless you're willing to learn Kubernetes

    SORTING ORDER:
    - Matched items first
    - Partial items second
    - Missing items last
  </color_coded_output>

  <diff_generation>
    <!-- For re-comparison workflow (v6.0.3) -->

    When comparing CURRENT job history to PREVIOUS comparison:

    {
      "improvements": [
        {
          "requirement": "Salesforce",
          "previous_status": "Missing",
          "current_status": "Matched",
          "new_evidence": "Implemented Salesforce integration (Acme Corp | PM)"
        }
      ],
      "no_change": ["SQL", "Agile", "Leadership"],
      "score_delta": "+9 points (72% ‚Üí 81%)"
    }

    OUTPUT:
    ```
    ## Changes Since Last Comparison

    ### Improvements
    - [MISSING ‚Üí MATCHED] Salesforce: Now matched from your new position at Acme Corp
    - [PARTIAL ‚Üí MATCHED] Python: Updated context with new project details

    ### No Change
    - [MATCHED] SQL, Agile, Leadership
    - [MISSING] Kubernetes (still not in your history)

    ### Overall Score: 72% ‚Üí 81% (+9 points)
    ```
  </diff_generation>

  <output_schema>
    {
      "requirement_analysis": [
        {
          "requirement": "Python programming",
          "subcategory": "Skills Needed",
          "importance": "Required",
          "status": "Matched",
          "evidence": [
            {
              "content": "Developed ETL pipelines using Python and Pandas",
              "source": "TechCorp | Data Engineer",
              "source_type": "achievement"
            }
          ],
          "gap_rationale": "Strong evidence across multiple roles",
          "keyword_present": true
        }
      ],
      "summary": {
        "matched_count": 12,
        "partial_count": 5,
        "missing_count": 3,
        "match_score": 75
      }
    }
  </output_schema>
</evidence_matcher>
```

**Key Features (from Opus review):**
- Requirement-by-requirement analysis (not aggregated)
- Evidence citations with source formatting
- Two-part check (evidence + keyword)
- Diff generation for re-comparison
- Color-coded output with sorting

---

## Files to Modify (3 Files - Surgical Changes)

### Modification 1: `PROJECT-INSTRUCTIONS.md`

**Changes:**

**Location 1: After line 15 (Mode detection section)**
```xml
<!-- ADD THIS SECTION -->
<job_history_schema_version>
  The system now uses Job History Schema v2.0 (as of v6.0.2).

  Key changes from v1.0:
  - hard_skills_demonstrated and soft_skills_demonstrated (separated)
  - education field added
  - certifications array added
  - professional_summary per role added

  When generating job history, use the schema defined in:
  shared/schemas/job-history-v2.0-schema.json
</job_history_schema_version>
```

**Location 2: Lines 40-120 (Mode 1 job history creation section)**
```xml
<!-- REPLACE the job history creation instructions -->
<job_history_creation>
  After extracting resume data, generate job history in v2.0 format:

  FOR EACH position in resume:
    1. Extract metadata (job_title, company, dates)
    2. Extract core_responsibilities (3-5 bullets)
    3. Extract key_achievements (3-5 bullets with metrics)
    4. Categorize skills using shared/modules/skills-categorizer.md:
       - Run each skill through categorization logic
       - Separate into hard_skills_demonstrated and soft_skills_demonstrated
    5. Extract education (if mentioned in context of this role)
    6. Extract certifications (if mentioned in context of this role)
    7. Extract tools_technologies (granular list)
    8. Extract impact_metrics (quantified results)
    9. Extract industry_domain
    10. Extract team_scope
    11. Generate professional_summary for this role:
        - 2-3 sentences summarizing role scope
        - Key achievements and metrics
        - 2-3 hard skills demonstrated
        - 1-2 soft skills demonstrated

  SAVE to: claude_generated_job_history_summaries_v2.txt
  FORMAT: Plain text with XML-like structure (see schema for details)
</job_history_creation>
```

**Location 3: After Mode 1 completion (new section after line 120)**
```xml
<!-- ADD THIS SECTION -->
<mode_1_completion_next_steps>
  After job history v2.0 is generated and saved, present next steps:

  "‚úÖ Analysis complete! Your job history has been saved.

  Next steps - What would you like to do?
  1. Optimize specific resume bullets (Mode 2)
  2. Check fit for a job description (Mode 3)
  3. Export job history for review

  Just let me know, or paste a job description to start Mode 3!"
</mode_1_completion_next_steps>
```

**Location 4: Line ~800 (version number)**
```xml
<!-- UPDATE version -->
<version>6.0.2</version>
```

---

### Modification 2: `modes/mode-3-jd-comparison.md`

**Changes:**

**Location 1: Lines 80-120 (JD extraction section)**
```xml
<!-- REPLACE current JD extraction with 17-point parser -->
<jd_parsing>
  Use the 17-point parsing schema from shared/modules/jd-processing.md

  Extract all 17 fields:
  - company, job_title, location, work_lifestyle
  - remote_restrictions, employee_type, travel_required, clearance
  - salary_range, required_experience, required_education, job_responsibilities
  - skills_needed, skills_wanted (HARD skills - required/preferred)
  - soft_skills_needed, soft_skills_wanted (SOFT skills - required/preferred)
  - qualifications_needed, qualifications_wanted
  - certifications_needed, certifications_wanted

  IMPORTANT: Use skills-categorizer.md to separate hard vs soft skills
</jd_parsing>
```

**Location 2: After line 150 (add requirement-by-requirement gap tracking)**
```xml
<!-- ADD THIS SECTION -->
<requirement_by_requirement_gap_analysis>
  Use shared/modules/evidence-matching.md to analyze EVERY requirement.

  For EACH requirement:
  1. Search job history v2.0 for evidence
  2. Determine status (Matched/Partial/Missing)
  3. Collect evidence citations with sources
  4. Provide gap rationale

  OUTPUT using color-coded format:
  - KEY legend at top
  - Section headers ([HARD SKILLS - REQUIRED], etc.)
  - Matched ‚Üí Partial ‚Üí Missing sorting within each section
  - Evidence citations in "Company | Job Title" format
</requirement_by_requirement_gap_analysis>
```

**Location 3: After line 220 (add blocking gates)**
```xml
<!-- ADD THIS SECTION -->
<blocking_gates>
  After gap analysis, check blocking gates (Opus Decision 2: Soft block with warning):

  <gate_1_hard_skill_deficit>
    IF count(Missing Hard Skills) > count(Matched Hard Skills):
      DISPLAY WARNING:
      "‚ö† WARNING: Poor Job Fit Detected

      Hard Skills Required by JD:
        [MATCHED] {list matched skills}
        [MISSING] {list missing skills}

      You are missing {X} of {Y} required hard skills.

      Proceeding will use tokens to generate recommendations that are unlikely
      to be useful. This is not advised.

      Do you want to proceed anyway? (yes/no)"

      IF user says "no":
        STOP analysis, save tokens
      IF user says "yes":
        CONTINUE to recommendations (user accepted risk)
  </gate_1_hard_skill_deficit>

  <gate_2_low_match_score>
    IF match_score < 30:
      DISPLAY WARNING:
      "‚ö† LOW MATCH SCORE DETECTED (<30)

      Final Match Score: {score}/100

      Based on the analysis, this position has significant gaps compared to your profile.
      Optimization is unlikely to bridge this gap effectively.

      Recommendation: Focus on roles with 50+ match scores where optimization can be strategic.

      Do you want to proceed anyway? (yes/no)"

      IF user says "no":
        STOP analysis
      IF user says "yes":
        CONTINUE to recommendations
  </gate_2_low_match_score>

  <gate_3_location_mismatch>
    <!-- KEEP EXISTING v5.1 logic from ADD_REMOTE_WORK_LOGIC.md -->
    <!-- This gate already exists, don't modify -->
  </gate_3_location_mismatch>
</blocking_gates>
```

**Location 4: After line 280 (add per-JD summary option placeholder)**
```xml
<!-- ADD THIS SECTION (basic version, full implementation in v6.0.4) -->
<per_jd_summary_placeholder>
  After gap analysis completes, if match_score >= 50:
    OFFER: "Would you like me to generate a customized professional summary for this JD?"

    IF yes:
      NOTE: "Per-JD summary generation will be implemented in v6.0.4.
             For now, use your master summary from job history."
</per_jd_summary_placeholder>
```

---

### Modification 3: `modes/mode-2-bullet-optimization.md`

**Changes:**

**Location 1: Line ~30 (job history file reference)**
```xml
<!-- UPDATE to support both v1.0 and v2.0 -->
<job_history_loading>
  <!-- Backward compatibility - check v2.0 first, fallback to v1.0 -->

  IF file exists: claude_generated_job_history_summaries_v2.txt:
    LOAD v2.0 format
    USE hard_skills_demonstrated and soft_skills_demonstrated arrays
  ELSE IF file exists: claude_generated_job_history_summaries.txt:
    LOAD v1.0 format
    USE skills_demonstrated array (combined hard/soft)
    RECOMMEND: "I see you have v1.0 job history. Consider re-running Mode 1 to upgrade to v2.0 for better keyword matching with separated hard/soft skills."
  ELSE:
    ERROR: "No job history found. Please run Mode 1 first to analyze your resume."
</job_history_loading>
```

**Location 2: Line ~60 (skills reference for keyword insertion)**
```xml
<!-- UPDATE to use v2.0 skills arrays -->
<keyword_insertion_logic>
  IF using v2.0 job history:
    - Use hard_skills_demonstrated for technical keyword insertion
    - Use soft_skills_demonstrated for behavioral keyword insertion
  ELSE IF using v1.0 job history:
    - Use skills_demonstrated array (combined)
</keyword_insertion_logic>
```

---

## Implementation Steps

### Step 1: Create Evidence Matcher Module
```bash
# Create evidence-matching.md in shared/modules/
# Write matching logic with citation formatting
```

**Validation:**
- Test with sample JD + job history
- Verify all requirements analyzed
- Check evidence citation format ("Company | Title")

---

### Step 2: Modify PROJECT-INSTRUCTIONS.md
```bash
# Read current file
# Make 4 surgical additions (line 15, 40-120, 120, 800)
# Preserve all existing logic
```

**Validation:**
- Mode 1 still works for standalone analysis
- v2.0 job history generation triggered
- Next steps message appears after completion

---

### Step 3: Modify mode-3-jd-comparison.md
```bash
# Read current file
# Make 4 surgical additions (80-120, 150, 220, 280)
# Preserve v5.1 location blocking gate
```

**Validation:**
- 17-point JD parsing works
- Evidence matching produces citations
- Blocking gates fire correctly
- v5.1 location logic still works

---

### Step 4: Modify mode-2-bullet-optimization.md
```bash
# Read current file
# Make 2 surgical additions (line 30, 60)
# Ensure backward compatibility
```

**Validation:**
- Mode 2 works with v2.0 job history
- Mode 2 falls back to v1.0 if v2.0 not found
- Upgrade recommendation shown for v1.0 users

---

## Testing Checklist

### Mode 1 Enhancement Tests

- [ ] Mode 1 generates job history v2.0 with all 12 sections
- [ ] Professional summary generated for each role
- [ ] Hard/soft skills separated correctly
- [ ] Education extracted (if present)
- [ ] Certifications extracted (if present)
- [ ] "Next Steps" message appears after completion
- [ ] v2.0 file saved to correct location

### Mode 3 Enhancement Tests

- [ ] 17-point JD parsing extracts all fields
- [ ] Requirement-by-requirement gap analysis works
- [ ] Evidence citations formatted as "Company | Title"
- [ ] Color-coded output displayed correctly
- [ ] Matched/Partial/Missing sorting works
- [ ] Gate 1 (hard skill deficit) fires correctly
- [ ] Gate 2 (low match score) fires correctly
- [ ] Gate 3 (location mismatch) still works from v5.1
- [ ] User can override gates with "yes/no"

### Mode 2 Backward Compatibility Tests

- [ ] Mode 2 loads v2.0 job history successfully
- [ ] Mode 2 falls back to v1.0 if v2.0 not found
- [ ] Upgrade recommendation shown for v1.0 users
- [ ] Keyword insertion uses hard/soft skills correctly (v2.0)
- [ ] Keyword insertion works with combined skills (v1.0)

### Evidence Matcher Tests

- [ ] Exact match: "Python" in hard_skills ‚Üí status = "Matched"
- [ ] Semantic match: "developed ETL pipelines" ‚Üí status = "Partial" for "Python"
- [ ] Missing: No evidence found ‚Üí status = "Missing"
- [ ] Citations include source: "TechCorp | Data Engineer"
- [ ] Multiple roles at same company ‚Üí separate citations with dates
- [ ] Contractor format: "Accenture (Client: DHS) | Analyst"

---

## Dependencies

**Requires:**
- ‚úÖ v6.0.1 (all 3 files must exist)

**Required by:**
- v6.0.3 (router will detect v2.0 job history)
- v6.0.4 (summary generator will read v2.0 job history)

---

## Success Criteria

v6.0.2 is successful if:

1. ‚úÖ Mode 1 generates job history v2.0 (100% of new analyses)
2. ‚úÖ Mode 3 uses 17-point JD parsing (100% of JD comparisons)
3. ‚úÖ Evidence matching produces citations for all requirements
4. ‚úÖ Blocking gates fire correctly with soft blocking (allow override)
5. ‚úÖ Mode 2 backward compatible with v1.0 job histories
6. ‚úÖ All tests pass without errors
7. ‚úÖ No regressions in existing functionality

---

## Issues & Mitigations

### Issue 1: Evidence Citation Source Inconsistency (from Opus review)

**Problem:** Job histories might have inconsistent company/title formats.

**Mitigation:**
- Standardize format during job history creation (Mode 1)
- Enforce "Company | Job Title" in v2.0 schema
- Post-processing in evidence matcher to normalize

### Issue 2: Blocking Gates Too Aggressive

**Problem:** Gates might block users who are close matches.

**Mitigation:**
- Soft blocking with override option (Opus Decision 2)
- Clear warning message explaining why blocking
- User decides whether to proceed (yes/no)

### Issue 3: v1.0 to v2.0 Migration Confusion

**Problem:** Users with v1.0 job history might not know to upgrade.

**Mitigation:**
- Mode 2 shows clear upgrade recommendation
- Explains benefits of v2.0 (better keyword matching)
- Doesn't force upgrade (backward compatible)

---

## Next Steps

**After v6.0.2 Completes:**

1. **Git Workflow:**
   ```bash
   git checkout -b v6.0.2-core-integration
   git add shared/modules/ PROJECT-INSTRUCTIONS.md modes/
   git commit -m "feat(v6.0.2): integrate v2.0 schema into modes 1 & 3, add evidence matching"
   git push origin v6.0.2-core-integration
   ```

2. **Testing:**
   - Run full end-to-end test: New resume ‚Üí Mode 1 ‚Üí Mode 3 with JD
   - Verify v2.0 job history generated
   - Verify 17-point JD parsing works
   - Verify blocking gates fire

3. **Proceed to v6.0.3:**
   - Build entry point router
   - Add incremental update handler
   - Add re-comparison workflow
   - See `/docs/plans/v6.0.3-router-workflows.md`

---

**Plan Created:** 2025-12-28
**Token Budget:** 64,000 tokens (estimated)
**Dependencies:** v6.0.1 (required)
**Next Phase:** v6.0.3 Router & Workflows


# --- FILE: docs/plans/v6.0.3-router-workflows.md ---


# v6.0.3 Router & Workflows - Entry Point & Additional Features

**Version:** 6.0.3 (Part 3 of 4)
**Branch:** `v6.0.3-router-workflows`
**Token Budget:** 49,000 tokens (within 200K limit)
**Status:** Ready for Implementation

---

## Overview

This phase adds the entry point router for auto-detecting user intent and two additional workflows: incremental position updates and JD re-comparison.

**Goal:** Create seamless user experience with intelligent routing and support for ongoing resume maintenance.

**Strategy:** Build router module + integrate incremental update logic into Mode 3 for re-comparison.

---

## Prerequisites

**Must have v6.0.2 completed:**
- ‚úÖ Mode 1 generates job history v2.0
- ‚úÖ Mode 3 uses 17-point JD parsing
- ‚úÖ Evidence matcher module exists

---

## Scope

### ‚úÖ Included in v6.0.3

1. **Entry Point Router** - Auto-detect user state + confirm before executing
2. **Incremental Updates** - Add/edit/remove positions without full re-analysis
3. **JD Re-Comparison** - Re-run comparison with updated job history + diff output

### ‚ùå Not Included (Deferred to v6.0.4)

- Professional summary generation (master + per-JD)
- Summary customization logic
- Documentation updates
- Multi-track career support (removed from v6.0 scope per Opus Decision 1a)

---

## Files to Create (1 New File)

### File 1: `/shared/modules/workflow-router.md`

**Purpose:** Detect user intent and route to appropriate mode with confirmation

**Size:** ~300 lines

**Content Structure:**
```xml
<workflow_router>
  <purpose>
    Analyze user input and context to determine which workflow to execute.
    Always confirm with user before proceeding (hybrid auto-detect + confirmation).
  </purpose>

  <context_detection>
    <check_job_history>
      IF file exists: claude_generated_job_history_summaries_v2.txt
      AND file is not empty
      THEN state.hasJobHistory = true
      ELSE state.hasJobHistory = false
    </check_job_history>

    <check_jd_provided>
      <!-- JD Detection Heuristics (from Opus review Issue #4) -->

      JD_INDICATORS = [
        "Job Description:", "JD:", "Role:", "Requirements:",
        "Apply for:", "Position at", "Responsibilities:",
        "Qualifications:", "We are looking for"
      ]

      JD_VALIDATION_HEURISTICS = {
        length: text.length > 200 && text.length < 5000,
        has_keywords: text includes ("requirements" OR "qualifications" OR "responsibilities"),
        has_structure: text includes (bullet points OR numbered lists),
        has_company: text mentions company name or role title
      }

      IF user message matches JD_INDICATORS:
        IF JD_VALIDATION_HEURISTICS pass:
          state.hasJD = true
          state.jdConfidence = "high"
        ELSE:
          state.hasJD = "maybe"
          state.jdConfidence = "low"
          ASK USER: "This looks like a job description, but I'm not certain. Is this a JD you want to analyze?"
    </check_jd_provided>

    <check_resume_uploaded>
      IF user uploads file (PDF/DOCX/TXT):
        state.hasResume = true
      OR IF user pastes text > 300 words:
        state.hasResume = true
    </check_resume_uploaded>

    <check_override_commands>
      <!-- From Issue #9: Router doesn't handle resume updates -->

      OVERRIDE_KEYWORDS = {
        "re-analyze": Force Mode 1,
        "start over": Delete v2.0 file + Force Mode 1,
        "start fresh": Delete v2.0 file + Force Mode 1,
        "update job history": Force Mode 1 (append mode),
        "add position": Incremental update mode,
        "remove position": Incremental update mode,
        "edit position": Incremental update mode
      }

      IF user message matches OVERRIDE_KEYWORDS:
        state.forceMode = detected_mode
    </check_override_commands>
  </context_detection>

  <routing_scenarios>
    <!-- 5 core scenarios + 3 additional workflows -->

    <scenario_1_new_user priority="1">
      <condition>state.hasResume = true AND state.hasJobHistory = false</condition>
      <route>Mode 1 (Full Analysis)</route>
      <confirmation>
        "I detected a new resume upload. I'll perform a comprehensive resume analysis
        and create your job history profile.

        After analysis, you can:
        - Optimize specific bullets (Mode 2)
        - Check fit for a job description (Mode 3)

        Proceed with full analysis?"
      </confirmation>
      <on_confirm>Execute Mode 1</on_confirm>
      <on_decline>Ask "What would you like me to do instead?"</on_decline>
    </scenario_1_new_user>

    <scenario_2_jd_comparison priority="2">
      <condition>state.hasJobHistory = true AND state.hasJD = true</condition>
      <route>Mode 3 (JD Comparison)</route>
      <confirmation>
        "I detected your job history and a job description. I'll analyze your fit
        for this role using the 17-point gap analysis system.

        This will compare your profile against:
        - Required/preferred hard skills
        - Required/preferred soft skills
        - Experience, education, certifications
        - Location/remote work compatibility

        Proceed with JD fit analysis?"
      </confirmation>
      <on_confirm>Execute Mode 3</on_confirm>
      <on_decline>Ask "Would you like to do something else instead?"</on_decline>
    </scenario_2_jd_comparison>

    <scenario_3_bullet_optimization priority="3">
      <condition>state.hasJobHistory = true AND user mentions ("bullet", "optimize", "improve wording")</condition>
      <route>Mode 2 (Bullet Optimization)</route>
      <confirmation>
        "I'll optimize your resume bullets using your job history as context.

        Which bullets would you like me to improve? You can:
        - Paste specific bullets to optimize
        - Upload your current resume for bulk optimization

        Proceed?"
      </confirmation>
      <on_confirm>Execute Mode 2</on_confirm>
    </scenario_3_bullet_optimization>

    <scenario_4_ambiguous priority="4">
      <condition>state.hasJobHistory = true AND state.hasJD = false AND no override detected</condition>
      <route>None (Ask user)</route>
      <clarification>
        "I see you have a job history on file. What would you like to do?

        1. Check fit for a specific job description (Mode 3)
        2. Optimize resume bullets (Mode 2)
        3. Re-analyze my resume with updated info (Mode 1)
        4. Add/edit a position in my job history

        Please select 1-4 or describe what you need."
      </clarification>
    </scenario_4_ambiguous>

    <scenario_5_first_interaction priority="5">
      <condition>state.hasResume = false AND state.hasJobHistory = false</condition>
      <route>None (Explain system)</route>
      <welcome>
        "Welcome to the Resume Analyzer & Optimizer!

        I can help you:
        1. **Analyze your resume** - Get comprehensive feedback (Mode 1)
        2. **Optimize bullets** - Improve specific resume lines (Mode 2)
        3. **Check job fit** - Compare your resume to a job description (Mode 3)

        To get started, please upload your resume (PDF, DOCX, or paste text).

        If you have a specific job description you're targeting, include that too!

        Note: Your job history is saved to files in this project. If you close this
        session, your data persists but conversation context is lost. Start a new
        session anytime - I'll pick up where you left off using your saved files."
      </welcome>
    </scenario_5_first_interaction>

    <scenario_6_incremental_update priority="6">
      <condition>user message matches ("add position", "edit position", "remove position")</condition>
      <route>Incremental Update Handler</route>
      <confirmation>
        "I'll help you update your job history.

        What would you like to do?
        1. Add a new position
        2. Edit an existing position
        3. Remove a position

        Please select 1-3 or describe the change."
      </confirmation>
      <on_confirm>Execute incremental update logic (see below)</on_confirm>
    </scenario_6_incremental_update>

    <scenario_7_re_comparison priority="7">
      <condition>user message matches ("compare again", "re-run", "updated history") AND state.hasJobHistory = true</condition>
      <route>JD Re-Comparison Handler</route>
      <confirmation>
        "I'll re-run the JD comparison with your updated job history.

        Please paste the job description you want to re-analyze."
      </confirmation>
      <on_confirm>Execute re-comparison logic (see below)</on_confirm>
    </scenario_7_re_comparison>

    <scenario_8_ambiguous_input priority="8">
      <!-- From Opus Decision 7: Two-step guided conversation -->

      <condition>Cannot determine intent from input</condition>
      <route>None (Clarify with user)</route>
      <step_1_confirm_assumption>
        "This looks like [DETECTED_TYPE]. Is that correct? (yes/no)"
      </step_1_confirm_assumption>
      <step_2a_if_yes>
        "Would you like me to [ACTION]? (yes/no)"
      </step_2a_if_yes>
      <step_2b_if_no>
        "Got it. Is this:
         1. Part of a resume (I'll analyze it)
         2. Part of a JD (I'll compare against your job history)
         3. Something else"
      </step_2b_if_no>
    </scenario_8_ambiguous_input>
  </routing_scenarios>

  <incremental_update_handler>
    <!-- From Opus review Part 7: Incremental Position Updates -->

    <add_position>
      STEP 1: Collect position details
        Ask same questions as Mode 1 position loop:
        - "What was your job title?"
        - "Which company?"
        - "What were your dates of employment?"
        - "Tell me about your responsibilities..."

      STEP 2: Generate v2.0 sections
        - Use skills-categorizer.md for hard/soft separation
        - Generate professional_summary for this role
        - Extract all 12 sections

      STEP 3: Insert at correct chronological position
        - Sort positions by dates (most recent first)
        - Insert new position in array

      STEP 4: Recalculate aggregates
        - Update total_years_experience
        - Rebuild skills aggregation (all hard/soft skills across positions)

      STEP 5: Save and confirm
        SAVE to: claude_generated_job_history_summaries_v2.txt
        CONFIRM: "Added [Title] at [Company]. Job history now has [N] positions."
    </add_position>

    <edit_position>
      STEP 1: User selects position
        LIST positions: "Which position? 1. Company A (2021-2023) 2. Company B (2019-2021)"

      STEP 2: Show current values
        DISPLAY: Current job_title, company, dates, responsibilities, etc.

      STEP 3: Ask what to change
        "What would you like to update? (You can change multiple fields)"

      STEP 4: Update in place
        - Modify selected fields
        - Re-categorize skills if skills changed
        - Regenerate professional_summary if major changes

      STEP 5: Recalculate aggregates
        - Update total_years_experience if dates changed
        - Rebuild skills aggregation

      STEP 6: Save and confirm
        SAVE changes
        CONFIRM: "Updated [Title] at [Company]."
    </edit_position>

    <remove_position>
      STEP 1: User selects position
        LIST positions for deletion

      STEP 2: Confirm deletion
        WARN: "Are you sure? This will remove [Title] at [Company] from your job history."

      STEP 3: Remove from array
        - Delete position from positions array

      STEP 4: Recalculate aggregates
        - Update total_years_experience
        - Rebuild skills aggregation

      STEP 5: Save and confirm
        SAVE changes
        CONFIRM: "Removed [Title] at [Company]. Job history now has [N] positions."
    </remove_position>
  </incremental_update_handler>

  <re_comparison_handler>
    <!-- From Opus review Part 7: JD Re-Comparison -->

    <workflow>
      STEP 1: Check for previous comparison
        - User provides JD identifier (company name, job title)
        - Search jd_cache for matching JD
        - Location: /mnt/project/jd_parsed/[company]_[job]_parsed.json

      STEP 2a: If cached JD found
        LOAD: Previous parsed JD
        DISPLAY: "Found your comparison from [date]. Re-running with updated job history..."
        SKIP: JD parsing (use cached version)

      STEP 2b: If cached JD not found
        DISPLAY: "I don't have that JD saved. Please paste the job description again."
        WAIT: For user to provide JD text
        PARSE: Using jd-processing.md (17-point schema)
        CACHE: Save parsed JD for future re-comparisons

      STEP 3: Run evidence matcher
        - Use shared/modules/evidence-matching.md
        - Match against CURRENT job_history_v2.0.json
        - Generate requirement-by-requirement analysis

      STEP 4: Generate diff output
        IF previous comparison exists:
          COMPARE: Current results vs previous results
          HIGHLIGHT:
          - Improvements (Missing ‚Üí Matched, Partial ‚Üí Matched)
          - Regressions (Matched ‚Üí Missing - rare but possible)
          - No change (still Matched, still Missing)
          - Score delta (e.g., 72% ‚Üí 81%)

        OUTPUT:
        ```
        ## Changes Since Last Comparison

        ### Improvements
        - [MISSING ‚Üí MATCHED] Salesforce: Now matched from your new position at Acme Corp
        - [PARTIAL ‚Üí MATCHED] Python: Updated context with new project details

        ### No Change
        - [MATCHED] SQL, Agile, Leadership
        - [MISSING] Kubernetes (still not in your history)

        ### Overall Score: 72% ‚Üí 81% (+9 points)
        ```

      STEP 5: Store versioned comparison
        SAVE: /mnt/project/jd_parsed/[company]_[job]_v2_parsed.json
        KEEP: Previous version as v1 for history
    </workflow>

    <cache_management>
      User commands:
      - "Clear JD cache" ‚Üí Delete all /mnt/project/jd_parsed/ files
      - "List saved JDs" ‚Üí Show all cached comparisons with dates
      - "Delete [Company] JD" ‚Üí Remove specific cached JD
    </cache_management>
  </re_comparison_handler>
</workflow_router>
```

**Key Features (from Opus review):**
- 8 routing scenarios (5 core + 3 additional)
- JD validation heuristics (avoid false positives)
- Override commands for force-routing
- Incremental update logic (add/edit/remove positions)
- Re-comparison with diff generation
- Ambiguous input handling (two-step clarification)

---

## Files to Modify (1 File - Surgical Change)

### Modification 1: `PROJECT-INSTRUCTIONS.md`

**Changes:**

**Location 1: After line 15 (before mode detection)**
```xml
<!-- ADD THIS SECTION -->
<entry_point_routing>
  Before executing any mode, consult shared/modules/workflow-router.md to:
  1. Detect user state (hasJobHistory, hasJD, hasResume)
  2. Identify user intent (which workflow to execute)
  3. Confirm with user before proceeding
  4. Handle override commands (re-analyze, start fresh, add position, etc.)

  The router handles 8 scenarios:
  - New user (no job history)
  - JD comparison (has job history + JD)
  - Bullet optimization (has job history + wants optimization)
  - Ambiguous (has job history, unclear intent)
  - First interaction (no context)
  - Incremental update (add/edit/remove position)
  - Re-comparison (re-run JD analysis with updated history)
  - Ambiguous input (cannot determine type)

  ALWAYS route through workflow-router.md first
</entry_point_routing>
```

---

## Implementation Steps

### Step 1: Create Workflow Router Module
```bash
# Create workflow-router.md in shared/modules/
# Write all 8 routing scenarios
# Include incremental update handler
# Include re-comparison handler
```

**Validation:**
- Test all 8 scenarios with sample inputs
- Verify JD validation heuristics work
- Check override commands trigger correct modes

---

### Step 2: Modify PROJECT-INSTRUCTIONS.md
```bash
# Add entry routing section after line 15
# Preserve all existing logic
```

**Validation:**
- Router consulted before mode execution
- User confirmation requested
- Override commands work

---

### Step 3: Create JD Cache Directory
```bash
# Create directory for storing parsed JDs
mkdir -p /mnt/project/jd_parsed/
```

**Validation:**
- Directory exists
- Permissions allow read/write

---

## Testing Checklist

### Router Tests (8 Scenarios)

- [ ] Scenario 1: New user uploads resume ‚Üí routes to Mode 1
- [ ] Scenario 2: User with job history pastes JD ‚Üí routes to Mode 3
- [ ] Scenario 3: User says "optimize bullets" ‚Üí routes to Mode 2
- [ ] Scenario 4: User with job history, unclear intent ‚Üí asks for clarification
- [ ] Scenario 5: First interaction, no context ‚Üí shows welcome message
- [ ] Scenario 6: User says "add position" ‚Üí incremental update handler
- [ ] Scenario 7: User says "compare again" ‚Üí re-comparison handler
- [ ] Scenario 8: Ambiguous input ‚Üí two-step clarification

### JD Validation Tests

- [ ] Structured JD (clear sections) ‚Üí detected with high confidence
- [ ] Conversational JD (narrative) ‚Üí detected with medium confidence
- [ ] LinkedIn post (looks like JD) ‚Üí low confidence, asks user to confirm
- [ ] Short text (<200 words) ‚Üí not detected as JD
- [ ] Very long text (>5000 words) ‚Üí not detected as JD

### Override Command Tests

- [ ] User says "re-analyze" with existing job history ‚Üí forces Mode 1
- [ ] User says "start fresh" ‚Üí deletes v2.0 file, forces Mode 1
- [ ] User says "add position" ‚Üí incremental update mode
- [ ] User says "edit position" ‚Üí incremental update mode
- [ ] User says "remove position" ‚Üí incremental update mode

### Incremental Update Tests

**Add Position:**
- [ ] Collects all required fields (job title, company, dates)
- [ ] Generates v2.0 sections (12 sections)
- [ ] Inserts at correct chronological position
- [ ] Recalculates total_years_experience
- [ ] Rebuilds skills aggregation
- [ ] Saves to v2.0 file
- [ ] Confirms addition with position count

**Edit Position:**
- [ ] Lists existing positions for selection
- [ ] Shows current values
- [ ] Updates selected fields
- [ ] Recalculates aggregates if dates changed
- [ ] Saves changes
- [ ] Confirms update

**Remove Position:**
- [ ] Lists positions for deletion
- [ ] Confirms with user (Are you sure?)
- [ ] Removes from array
- [ ] Recalculates aggregates
- [ ] Saves changes
- [ ] Confirms removal with new position count

### Re-Comparison Tests

- [ ] User provides JD identifier (company + job title)
- [ ] System finds cached JD from previous comparison
- [ ] Loads cached JD (skips re-parsing)
- [ ] Runs evidence matcher with CURRENT job history
- [ ] Generates diff output (improvements, no change, regressions)
- [ ] Shows score delta (e.g., 72% ‚Üí 81%)
- [ ] Stores versioned comparison (v1, v2)
- [ ] If cached JD not found, asks user to paste JD again

### Cache Management Tests

- [ ] "List saved JDs" ‚Üí shows all cached comparisons
- [ ] "Delete [Company] JD" ‚Üí removes specific cached JD
- [ ] "Clear JD cache" ‚Üí deletes all cached JDs
- [ ] Cache persists across sessions

---

## Dependencies

**Requires:**
- ‚úÖ v6.0.2 (Mode 1, Mode 3 enhancements)
- ‚úÖ Evidence matcher module

**Required by:**
- v6.0.4 (summary generator will use router context)

---

## Success Criteria

v6.0.3 is successful if:

1. ‚úÖ Router detects all 8 scenarios correctly (100%)
2. ‚úÖ JD validation avoids false positives (>95% accuracy)
3. ‚úÖ Override commands work reliably (100%)
4. ‚úÖ Incremental updates modify job history without errors
5. ‚úÖ Re-comparison generates diff output correctly
6. ‚úÖ JD cache persists across sessions
7. ‚úÖ User confirmation requested before all mode executions
8. ‚úÖ No regressions in existing functionality

---

## Issues & Mitigations

### Issue 1: JD Detection False Positives (from plan Issue #4)

**Problem:** LinkedIn posts or articles might look like JDs.

**Mitigation:**
- JD validation heuristics (length, keywords, structure)
- Low-confidence detection asks user to confirm
- User can always override with explicit command

### Issue 2: Incremental Update Complexity

**Problem:** Adding a position requires collecting all 12 sections.

**Mitigation:**
- Reuse Mode 1 question flow (same questions)
- Clear step-by-step prompts
- Allow partial data (mark missing sections as "Not specified")

### Issue 3: Re-Comparison JD Not Found

**Problem:** User wants to re-compare but didn't cache original JD.

**Mitigation:**
- Clear error message: "I don't have that JD saved"
- Ask user to paste JD again
- Parse and cache for future re-comparisons

---

## Next Steps

**After v6.0.3 Completes:**

1. **Git Workflow:**
   ```bash
   git checkout -b v6.0.3-router-workflows
   git add shared/modules/ PROJECT-INSTRUCTIONS.md
   mkdir -p /mnt/project/jd_parsed
   git commit -m "feat(v6.0.3): add workflow router, incremental updates, and re-comparison"
   git push origin v6.0.3-router-workflows
   ```

2. **Testing:**
   - Test all 8 routing scenarios
   - Test incremental updates (add/edit/remove)
   - Test re-comparison with cached JD
   - Test cache management commands

3. **Proceed to v6.0.4:**
   - Build professional summary generator
   - Add master summary (Mode 1)
   - Add per-JD summary customization (Mode 3)
   - Update documentation (CHANGELOG, PROJECT-INSTRUCTIONS)
   - See `/docs/plans/v6.0.4-summary-polish.md`

---

**Plan Created:** 2025-12-28
**Token Budget:** 49,000 tokens (estimated)
**Dependencies:** v6.0.2 (required)
**Next Phase:** v6.0.4 Summary & Polish


# --- FILE: docs/plans/v6.0.4-summary-polish.md ---


# v6.0.4 Summary & Polish - Final Integration & Documentation

**Version:** 6.0.4 (Part 4 of 4 - Final)
**Branch:** `v6.0.4-summary-polish`
**Token Budget:** 37,000 tokens (within 200K limit)
**Status:** Ready for Implementation

---

## Overview

This is the final phase of v6.0, adding professional summary generation and completing the system integration with full documentation.

**Goal:** Deliver the complete v6.0 feature set with polished UX and comprehensive documentation.

**Strategy:** Add summary generation module, update all documentation, perform final integration testing.

---

## Prerequisites

**Must have v6.0.3 completed:**
- ‚úÖ Workflow router exists and works
- ‚úÖ Incremental updates functional
- ‚úÖ Re-comparison workflow operational

---

## Scope

### ‚úÖ Included in v6.0.4

1. **Professional Summary Generator** - Master summary (Mode 1) + per-JD customization (Mode 3)
2. **Documentation Updates** - CHANGELOG, PROJECT-INSTRUCTIONS, settings files
3. **Final Integration Testing** - End-to-end workflows validated
4. **Progress Indicators** - User feedback during long operations

### ‚ùå Not Included

- Multi-track career support (removed from v6.0 per Opus Decision 1a)
- State recovery/checkpoints (not possible per Opus Decision 9)
- Performance benchmarks with time targets (per Opus Decision 10)

---

## Files to Create (1 New File)

### File 1: `/shared/modules/summary-generation.md`

**Purpose:** Generate professional summaries (master + per-JD customization)

**Size:** ~150 lines

**Content Structure:**
```xml
<summary_generator>
  <purpose>
    Generate two types of professional summaries:
    1. Master summary - Generic, comprehensive (stored in job history)
    2. Per-JD summary - Customized with JD keywords (ephemeral, not stored)
  </purpose>

  <master_summary_generation>
    <!-- For Mode 1: Job History Creation -->

    <trigger>After all positions extracted, before saving job history v2.0</trigger>

    <structure>
      3-4 sentences covering:
      1. Role + Scope (title, years of experience, industry)
      2. Achievements + Metrics (quantified results across career)
      3. Hard Skills (2-3 technical/measurable skills)
      4. Soft Skills (1-2 interpersonal/behavioral skills)
    </structure>

    <requirements>
      - Aggregate career metrics (total years, number of companies, team sizes)
      - Name-drop 2-3 recognizable companies (if applicable)
      - Include 2-3 hard skills from hard_skills_demonstrated arrays
      - Include 1-2 soft skills from soft_skills_demonstrated arrays
      - Quantify leadership scope (team size, budget, users, revenue)
    </requirements>

    <example>
      INPUT:
        positions = [
          {company: "Google", job_title: "Senior PM", dates: "2020-2023", ...},
          {company: "Salesforce", job_title: "PM", dates: "2018-2020", ...},
          {company: "StartupCo", job_title: "Associate PM", dates: "2016-2018", ...}
        ]

      OUTPUT:
        "Senior Product Manager with 8 years leading B2B SaaS products at Google and Salesforce.
        Launched 12+ revenue-generating features ($5M ARR), managed roadmaps for 500K+ users,
        and led cross-functional teams of 10+. Expert in Agile methodologies, JIRA, SQL, and
        data-driven prioritization. Known for exceptional stakeholder communication and ability
        to translate technical concepts for executive audiences."
    </example>

    <storage>
      SAVE to: job_history_v2.0.json ‚Üí master_summary field
      NOT per-position (this is aggregate across entire career)
    </storage>
  </master_summary_generation>

  <per_jd_summary_customization>
    <!-- For Mode 3: JD Comparison -->

    <trigger>
      After gap analysis completes, IF match_score >= 50:
        OFFER: "Would you like me to generate a customized professional summary for this JD?"
    </trigger>

    <timing>
      <!-- From plan Issue #5: Offer BEFORE or AFTER gap analysis? -->

      OPTION A (Early): After JD parsing, before gap analysis
        PRO: User gets summary immediately for application
        CON: Summary may not reflect gap insights

      OPTION B (Late): After gap analysis, as part of recommendations
        PRO: Summary can address specific gaps identified
        CON: User might want summary sooner

      DECISION: OPTION B (after gap analysis)
        RATIONALE: Summary should leverage gap insights to optimize keyword placement
    </timing>

    <customization_logic>
      STEP 1: Load master summary from job history
        base_summary = job_history_v2.0.master_summary

      STEP 2: Extract JD keywords (top 3-5 missing hard skills with "Partial" status)
        jd_keywords = gap_analysis
          .filter(r => r.subcategory === "Skills Needed" && r.status === "Partial")
          .slice(0, 5)
          .map(r => r.requirement)

      STEP 3: Replace generic hard skills with JD-specific keywords
        ORIGINAL: "Expert in Agile methodologies, JIRA, SQL, and data-driven decision-making"
        JD_KEYWORDS: ["Python", "AWS", "Kubernetes"]
        CUSTOMIZED: "Expert in Python, AWS cloud architecture, Kubernetes orchestration, and data-driven decision-making"

      STEP 4: Add JD-specific industry/domain terms
        IF jd.industry_domain in ["Fintech", "Healthcare", "E-commerce"]:
          ADD domain expertise mention

      STEP 5: Maintain metrics and achievements from master summary
        DO NOT change quantified results (team size, revenue, users)
        These are factual and should not be altered
    </customization_logic>

    <output_format>
      [PROFESSIONAL SUMMARY - CUSTOMIZED FOR THIS JD]

      {customized_summary}

      Changes Made:
      - Added JD keywords: "Python", "AWS", "Kubernetes"
      - Emphasized cloud architecture experience (from "Managed AWS deployments" achievement)
      - Retained leadership scope and metrics

      IMPORTANT: This summary is optimized for this specific JD. Copy it to your resume for this application.
    </output_format>

    <storage>
      NOT stored permanently - ephemeral (generated on-demand)
      User must copy/paste into their resume
    </storage>
  </per_jd_summary_customization>

  <edge_cases>
    <missing_master_summary>
      IF job_history_v2.0.master_summary is empty:
        Generate from scratch using all positions
        SAVE to job history for future use
    </missing_master_summary>

    <low_match_score>
      IF match_score < 50:
        DO NOT offer per-JD summary
        REASON: Too many gaps - customization won't help
    </low_match_score>

    <no_partial_skills>
      IF no "Partial" skills in gap analysis:
        Use matched skills as keywords instead
        CUSTOMIZE to emphasize JD-specific context
    </no_partial_skills>
  </edge_cases>

  <progress_indicators>
    <!-- Opus Decision 10: Show progress without time targets -->

    DURING MASTER SUMMARY GENERATION:
      "Generating professional summary..."
      "Aggregating career metrics..."
      "Selecting key achievements..."
      "Done. Summary added to job history."

    DURING PER-JD CUSTOMIZATION:
      "Customizing summary for this JD..."
      "Extracting JD keywords..."
      "Optimizing keyword placement..."
      "Done. Here's your customized summary:"
  </progress_indicators>
</summary_generator>
```

**Key Features (from plan + Opus review):**
- Master summary generation for Mode 1
- Per-JD customization for Mode 3
- Timing decision (after gap analysis)
- Edge case handling (missing summary, low score, no partials)
- Progress indicators without time estimates

---

## Files to Modify (4 Files - Surgical Changes)

### Modification 1: `PROJECT-INSTRUCTIONS.md`

**Changes:**

**Location 1: Lines 40-120 (Mode 1 job history creation) - UPDATE**
```xml
<!-- ADD to job history creation section -->
<professional_summary_generation>
  After extracting all positions:

  1. Use shared/modules/summary-generation.md to generate master summary
  2. Aggregate career metrics:
     - total_years_experience (sum of all position durations)
     - total_companies (count of unique companies)
     - max_team_size (largest team_scope across all positions)
     - notable_companies (Fortune 500, well-known brands)
  3. Generate 3-4 sentence summary
  4. Save to job_history_v2.0.master_summary

  DISPLAY to user:
    "‚úÖ Professional summary generated and saved."
</professional_summary_generation>
```

**Location 2: After Mode 1 completion message - UPDATE**
```xml
<!-- ENHANCE completion message -->
<mode_1_completion_message>
  "‚úÖ Analysis complete! Your job history has been saved.

  Your profile includes:
  - {N} positions analyzed
  - {X} hard skills identified, {Y} soft skills
  - Professional summary generated

  Note: Your job history is saved to files in this project. If you close this
  session, your data persists but conversation context is lost. Start a new
  session anytime - I'll pick up where you left off using your saved files.

  Next steps - What would you like to do?
  1. Optimize specific resume bullets (Mode 2)
  2. Check fit for a job description (Mode 3)
  3. Export job history for review

  Just let me know, or paste a job description to start Mode 3!"
</mode_1_completion_message>
```

**Location 3: Version number - UPDATE**
```xml
<version>6.0.4</version>
```

---

### Modification 2: `modes/mode-3-jd-comparison.md`

**Changes:**

**Location 1: After line 280 (per-JD summary placeholder) - REPLACE**
```xml
<!-- REPLACE placeholder with full implementation -->
<per_jd_summary_customization>
  After gap analysis completes:

  IF match_score >= 50:
    ASK USER: "Would you like me to generate a customized professional summary for this JD?"

    IF yes:
      1. Use shared/modules/summary-generation.md
      2. Load master summary from job history
      3. Extract top 3-5 JD keywords from "Partial" skills
      4. Customize summary with JD-specific keywords
      5. Present customized summary with change log
      6. Remind user to copy for this application

  IF match_score < 50:
    SKIP summary customization (too many gaps)
</per_jd_summary_customization>
```

**Location 2: Add progress indicators - NEW**
```xml
<!-- ADD progress indicators at key steps -->
<progress_indicators>
  STEP 1 (JD Parsing):
    "Parsing job description..."
    "Extracting skills and requirements..."

  STEP 2 (Gap Analysis):
    "Matching against your job history..."
    "Analyzing {total_requirements} requirements..."
    "Generating gap analysis..."

  STEP 3 (Summary Customization):
    "Customizing professional summary for this JD..."
    "Optimizing keyword placement..."

  FINAL:
    "Done."
</progress_indicators>
```

---

### Modification 3: `docs/CHANGELOG.md`

**Changes:**

**Location: After line 10 (add v6.0.0 entry)**
```markdown
## v6.0.0 - Complete Workflow System (2025-12-28)

### üö® BREAKING CHANGES

- **Job History Schema v2.0**: New schema with 12 sections (up from 8 in v1.0)
  - Added: `hard_skills_demonstrated`, `soft_skills_demonstrated`
  - Added: `education`, `certifications`, `tools_technologies`, `professional_summary`
  - Migration: Fresh start - no automatic migration from v1.0
  - Mode 2 maintains backward compatibility with v1.0

### ‚ú® Added

#### v6.0.1 - Foundation
- **Job History Schema v2.0** with hard/soft skills separation
- **Skills Categorizer** module with confidence scoring
- **17-Point JD Parser** restored from legacy system

#### v6.0.2 - Core Integration
- **Evidence-Based Matching** with requirement-by-requirement gap analysis
- **Mode 1 Enhancement**: Generate job history v2.0 format
- **Mode 3 Enhancement**: Use 17-point JD parsing + evidence matching
- **Blocking Gates**: Hard skill deficit, low match score, location mismatch (soft blocks with override)
- **Color-Coded Output**: [MATCHED] / [PARTIAL] / [MISSING] with evidence citations

#### v6.0.3 - Router & Workflows
- **Entry Point Router** with auto-detect + confirmation (8 scenarios)
- **Incremental Updates**: Add/edit/remove positions without full re-analysis
- **JD Re-Comparison**: Re-run comparison with updated job history + diff output
- **JD Cache**: Store parsed JDs for faster re-comparisons

#### v6.0.4 - Summary & Polish
- **Professional Summary Generation**:
  - Master summary (stored in job history)
  - Per-JD customization (ephemeral, keyword-optimized)
- **Progress Indicators**: User feedback during long operations
- **File Persistence Notifications**: Clear messaging about data storage

### üîÑ Changed

- **Mode 3 JD Parsing**: Upgraded from aggregate categories to 17-point schema
- **Gap Analysis**: Changed from category-level to requirement-by-requirement tracking
- **Evidence Citations**: Standardized format "Company | Job Title"
- **Blocking Gates**: Soft blocking with user override (not hard blocking)

### üêõ Fixed

- **Hard/Soft Skill Classification**: Confidence scoring to flag ambiguous skills
- **JD Detection**: Validation heuristics to avoid false positives
- **Evidence Source Formatting**: Consistent "Company | Title" format enforced

### üìö Documentation

- Added comprehensive implementation plans (v6.0.1 - v6.0.4)
- Updated PROJECT-INSTRUCTIONS.md with v6.0 features
- Added Opus review findings to planning docs

### üß™ Testing

- 31 must-have tests identified and validated
- Full end-to-end workflow testing completed
- Backward compatibility with v1.0 verified

### üìä Migration Guide

**From v5.1 to v6.0:**

1. **Job History**:
   - v1.0 files preserved (not deleted)
   - Mode 2 works with v1.0 (backward compatible)
   - Run Mode 1 to generate v2.0 job history
   - v2.0 recommended for better keyword matching

2. **Mode 3 JD Comparison**:
   - No action needed - automatically uses 17-point parser
   - Blocking gates now soft-blocking (allow override)

3. **Entry Point Router**:
   - Auto-routing with confirmation
   - Override commands: "re-analyze", "start fresh", "add position"

### ‚ö†Ô∏è Known Limitations

- Multi-track career support: Deferred to v6.2+
- State recovery/checkpoints: Not possible without environment control
- Performance time targets: Not documented (progress indicators without times)

---

## v5.1.0 - Remote Work Classification for Job Analysis (2025-12-28)

[Previous changelog entries preserved...]
```

---

### Modification 4: `settings.json` and `settings.local.json`

**Changes:**

**Add to both files:**
```json
{
  "job_history": {
    "schema_version": "2.0.0",
    "storage_path": "/mnt/project/",
    "v1_file": "claude_generated_job_history_summaries.txt",
    "v2_file": "claude_generated_job_history_summaries_v2.txt"
  },
  "jd_cache": {
    "enabled": true,
    "path": "/mnt/project/jd_parsed/",
    "retention_days": 90
  },
  "summary_generation": {
    "master_summary_auto_generate": true,
    "per_jd_summary_auto_offer": true,
    "min_match_score_for_customization": 50
  }
}
```

---

## Implementation Steps

### Step 1: Create Summary Generator Module
```bash
# Create summary-generation.md in shared/modules/
# Write master summary + per-JD customization logic
```

**Validation:**
- Test master summary generation with 3+ positions
- Test per-JD customization with sample JD
- Verify progress indicators display

---

### Step 2: Update PROJECT-INSTRUCTIONS.md
```bash
# Add summary generation to Mode 1 (lines 40-120)
# Enhance Mode 1 completion message
# Update version to 6.0.4
```

**Validation:**
- Mode 1 generates master summary
- Completion message shows profile stats
- File persistence notification displayed

---

### Step 3: Update mode-3-jd-comparison.md
```bash
# Replace per-JD summary placeholder (line 280)
# Add progress indicators
```

**Validation:**
- Per-JD summary offered after gap analysis (if score >= 50)
- Customization uses JD keywords
- Progress indicators show during analysis

---

### Step 4: Update CHANGELOG.md
```bash
# Add complete v6.0.0 entry
# Document all 4 sub-versions
# Add migration guide
```

**Validation:**
- All features documented
- Breaking changes clearly marked
- Migration guide complete

---

### Step 5: Update Settings Files
```bash
# Add v6.0 configuration to settings.json
# Add same to settings.local.json
```

**Validation:**
- Configuration valid JSON
- Paths correctly specified

---

## Testing Checklist

### Summary Generation Tests

**Master Summary:**
- [ ] Generates 3-4 sentence summary
- [ ] Aggregates career metrics (years, companies, team size)
- [ ] Includes 2-3 hard skills
- [ ] Includes 1-2 soft skills
- [ ] Name-drops 2-3 recognizable companies (if applicable)
- [ ] Quantifies leadership scope
- [ ] Saved to job_history_v2.0.master_summary

**Per-JD Customization:**
- [ ] Offered after gap analysis (if score >= 50)
- [ ] NOT offered if score < 50
- [ ] Loads master summary as baseline
- [ ] Extracts top 3-5 JD keywords from "Partial" skills
- [ ] Replaces generic hard skills with JD-specific keywords
- [ ] Maintains metrics and achievements from master
- [ ] Presents change log showing customizations
- [ ] Reminds user to copy for application

### Progress Indicator Tests

- [ ] Mode 1: Shows progress during position extraction
- [ ] Mode 3: Shows progress during JD parsing
- [ ] Mode 3: Shows progress during gap analysis
- [ ] Mode 3: Shows progress during summary customization
- [ ] No time estimates shown (per Opus Decision 10)

### Documentation Tests

- [ ] CHANGELOG has complete v6.0.0 entry
- [ ] Breaking changes clearly marked
- [ ] Migration guide provided
- [ ] All sub-versions documented
- [ ] Known limitations listed

### Settings Tests

- [ ] settings.json valid JSON
- [ ] Paths correctly specified
- [ ] Configuration values reasonable

### End-to-End Integration Tests

**Full Workflow 1: New User**
- [ ] User uploads resume
- [ ] Router detects new user ‚Üí routes to Mode 1
- [ ] Mode 1 generates job history v2.0 (all 12 sections)
- [ ] Master summary generated
- [ ] Completion message shows profile stats
- [ ] File persistence notification displayed
- [ ] Next steps offered (Mode 2, Mode 3)

**Full Workflow 2: JD Comparison**
- [ ] User with job history pastes JD
- [ ] Router detects JD ‚Üí routes to Mode 3
- [ ] JD parsed using 17-point schema
- [ ] Gap analysis performed (requirement-by-requirement)
- [ ] Evidence citations formatted correctly
- [ ] Blocking gates checked (soft blocking with override)
- [ ] Per-JD summary offered (if score >= 50)
- [ ] Summary customized with JD keywords

**Full Workflow 3: Incremental Update + Re-Comparison**
- [ ] User adds new position
- [ ] Job history v2.0 updated
- [ ] User requests re-comparison with previous JD
- [ ] Cached JD loaded
- [ ] Evidence matcher runs with UPDATED job history
- [ ] Diff generated (improvements, no change, score delta)

---

## Dependencies

**Requires:**
- ‚úÖ v6.0.3 (router, incremental updates, re-comparison)

**Required by:**
- None (this is the final phase)

---

## Success Criteria

v6.0.4 (and v6.0 overall) is successful if:

1. ‚úÖ Master summary generated for 100% of Mode 1 runs
2. ‚úÖ Per-JD summary offered when appropriate (score >= 50)
3. ‚úÖ Customization uses JD keywords correctly
4. ‚úÖ Progress indicators display during long operations
5. ‚úÖ CHANGELOG complete and accurate
6. ‚úÖ All end-to-end workflows tested and passing
7. ‚úÖ No regressions in existing functionality
8. ‚úÖ User documentation clear and comprehensive

---

## Final Deliverables

**After v6.0.4 Completes:**

### New Files Created (Across All Phases)
1. `shared/schemas/job-history-v2.0-schema.json`
2. `shared/modules/skills-categorizer.md`
3. `shared/modules/jd-processing.md`
4. `shared/modules/evidence-matching.md`
5. `shared/modules/workflow-router.md`
6. `shared/modules/summary-generation.md`
7. `docs/plans/v6.0.1-foundation.md`
8. `docs/plans/v6.0.2-core-integration.md`
9. `docs/plans/v6.0.3-router-workflows.md`
10. `docs/plans/v6.0.4-summary-polish.md`

### Files Modified (Across All Phases)
1. `PROJECT-INSTRUCTIONS.md`
2. `modes/mode-3-jd-comparison.md`
3. `modes/mode-2-bullet-optimization.md`
4. `docs/CHANGELOG.md`
5. `settings.json`
6. `settings.local.json`

### User Data Files
- `claude_generated_job_history_summaries_v2.txt` (generated by Mode 1)
- `/mnt/project/jd_parsed/*.json` (JD cache files)

**Total Implementation:**
- ~1,400 lines of new code
- ~420 lines of modified code
- 0 deletions (surgical additions only)
- 241,000 tokens across 4 phases

---

## Next Steps

**After v6.0.4 Completes:**

1. **Git Workflow:**
   ```bash
   git checkout -b v6.0.4-summary-polish
   git add shared/modules/ PROJECT-INSTRUCTIONS.md modes/ docs/ settings*
   git commit -m "feat(v6.0.4): add professional summary generation and complete v6.0 documentation"
   git push origin v6.0.4-summary-polish
   ```

2. **Merge All Sub-Versions:**
   ```bash
   git checkout -b v6.0-complete_workflow_system
   git merge v6.0.1-foundation
   git merge v6.0.2-core-integration
   git merge v6.0.3-router-workflows
   git merge v6.0.4-summary-polish
   git push origin v6.0-complete_workflow_system
   ```

3. **Create Pull Request:**
   - Title: "v6.0 Complete Workflow System"
   - Description: Copy from CHANGELOG v6.0.0 entry
   - Reference all 4 sub-version branches

4. **User Acceptance Testing:**
   - Test all workflows end-to-end
   - Validate with real resume + real JD
   - Verify backward compatibility with v1.0

5. **Release:**
   - Merge PR to main
   - Tag release: `git tag v6.0.0`
   - Update version in PROJECT-INSTRUCTIONS.md

---

## Post-Release

**Future Enhancements (v6.1+):**
- v6.1: Deferred test cases (summary edge cases, performance benchmarks)
- v6.2: Multi-track career support (PM vs Analyst tracks)
- v6.3: Advanced JD parsing (machine learning classification)
- v6.4: Export functionality (PDF, DOCX, JSON)

**User Feedback:**
- Monitor GitHub issues for bugs
- Collect feature requests
- Iterate based on real usage patterns

---

**Plan Created:** 2025-12-28
**Token Budget:** 37,000 tokens (estimated)
**Dependencies:** v6.0.3 (required)
**Status:** Final Phase - Ready for Implementation


# --- FILE: docs/plans/v6.0.5-docs_cleanup.md ---


# v6.0.5 - Documentation Cleanup & Structural Reorganization

**Branch:** `v6.0.5-docs_cleanup`
**Date:** 2025-12-29
**Type:** PATCH (Documentation & structure cleanup, no functional changes)

---

## üéØ Objectives

1. **Rename `/shared/` ‚Üí `/phases/`** - More intuitive naming for v6.0 modular architecture
2. **Remove outdated files** - Delete/archive v5.0 legacy files no longer referenced
3. **Create new wireframes** - Visual documentation for v6.0 workflow (ASCII + Mermaid)
4. **Update all references** - Ensure PROJECT-INSTRUCTIONS.md and other files point to correct paths
5. **Consolidate test cases** - Organize test documentation for v6.0.1-6.0.4

---

## üìÅ Folder Structure Changes

### Before (v6.0.4)
```
/optimize-my-resume/
‚îú‚îÄ‚îÄ /shared/                        ‚Üê Confusing name
‚îÇ   ‚îú‚îÄ‚îÄ /phase-1/
‚îÇ   ‚îú‚îÄ‚îÄ /phase-2/
‚îÇ   ‚îú‚îÄ‚îÄ /phase-3/
‚îÇ   ‚îú‚îÄ‚îÄ /phase-4/
‚îÇ   ‚îú‚îÄ‚îÄ /v5-legacy/                 ‚Üê Outdated
‚îÇ   ‚îî‚îÄ‚îÄ opus-handoff.md             ‚Üê Temporary artifact
‚îú‚îÄ‚îÄ /modes/                         ‚Üê v5.0 files (not referenced)
‚îú‚îÄ‚îÄ /wireframes/                    ‚Üê v5.0 wireframes (outdated)
‚îú‚îÄ‚îÄ CHANGELOG.md (root)             ‚Üê Duplicate/outdated
‚îî‚îÄ‚îÄ ADD_REMOTE_WORK_LOGIC.md        ‚Üê v5.1 prompt (obsolete)
```

### After (v6.0.5)
```
/optimize-my-resume/
‚îú‚îÄ‚îÄ /phases/                        ‚Üê Renamed from /shared/
‚îÇ   ‚îú‚îÄ‚îÄ /phase-1/                   ‚Üê Foundation (v6.0.1)
‚îÇ   ‚îú‚îÄ‚îÄ /phase-2/                   ‚Üê Core Integration (v6.0.2)
‚îÇ   ‚îú‚îÄ‚îÄ /phase-3/                   ‚Üê Router & Workflows (v6.0.3)
‚îÇ   ‚îî‚îÄ‚îÄ /phase-4/                   ‚Üê Summary & Polish (v6.0.4)
‚îú‚îÄ‚îÄ /wireframes/                    ‚Üê NEW: v6.0 visual documentation
‚îÇ   ‚îú‚îÄ‚îÄ phase-1-foundation.md       ‚Üê ASCII + Mermaid
‚îÇ   ‚îú‚îÄ‚îÄ phase-2-core-integration.md
‚îÇ   ‚îú‚îÄ‚îÄ phase-3-router-workflows.md
‚îÇ   ‚îú‚îÄ‚îÄ phase-4-summary-polish.md
‚îÇ   ‚îî‚îÄ‚îÄ complete-workflow.md        ‚Üê End-to-end v6.0 flow
‚îú‚îÄ‚îÄ /docs/legacy/                   ‚Üê NEW: Archived obsolete files
‚îÇ   ‚îú‚îÄ‚îÄ /modes-v5/                  ‚Üê Moved from /modes/
‚îÇ   ‚îú‚îÄ‚îÄ /wireframes-v5/             ‚Üê Moved from /wireframes/
‚îÇ   ‚îú‚îÄ‚îÄ /shared-v5/                 ‚Üê v5-legacy subfolder
‚îÇ   ‚îú‚îÄ‚îÄ CHANGELOG-v5.md             ‚Üê Root CHANGELOG.md
‚îÇ   ‚îî‚îÄ‚îÄ ADD_REMOTE_WORK_LOGIC.md    ‚Üê v5.1 implementation prompt
‚îî‚îÄ‚îÄ (CHANGELOG.md removed)          ‚Üê Duplicate deleted
```

---

## üóÇÔ∏è Detailed File Operations

### Phase 1: Rename `/shared/` ‚Üí `/phases/`

**Files to rename:**
```bash
mv shared/ phases/
```

**References to update:**
1. `PROJECT-INSTRUCTIONS.md` - All `shared/phase-X/` ‚Üí `phases/phase-X/`
2. `README.md` - File structure diagram
3. `docs/CHANGELOG.md` - v6.0.0 entry references
4. `ROADMAP.md` - Phase tracking references
5. `quick-start-mode.md` - If any references exist

**Expected changes:** ~15-20 file path updates across 5 files

---

### Phase 2: Archive Obsolete Files

#### 2.1 Create Legacy Archive Directory
```bash
mkdir -p docs/legacy/{modes-v5,wireframes-v5,shared-v5,implementation-prompts}
```

#### 2.2 Move Outdated Files

**From `/modes/` (v5.0 - Not referenced):**
```bash
mv modes/mode-1-full-analysis.md docs/legacy/modes-v5/
mv modes/mode-2-bullet-optimization.md docs/legacy/modes-v5/
mv modes/mode-3-jd-comparison.md docs/legacy/modes-v5/
rmdir modes/  # Remove empty directory
```

**From `/wireframes/` (v5.0 - Outdated):**
```bash
mv wireframes/mode-1-workflow.md docs/legacy/wireframes-v5/
mv wireframes/mode-2-workflow.md docs/legacy/wireframes-v5/
mv wireframes/mode-3-workflow.md docs/legacy/wireframes-v5/
rmdir wireframes/  # Will be recreated with v6.0 wireframes
```

**From `/phases/v5-legacy/` (Renamed from `/shared/v5-legacy/`):**
```bash
mv phases/v5-legacy/initial-greeting.md docs/legacy/shared-v5/
mv phases/v5-legacy/job-summary-creation.md docs/legacy/shared-v5/
rmdir phases/v5-legacy/
```

**Root-level obsolete files:**
```bash
mv CHANGELOG.md docs/legacy/CHANGELOG-v5.md  # Duplicate, outdated
mv ADD_REMOTE_WORK_LOGIC.md docs/legacy/implementation-prompts/
mv phases/opus-handoff.md docs/plans/archive/opus-handoff.md
```

#### 2.3 Create Legacy README
```bash
# Create docs/legacy/README.md explaining what's archived and why
```

---

### Phase 3: Create New Wireframes (v6.0)

Create `/wireframes/` directory with comprehensive visual documentation.

#### 3.1 Phase-Specific Wireframes (5 files)

Each file contains:
1. **ASCII diagram** - Terminal-friendly visualization
2. **Mermaid diagram** - GitHub-rendered flowchart
3. **Phase description** - What happens, inputs/outputs, files involved

**Files to create:**

1. **`wireframes/phase-1-foundation.md`**
   - Job History v2.0 creation flow
   - 17-point JD parsing flow
   - Entry router decision tree

2. **`wireframes/phase-2-core-integration.md`**
   - Evidence matching flow (requirement-by-requirement)
   - Blocking gates logic
   - Mode 1 & Mode 3 enhancements

3. **`wireframes/phase-3-router-workflows.md`**
   - 8-scenario routing flowchart
   - Incremental update workflow
   - JD re-comparison with diff

4. **`wireframes/phase-4-summary-polish.md`**
   - Master summary generation
   - Per-JD summary customization flow

5. **`wireframes/complete-workflow.md`**
   - End-to-end user journey (all 3 modes)
   - Entry routing ‚Üí Mode execution ‚Üí Output
   - State transitions between modes

#### 3.2 Wireframe Template Structure

Each wireframe follows this format:

```markdown
# Phase X - [Phase Name]

**Version:** 1.0
**Last Updated:** 2025-12-29
**Related Modules:** phases/phase-X/

---

## Overview
[Brief description of what this phase does]

## ASCII Diagram
[Terminal-friendly ASCII art flowchart]

## Mermaid Diagram
[GitHub-rendered Mermaid flowchart]

## Inputs
- [What data/files are required]

## Outputs
- [What gets generated/modified]

## Files Involved
- phases/phase-X/[module].md

## Decision Points
- [Key branching logic]
```

---

### Phase 4: Update Documentation References

#### 4.1 Files Requiring Updates

**`PROJECT-INSTRUCTIONS.md`:**
- Change: `shared/phase-1/` ‚Üí `phases/phase-1/`
- Change: `shared/phase-2/` ‚Üí `phases/phase-2/`
- Change: `shared/phase-3/` ‚Üí `phases/phase-3/`
- Change: `shared/phase-4/` ‚Üí `phases/phase-4/`
- Estimated: 15-20 occurrences

**`README.md`:**
- Update file structure tree
- Change: `/shared/` ‚Üí `/phases/`
- Update folder descriptions

**`docs/CHANGELOG.md`:**
- Update v6.0.0 entry references
- Add v6.0.5 entry documenting cleanup

**`ROADMAP.md`:**
- Update phase tracking references
- Add v6.0.5 entry

**`quick-start-mode.md`:**
- Check for any `shared/` references (unlikely but verify)

---

## üìã Test Case Recommendations

### Current State

**Existing test files:**
- `docs/plans/v6.0-deep-dive-test-cases.md` - General v6.0 test cases (95+ tests)
- Referenced in v6.0.1 context but covers all phases

### Recommendation 1: Consolidate Test Documentation

**Option A: Keep as-is**
- Single comprehensive test file covers all v6.0 features
- Easier to maintain (one source of truth)
- Risk: May become too large/unwieldy

**Option B: Split by phase** (RECOMMENDED)
- Create phase-specific test files:
  - `docs/plans/test-cases-phase-1.md` (Foundation)
  - `docs/plans/test-cases-phase-2.md` (Core Integration)
  - `docs/plans/test-cases-phase-3.md` (Router & Workflows)
  - `docs/plans/test-cases-phase-4.md` (Summary & Polish)
- Keep `v6.0-deep-dive-test-cases.md` as master reference
- Benefits: Easier to navigate, clearer ownership

### Recommendation 2: Test Case Coverage

**Current coverage (from v6.0-deep-dive-test-cases.md):**
- ‚úÖ JD Parser: 22 test cases
- ‚úÖ Skills Categorizer: 25 test cases
- ‚úÖ Evidence Matcher: 16 test cases
- ‚úÖ Router: 17 test cases
- ‚úÖ Summary Generator: 8 test cases
- **Total: 95+ test cases**

**Missing coverage:**
- ‚ö†Ô∏è Phase 2 integration tests (Mode 1 ‚Üí Mode 3 flow)
- ‚ö†Ô∏è Phase 3 incremental update edge cases
- ‚ö†Ô∏è Phase 3 re-comparison diff accuracy
- ‚ö†Ô∏è Phase 4 professional summary validation

### Recommendation 3: Should Opus Create Phase-Specific Tests?

**Question:** Should I ask Opus to create test cases for v6.0.2-6.0.4 to validate implementation?

**Analysis:**

**Pros:**
- ‚úÖ Comprehensive validation of implementation vs plan
- ‚úÖ Opus has context on original design intent
- ‚úÖ Can identify gaps in current test coverage
- ‚úÖ Phase-specific tests easier to maintain

**Cons:**
- ‚ùå May duplicate existing test cases
- ‚ùå Time investment (Opus needs context for each phase)
- ‚ùå v6.0 already implemented - retroactive testing less valuable

**RECOMMENDED APPROACH:**

**Option 1: Targeted Gap-Filling** (RECOMMENDED)
- Review existing `v6.0-deep-dive-test-cases.md`
- Identify gaps in Phase 2-4 coverage
- Ask Opus to create ONLY missing test cases
- Append to existing file or create supplements

**Option 2: Full Phase-Specific Test Suite**
- Ask Opus to create comprehensive test suites for each phase
- Use existing tests as baseline, expand with implementation details
- More thorough but time-intensive

**Option 3: Skip for now**
- v6.0 already released and documented
- Focus on v6.1+ testing when new features are added
- Use existing 95+ tests as sufficient coverage

**MY RECOMMENDATION:** **Option 1 - Targeted Gap-Filling**

**Action items:**
1. Read `v6.0-deep-dive-test-cases.md` to identify gaps
2. Create a "Test Coverage Gap Analysis" section
3. Request Opus to fill specific gaps:
   - Mode 1 ‚Üí Mode 3 integration flow
   - Incremental update edge cases (add/edit/remove)
   - Re-comparison diff accuracy
   - Professional summary validation
4. Append new tests to existing file with clear section headers

---

## üîÑ Implementation Sequence

### Step 1: Rename & Update References (30 min)
1. Rename `shared/` ‚Üí `phases/`
2. Update PROJECT-INSTRUCTIONS.md references (15-20 changes)
3. Update README.md, CHANGELOG.md, ROADMAP.md
4. Test: Search for any remaining `shared/` references

### Step 2: Archive Obsolete Files (15 min)
1. Create `docs/legacy/` directory structure
2. Move `/modes/` ‚Üí `docs/legacy/modes-v5/`
3. Move `/wireframes/` ‚Üí `docs/legacy/wireframes-v5/`
4. Move root obsolete files (CHANGELOG.md, ADD_REMOTE_WORK_LOGIC.md)
5. Move `phases/v5-legacy/` ‚Üí `docs/legacy/shared-v5/`
6. Create `docs/legacy/README.md`

### Step 3: Create New Wireframes (60 min)
1. Create `/wireframes/` directory
2. Write `phase-1-foundation.md` (ASCII + Mermaid)
3. Write `phase-2-core-integration.md` (ASCII + Mermaid)
4. Write `phase-3-router-workflows.md` (ASCII + Mermaid)
5. Write `phase-4-summary-polish.md` (ASCII + Mermaid)
6. Write `complete-workflow.md` (end-to-end flow)

### Step 4: Documentation Updates (20 min)
1. Update CHANGELOG.md with v6.0.5 entry
2. Update ROADMAP.md with v6.0.5 entry
3. Verify all documentation links work

### Step 5: Git Operations (10 min)
1. Stage all changes
2. Commit with structured message
3. Push to origin

**Total estimated time:** ~2 hours

---

## ‚úÖ Success Criteria

### Functional
- [ ] All `/shared/` references updated to `/phases/`
- [ ] No broken file paths in PROJECT-INSTRUCTIONS.md
- [ ] README.md file structure accurate
- [ ] All obsolete files archived (not deleted)

### Documentation
- [ ] 5 new wireframes created (ASCII + Mermaid)
- [ ] `docs/legacy/README.md` explains what's archived
- [ ] CHANGELOG.md v6.0.5 entry complete
- [ ] ROADMAP.md v6.0.5 entry complete

### Testing
- [ ] Test plan recommendation documented
- [ ] Gap analysis complete (if pursuing Option 1)

### Quality
- [ ] No duplicate files across legacy and active directories
- [ ] Clear separation: active (phases/), legacy (docs/legacy/), plans (docs/plans/)
- [ ] All inline version comments updated (v6.0.5)

---

## üìä File Impact Summary

**Files to rename:** 1 directory (`shared/` ‚Üí `phases/`)
**Files to move:** ~12 files (to `docs/legacy/`)
**Files to delete:** 1 file (root `CHANGELOG.md` duplicate)
**Files to create:** 6 files (5 wireframes + legacy README)
**Files to modify:** 5 files (PROJECT-INSTRUCTIONS.md, README.md, CHANGELOG.md, ROADMAP.md, quick-start-mode.md)

**Total changes:** ~25 file operations

---

## üîç Validation Steps

### Pre-Commit Checks
```bash
# 1. Search for remaining shared/ references
grep -r "shared/" --exclude-dir=".git" --exclude-dir="docs/legacy"

# 2. Verify phases/ references work
grep -r "phases/phase-1" PROJECT-INSTRUCTIONS.md

# 3. Check for duplicate files
find . -name "*.md" -type f | sort | uniq -d

# 4. Verify no broken symlinks
find . -type l ! -exec test -e {} \; -print
```

### Post-Commit Checks
```bash
# 1. Test PROJECT-INSTRUCTIONS.md loads in Claude
# (Manual: Copy to Claude Project, verify no errors)

# 2. Verify wireframes render on GitHub
# (Manual: Check wireframes/ directory on GitHub web)

# 3. Confirm legacy files preserved
ls -la docs/legacy/modes-v5/
ls -la docs/legacy/wireframes-v5/
```

---

## üìù Commit Message Template

```
refactor(v6.0.5): documentation cleanup and structural reorganization

BREAKING CHANGES:
- Renamed /shared/ ‚Üí /phases/ for clearer v6.0 architecture naming
- Moved v5.0 legacy files to /docs/legacy/ (modes, wireframes, prompts)
- Deleted duplicate root CHANGELOG.md (docs/CHANGELOG.md is canonical)

Added:
- 5 new v6.0 wireframes (ASCII + Mermaid) for each phase + complete workflow
- docs/legacy/ directory with organized v5.0 archival
- docs/legacy/README.md explaining archived content

Changed:
- Updated all references: shared/phase-X/ ‚Üí phases/phase-X/
- PROJECT-INSTRUCTIONS.md: 15 path updates
- README.md: File structure diagram updated
- CHANGELOG.md: v6.0.5 entry added
- ROADMAP.md: v6.0.5 tracking added

Removed:
- /modes/ directory (moved to docs/legacy/modes-v5/)
- /wireframes/ directory (v5.0 wireframes moved to docs/legacy/wireframes-v5/)
- /shared/v5-legacy/ (moved to docs/legacy/shared-v5/)
- Root CHANGELOG.md (duplicate, outdated)
- ADD_REMOTE_WORK_LOGIC.md (v5.1 prompt, archived)

Impact:
- No functional changes - purely documentation and structure
- All v6.0 modules remain intact (phases/phase-1 through phase-4)
- Improved repository navigation and clarity
- Clear separation: active code vs legacy vs plans

ü§ñ Generated with [Claude Code](https://claude.com/claude-code)

Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>
```

---

## üöÄ Next Steps (Post-v6.0.5)

### Immediate (v6.0.6 potential)
1. **Test case gap-filling** - Implement Recommendation Option 1
2. **Wireframe validation** - Get user feedback on ASCII vs Mermaid preference
3. **Legacy cleanup review** - Confirm nothing important was archived

### Future (v6.1.0+)
1. **Output specification templates** - From ROADMAP backlog
2. **Enhanced error messages (E001-E008)** - From ROADMAP
3. **Batch JD comparison** - From ROADMAP backlog

---

**Plan Status:** READY FOR EXECUTION
**Created:** 2025-12-29
**Next Step:** Execute Phase 1 (Rename & Update References)


# --- FILE: docs/plans/v6.1.0.md ---


# v6.1.0 - Documentation Enhancement & Structural Reorganization

**Version:** 6.1.0 (MINOR - New features + documentation enhancements)
**Branch:** `v6.1.0`
**Date:** 2025-12-29
**Type:** MINOR (New features: Job Summary documentation, enhanced wireframes, terminology consistency)

---

## üéØ Overview

v6.1.0 introduces documentation enhancements, structural reorganization, and terminology consistency across the project. Unlike v6.0.5 (cleanup-only), this is a MINOR version bump because we're adding:
- **New feature documentation:** Job Summary usage guide
- **New wireframes:** 10 comprehensive visual guides (ASCII + Mermaid)
- **Enhanced test coverage:** Gap-filling test cases for Phases 2-4

---

## üìã Sub-Version Strategy

Instead of one large v6.1.0 commit, we'll use semantic sub-versioning:

| Sub-Version | Focus | Files Modified | Plan Document |
|-------------|-------|----------------|---------------|
| **v6.1.1** | Folder restructure (`/shared/` ‚Üí `/phases/`) | 5 files | `v6.1.1-folder-restructure.md` |
| **v6.1.2** | Documentation updates (README, CHANGELOG, ROADMAP) | 4 files | `v6.1.2-documentation-updates.md` |
| **v6.1.3** | Wireframe creation (10 new files) | 10 files | `v6.1.3-wireframes.md` |
| **v6.1.4** | Legacy archival (obsolete files cleanup) | ~12 files | `v6.1.4-legacy-archival.md` |
| **v6.1.5** | Test case gap-filling (Opus deliverable) | 1 file | `v6.1.5-test-gaps.md` |

Each sub-version gets:
- ‚úÖ Its own plan document in `/docs/plans/`
- ‚úÖ Its own git commit with conventional commit message
- ‚úÖ ROADMAP tracking entry
- ‚úÖ CHANGELOG entry (consolidated in v6.1.0 final release)

---

## üóÇÔ∏è Sub-Version Details

### v6.1.1 - Folder Restructure

**Goal:** Rename `/shared/` ‚Üí `/phases/` for clearer architecture naming

**Changes:**
1. Rename directory: `mv shared/ phases/`
2. Update references in:
   - `PROJECT-INSTRUCTIONS.md` (~15 occurrences)
   - `README.md` (file structure tree)
   - `docs/CHANGELOG.md` (v6.0.0 entry)
   - `ROADMAP.md` (phase tracking)
   - `quick-start-mode.md` (if any references)

**Success Criteria:**
- [ ] All `shared/phase-X/` references changed to `phases/phase-X/`
- [ ] No broken file paths
- [ ] Search returns 0 results for `shared/phase-` (excluding docs/legacy)

**Estimated Time:** 30 minutes

---

### v6.1.2 - Documentation Updates

**Goal:** Update terminology (Mode ‚Üí Phase) and add Job Summary feature documentation

**Changes:**

#### README.md Updates (28 occurrences)

**Section 1: Mode ‚Üí Phase Terminology**
- Line 11-13: "Mode 1/2/3" ‚Üí "Phase 1/2/3" (What This System Does)
- Line 30: "Makes Mode 3 much better" ‚Üí "Makes Phase 3 much better"
- Line 65-67: Mode references in Claude instructions ‚Üí Phase references
- Line 252, 257, 262: Tip section headers (Mode ‚Üí Phase)
- Line 268: "After Mode 1 analyzes" ‚Üí "After Phase 1 analyzes"
- Line 283-285: Troubleshooting section (Mode ‚Üí Phase)
- Line 304: Section header "What Each Mode Does" ‚Üí "What Each Phase Does"
- Line 306, 330, 347: Subsection headers (Mode ‚Üí Phase)
- Line 378: "How to Use All Three Modes Together" ‚Üí "How to Use All Three Phases Together"
- Line 382, 388, 393, 399: Workflow steps (Mode ‚Üí Phase)
- Line 492: FAQ answer (Mode ‚Üí Phase)

**Section 2: Job Summary Feature Documentation** (NEW)

Add new tip section after Line 271:

```markdown
### 5. **Use Job Summary Generation for Applications**
   - After Phase 3 analyzes a job description, ask: "Create a professional summary for this job"
   - The system generates TWO types of summaries:
     - **Master Summary:** Comprehensive overview of your entire career (stored in job history)
     - **Per-JD Summary:** Customized version optimized for the specific job posting (ephemeral)
   - **Use cases:**
     - Cover letters: Lead with the per-JD summary
     - LinkedIn applications: Paste customized summary in "Why are you interested?" section
     - Email applications: Include in the body to show tailored interest
   - **Pro tip:** The per-JD summary includes JD keywords for ATS optimization
```

**Section 3: Version Update**
- Line 407-408: Update version from 6.0.0 ‚Üí 6.1.0
- Line 411: "What's New in v6.0" ‚Üí "What's New in v6.1"
- Add v6.1.0 feature list:
  ```markdown
  ### What's New in v6.1:
  - **Enhanced Documentation** - Consistent phase terminology across all docs
  - **Job Summary Usage Guide** - Clear instructions for professional summary generation
  - **Visual Wireframes** - 10 comprehensive workflow diagrams (ASCII + Mermaid)
  - **Improved File Structure** - `/phases/` folder for clearer organization
  - **Expanded Test Coverage** - 30+ new test cases for Phases 2-4
  ```

#### CHANGELOG.md Update

Add v6.1.0 entry:

```markdown
### v6.1.0 - Documentation Enhancement & Job Summary Guide (2025-12-29)
> **Branch:** `v6.1.0`

#### Added
- **Job Summary Usage Guide** - New tip section in README explaining how to use professional summary generation
  - Master summary vs per-JD summary differences
  - Use cases (cover letters, LinkedIn, email applications)
  - ATS keyword optimization tip
- **Comprehensive Wireframes** - 10 visual workflow guides (5 ASCII + 5 Mermaid)
  - Phase 1: Foundation (job history v2.0, JD parser, entry router)
  - Phase 2: Core Integration (evidence matching, blocking gates)
  - Phase 3: Router & Workflows (8-scenario routing, incremental updates)
  - Phase 4: Summary & Polish (professional summary generation)
  - Complete Workflow: End-to-end user journey
- **Test Case Expansion** - 30+ new test cases for Phases 2-4
  - Integration flow tests (Phase 1 ‚Üí Phase 3)
  - Incremental update edge cases
  - Re-comparison diff accuracy validation
  - Professional summary quality checks

#### Changed
- **Terminology Consistency** - "Mode 1/2/3" ‚Üí "Phase 1/2/3" across all user-facing documentation
  - README.md: 28 occurrences updated
  - quick-start-mode.md: Updated to use phase terminology
  - Consistent with internal architecture (`/phases/` folder structure)
- **Folder Structure** - Renamed `/shared/` ‚Üí `/phases/` for clearer naming
  - Updated all references in PROJECT-INSTRUCTIONS.md, README.md, CHANGELOG.md, ROADMAP.md
- **Version Numbering** - Updated README from v6.0.0 ‚Üí v6.1.0

#### Removed
- **Obsolete v5.0 Files** - Archived to `/docs/legacy/`
  - `/modes/` directory ‚Üí `/docs/legacy/modes-v5/`
  - `/wireframes/` (v5.0) ‚Üí `/docs/legacy/wireframes-v5/`
  - `/phases/v5-legacy/` ‚Üí `/docs/legacy/shared-v5/`
  - Root `CHANGELOG.md` (duplicate) ‚Üí `/docs/legacy/CHANGELOG-v5.md`
  - `ADD_REMOTE_WORK_LOGIC.md` ‚Üí `/docs/legacy/implementation-prompts/`

#### Impact
- ‚úÖ Clearer user experience with consistent terminology
- ‚úÖ Better onboarding with Job Summary usage guide
- ‚úÖ Improved developer experience with visual wireframes
- ‚úÖ Cleaner repository structure with legacy files archived
```

#### ROADMAP.md Update

Add v6.1.0 entry:

```markdown
### v6.1.0 - Documentation Enhancement (COMPLETE)
**Branch:** `v6.1.0` | **Status:** Complete | **Date:** 2025-12-29

**Sub-Versions:**
- [x] v6.1.1 - Folder restructure (`/shared/` ‚Üí `/phases/`)
- [x] v6.1.2 - Documentation updates (terminology + Job Summary guide)
- [x] v6.1.3 - Wireframe creation (10 files)
- [x] v6.1.4 - Legacy archival
- [x] v6.1.5 - Test case gap-filling

**Features:**
- [x] Job Summary usage guide in README
- [x] Terminology consistency (Mode ‚Üí Phase)
- [x] 10 comprehensive wireframes (ASCII + Mermaid)
- [x] 30+ new test cases for Phases 2-4
- [x] Legacy file archival to /docs/legacy/

**Notes:** Documentation-focused release improving user experience and developer onboarding.
```

**Success Criteria:**
- [ ] README has Job Summary tip section
- [ ] All 28 Mode‚ÜíPhase references updated
- [ ] Version updated to 6.1.0
- [ ] CHANGELOG v6.1.0 entry complete
- [ ] ROADMAP v6.1.0 tracking added

**Estimated Time:** 45 minutes

---

### v6.1.3 - Wireframe Creation

**Goal:** Create 10 comprehensive visual workflow guides (5 ASCII + 5 Mermaid)

**Wireframe Structure:**

Each phase gets **2 files**:
1. `wireframes/phase-X-[name]-ascii.md` - ASCII diagram (terminal-friendly)
2. `wireframes/phase-X-[name]-mermaid.md` - Mermaid flowchart (GitHub-rendered)

**Files to Create:**

1. **Phase 1 - Foundation**
   - `wireframes/phase-1-foundation-ascii.md`
   - `wireframes/phase-1-foundation-mermaid.md`
   - Content: Job history v2.0 creation, 17-point JD parsing, entry router

2. **Phase 2 - Core Integration**
   - `wireframes/phase-2-core-integration-ascii.md`
   - `wireframes/phase-2-core-integration-mermaid.md`
   - Content: Evidence matching flow, blocking gates logic, Mode enhancements

3. **Phase 3 - Router & Workflows**
   - `wireframes/phase-3-router-workflows-ascii.md`
   - `wireframes/phase-3-router-workflows-mermaid.md`
   - Content: 8-scenario routing, incremental updates, JD re-comparison

4. **Phase 4 - Summary & Polish**
   - `wireframes/phase-4-summary-polish-ascii.md`
   - `wireframes/phase-4-summary-polish-mermaid.md`
   - Content: Master summary generation, per-JD customization

5. **Complete Workflow**
   - `wireframes/complete-workflow-ascii.md`
   - `wireframes/complete-workflow-mermaid.md`
   - Content: End-to-end user journey (entry ‚Üí routing ‚Üí execution ‚Üí output)

**Wireframe Template:**

Each file follows this structure:

```markdown
# [Phase Name] - [ASCII/Mermaid]

**Version:** 1.0
**Last Updated:** 2025-12-29
**Related Modules:** `phases/phase-X/`

---

## Overview
[Brief description of what this phase does]

## Diagram

[ASCII art or Mermaid code here]

## Key Decision Points
- [Branching logic 1]
- [Branching logic 2]

## Inputs
- [Required data/files]

## Outputs
- [What gets generated/modified]

## Files Involved
- `phases/phase-X/[module].md`

## Related Phases
- **Previous:** [Link to previous phase]
- **Next:** [Link to next phase]
```

**Success Criteria:**
- [ ] 10 wireframe files created (5 ASCII + 5 Mermaid)
- [ ] All diagrams render correctly (ASCII in terminal, Mermaid on GitHub)
- [ ] Each wireframe has overview, diagram, inputs, outputs, files
- [ ] Cross-references between phases working

**Estimated Time:** 90 minutes

---

### v6.1.4 - Legacy Archival

**Goal:** Archive obsolete v5.0 files to `/docs/legacy/`

**Directory Structure:**

```
docs/legacy/
‚îú‚îÄ‚îÄ README.md                           ‚Üê Explains what's archived and why
‚îú‚îÄ‚îÄ modes-v5/
‚îÇ   ‚îú‚îÄ‚îÄ mode-1-full-analysis.md
‚îÇ   ‚îú‚îÄ‚îÄ mode-2-bullet-optimization.md
‚îÇ   ‚îî‚îÄ‚îÄ mode-3-jd-comparison.md
‚îú‚îÄ‚îÄ wireframes-v5/
‚îÇ   ‚îú‚îÄ‚îÄ mode-1-workflow.md
‚îÇ   ‚îú‚îÄ‚îÄ mode-2-workflow.md
‚îÇ   ‚îî‚îÄ‚îÄ mode-3-workflow.md
‚îú‚îÄ‚îÄ shared-v5/
‚îÇ   ‚îú‚îÄ‚îÄ initial-greeting.md
‚îÇ   ‚îî‚îÄ‚îÄ job-summary-creation.md
‚îú‚îÄ‚îÄ implementation-prompts/
‚îÇ   ‚îî‚îÄ‚îÄ ADD_REMOTE_WORK_LOGIC.md
‚îî‚îÄ‚îÄ CHANGELOG-v5.md                     ‚Üê Root CHANGELOG.md (duplicate)
```

**File Operations:**

```bash
# Create legacy directory structure
mkdir -p docs/legacy/{modes-v5,wireframes-v5,shared-v5,implementation-prompts}

# Move modes (v5.0 - not referenced)
mv modes/mode-1-full-analysis.md docs/legacy/modes-v5/
mv modes/mode-2-bullet-optimization.md docs/legacy/modes-v5/
mv modes/mode-3-jd-comparison.md docs/legacy/modes-v5/
rmdir modes/

# Move wireframes (v5.0 - outdated)
mv wireframes/mode-1-workflow.md docs/legacy/wireframes-v5/
mv wireframes/mode-2-workflow.md docs/legacy/wireframes-v5/
mv wireframes/mode-3-workflow.md docs/legacy/wireframes-v5/
rmdir wireframes/  # Will be recreated with v6.1 wireframes

# Move shared v5-legacy
mv phases/v5-legacy/initial-greeting.md docs/legacy/shared-v5/
mv phases/v5-legacy/job-summary-creation.md docs/legacy/shared-v5/
rmdir phases/v5-legacy/

# Move root obsolete files
mv CHANGELOG.md docs/legacy/CHANGELOG-v5.md
mv ADD_REMOTE_WORK_LOGIC.md docs/legacy/implementation-prompts/

# Move Opus handoff (temporary artifact)
mv phases/opus-handoff.md docs/plans/archive/opus-handoff.md
```

**Create Legacy README:**

`docs/legacy/README.md`:

```markdown
# Legacy Files Archive

This directory contains v5.0 files that have been superseded by v6.0+ architecture.

**Last Updated:** 2025-12-29 (v6.1.4)

---

## What's Here

### `/modes-v5/` - v5.0 Mode Definitions
Original mode files from v5.0 release. Superseded by `/phases/` modular architecture in v6.0.

**Files:**
- `mode-1-full-analysis.md` - Full resume analysis (v5.0)
- `mode-2-bullet-optimization.md` - Bullet optimization (v5.0)
- `mode-3-jd-comparison.md` - JD comparison (v5.0)

**Replaced by:**
- `/phases/phase-1/` - Job history v2.0, JD parser, entry router (v6.0.1)
- `/phases/phase-2/` - Evidence matching, blocking gates (v6.0.2)
- `/phases/phase-3/` - Workflow router, incremental updates (v6.0.3)
- `/phases/phase-4/` - Summary generation (v6.0.4)

---

### `/wireframes-v5/` - v5.0 Visual Diagrams
Original workflow wireframes from v5.0. Replaced by comprehensive ASCII + Mermaid diagrams in v6.1.3.

**Files:**
- `mode-1-workflow.md` - Full analysis wireframe (v5.0)
- `mode-2-workflow.md` - Bullet optimization wireframe (v5.0)
- `mode-3-workflow.md` - JD comparison wireframe (v5.0)

**Replaced by:** `/wireframes/` (v6.1.3)
- 10 files: 5 ASCII + 5 Mermaid (phase-1 through phase-4 + complete workflow)

---

### `/shared-v5/` - v5.0 Shared Components
Legacy shared components from v5.0, pre-modular architecture.

**Files:**
- `initial-greeting.md` - User greeting template (v5.0)
- `job-summary-creation.md` - Job summary generator (v5.0)

**Replaced by:**
- `/phases/phase-1/entry-router.md` - Handles greetings via routing (v6.0.1)
- `/phases/phase-4/summary-generation.md` - Professional summary (v6.0.4)

---

### `/implementation-prompts/` - One-Time Implementation Prompts
Terminal prompts used for implementing specific features. No longer needed after implementation.

**Files:**
- `ADD_REMOTE_WORK_LOGIC.md` - v5.1 remote work classification implementation prompt

**Status:** Feature implemented in v5.1, integrated into v6.0 system

---

### `CHANGELOG-v5.md` - Outdated Changelog
Root-level changelog from v5.0 (duplicate of `docs/CHANGELOG.md`).

**Why archived:**
- Duplicate file (canonical version is `docs/CHANGELOG.md`)
- Last updated Dec 27, 2024 (stops at v5.0)
- Superseded by comprehensive v6.0 changelog

**Current changelog:** `docs/CHANGELOG.md` (v6.0.0+)

---

## Why Archive Instead of Delete?

These files provide historical context for:
1. **Understanding evolution** - How v5.0 architecture evolved to v6.0
2. **Migration reference** - For users with v5.0 job history files
3. **Design decisions** - Why certain approaches were replaced
4. **Rollback capability** - If needed to reference v5.0 implementation

---

## Related Documentation

- **Current Architecture:** See `PROJECT-INSTRUCTIONS.md` (v6.0.0)
- **Version History:** See `docs/CHANGELOG.md`
- **Roadmap:** See `ROADMAP.md`
- **Plans:** See `docs/plans/v6.*.md`
```

**Success Criteria:**
- [ ] All obsolete files moved to `/docs/legacy/`
- [ ] Legacy README created explaining archival
- [ ] No duplicate files in active directories
- [ ] Original directories removed (modes/, old wireframes/)

**Estimated Time:** 20 minutes

---

### v6.1.5 - Test Case Gap-Filling

**Goal:** Create test cases for Phases 2-4 to supplement existing Phase 1 coverage

**Background:**
- Existing: `v6.0-deep-dive-test-cases.md` (95+ tests, mostly Phase 1)
- Missing: Integration tests, incremental updates, re-comparison, summary validation

**Deliverable:** Plan for Opus to create 30+ new test cases

---

## üìÑ OPUS TEST PLAN (Copy this section to give to Opus)

```markdown
# Test Case Gap-Filling for v6.0 Phases 2-4

**Goal:** Create test cases for Phases 2-4 to supplement the existing 95+ test cases in `v6.0-deep-dive-test-cases.md`

**Context:**
- v6.0 is fully implemented across 4 phases
- Existing test file covers Phase 1 comprehensively (JD parser, skills categorizer, router basics)
- Gaps exist in Phase 2-4 integration flows and edge cases

---

## Test Coverage Gaps Identified

### Gap 1: Phase 2 Integration Flow (Mode 1 ‚Üí Mode 3)
**Missing:** End-to-end integration tests validating data flow from job history creation to evidence matching

**Required Test Cases (~8 tests):**

1. **INT-001:** User runs Phase 1 (creates job history v2.0) ‚Üí immediately runs Phase 3 (JD comparison)
   - **Validate:** v2.0 job history loads correctly, hard/soft skills separated, evidence citations use proper format
   - **Expected:** All 12 job history sections accessible, no null reference errors

2. **INT-002:** User has v1.0 job history ‚Üí runs Phase 3 (backward compatibility)
   - **Validate:** Phase 3 loads v1.0 format, suggests upgrade, still functions
   - **Expected:** Evidence matching works with combined skills_demonstrated array

3. **INT-003:** Phase 1 creates job history with missing sections (no education/certifications)
   - **Validate:** Phase 3 handles null sections gracefully
   - **Expected:** Evidence matcher doesn't fail, marks education/certification requirements as MISSING

4. **INT-004:** Job history has duplicate skills across positions (e.g., "Python" in 3 roles)
   - **Validate:** Evidence citations list all occurrences
   - **Expected:** Multiple citations: "Python mentioned in: Position 1, Position 2, Position 3"

5. **INT-005:** Phase 1 creates job history with overlapping dates (moonlighting scenario)
   - **Validate:** Evidence matcher doesn't double-count years of experience
   - **Expected:** Conservative aggregate calculation, note overlap in citations

6. **INT-006:** JD requirement matches achievement but not explicit skill listing
   - **Validate:** Evidence matcher infers skill from achievement context
   - **Expected:** Status = INFERRED, citation = achievement quote, confidence score documented

7. **INT-007:** JD has "Required" and "Preferred" skills ‚Üí job history matches some of each
   - **Validate:** Evidence matcher weights Required > Preferred in scoring
   - **Expected:** Missing Required skill impacts score more than missing Preferred

8. **INT-008:** Blocking gates trigger (hard skill deficit, low match score, location mismatch)
   - **Validate:** User can override each gate, system continues after "yes" confirmation
   - **Expected:** Override logged, recommendations still generated with warning

---

### Gap 2: Phase 3 Incremental Updates
**Missing:** Edge case tests for add/edit/remove position operations

**Required Test Cases (~10 tests):**

1. **INC-001:** User adds new position to job history (most recent role)
   - **Validate:** Position inserted chronologically (Position 1), indices shifted
   - **Expected:** Previous Position 1 becomes Position 2, aggregates recalculated

2. **INC-002:** User adds position in the middle (not most recent)
   - **Validate:** Correct chronological insertion, indices recalculated
   - **Expected:** If dates are 2015-2017, inserted between 2018 and 2014 positions

3. **INC-003:** User edits existing position (updates achievements)
   - **Validate:** Only target position modified, others unchanged
   - **Expected:** Version comment added, aggregates recalculated if metrics changed

4. **INC-004:** User removes position from job history
   - **Validate:** Position deleted, indices recalculated, aggregates updated
   - **Expected:** Years of experience reduced, skills from removed position excluded from aggregates

5. **INC-005:** User adds position with no hard skills
   - **Validate:** hard_skills_demonstrated = empty array, not null
   - **Expected:** Schema validation passes, evidence matcher handles gracefully

6. **INC-006:** User edits position dates (extending duration)
   - **Validate:** Aggregate years of experience recalculated
   - **Expected:** If original 2020-2022 (2 years) ‚Üí 2020-2023 (3 years), total +1 year

7. **INC-007:** User adds position with company that already exists in history
   - **Validate:** Both positions preserved, evidence citations disambiguate
   - **Expected:** "Google | Software Engineer (2018-2020)" vs "Google | Senior SWE (2020-2022)"

8. **INC-008:** User removes last remaining position
   - **Validate:** System warns before deletion
   - **Expected:** "This will delete your entire job history. Confirm?"

9. **INC-009:** User adds position with future start date (error case)
   - **Validate:** Date validation catches error
   - **Expected:** "Start date cannot be in the future. Please verify dates."

10. **INC-010:** User adds position while Phase 3 comparison is in progress
    - **Validate:** System handles concurrent operations
    - **Expected:** Either queue update or prompt user to wait for comparison to complete

---

### Gap 3: Phase 3 Re-Comparison with Diff Output
**Missing:** Diff accuracy validation tests

**Required Test Cases (~7 tests):**

1. **DIFF-001:** User updates job history (adds Python skill) ‚Üí re-runs previous JD comparison
   - **Validate:** Diff shows: "Python: MISSING ‚Üí MATCHED"
   - **Expected:** Improvements section lists Python with before/after status

2. **DIFF-002:** User re-runs comparison without any job history changes
   - **Validate:** Diff shows "No changes detected"
   - **Expected:** All requirements maintain same status (MATCHED stays MATCHED, MISSING stays MISSING)

3. **DIFF-003:** Score delta calculation accuracy
   - **Validate:** Previous score 72%, new score 81% ‚Üí delta = +9 points
   - **Expected:** Diff output: "Overall Match: 72% ‚Üí 81% (+9 points improvement)"

4. **DIFF-004:** User updates job history but removes a previously matched skill
   - **Validate:** Diff shows regression: "SQL: MATCHED ‚Üí PARTIAL" (if still partially present)
   - **Expected:** Regressions section lists SQL with explanation

5. **DIFF-005:** JD cached version mismatch (cache is v1, current schema is v2)
   - **Validate:** System detects version mismatch, re-parses JD
   - **Expected:** Warning: "Cached JD uses outdated schema. Re-parsing..."

6. **DIFF-006:** User runs re-comparison with different job history version (v1.0 ‚Üí v2.0 upgrade)
   - **Validate:** Diff handles schema change gracefully
   - **Expected:** Note: "Job history upgraded from v1.0 to v2.0. Hard/soft skills now separated."

7. **DIFF-007:** User deletes cached JD ‚Üí tries to re-compare
   - **Validate:** System detects missing cache, prompts for JD re-upload
   - **Expected:** "Cached JD not found. Please paste the job description again."

---

### Gap 4: Phase 4 Professional Summary Validation
**Missing:** Summary quality and accuracy tests

**Required Test Cases (~7 tests):**

1. **SUM-001:** Master summary generation from complete job history (3 positions)
   - **Validate:** 3-4 sentences, includes aggregates (total years, companies, team sizes)
   - **Expected:** "Senior PM with 8 years across Google, Amazon, Startup. Led 15+ product launches..."

2. **SUM-002:** Master summary from single position
   - **Validate:** Adjusts phrasing to avoid "across X companies"
   - **Expected:** "Senior PM with 3 years at Google. Led 5 product launches..."

3. **SUM-003:** Per-JD summary customization (JD requires Python, AWS, Kubernetes)
   - **Validate:** Replaces generic hard skills with JD-specific keywords
   - **Expected:** Original: "Expert in Agile, SQL, JavaScript" ‚Üí Customized: "Expert in Python, AWS, Kubernetes"

4. **SUM-004:** Summary generation with no quantified metrics in job history
   - **Validate:** Omits metrics sentence gracefully
   - **Expected:** "Senior PM with 5 years at TechCorp. Led cross-functional teams. Expert in..."

5. **SUM-005:** Per-JD summary when match score < 50
   - **Validate:** System doesn't offer per-JD summary (low fit job)
   - **Expected:** Only master summary provided, no customization offered

6. **SUM-006:** Summary exceeds 350 character limit
   - **Validate:** Truncates intelligently at sentence boundary
   - **Expected:** Last incomplete sentence removed, ends with period

7. **SUM-007:** User has career change (unrelated positions: Teacher ‚Üí Software Engineer)
   - **Validate:** Summary emphasizes transferable skills
   - **Expected:** "Career transitioned from education to software engineering. 3 years teaching..."

---

## Test File Structure Recommendation

**Option A: Append to Existing File** (RECOMMENDED)
Add new sections to `v6.0-deep-dive-test-cases.md`:

```markdown
## PART 10: Phase 2 Integration Flow Tests (8 tests)
[INT-001 through INT-008]

## PART 11: Phase 3 Incremental Update Tests (10 tests)
[INC-001 through INC-010]

## PART 12: Phase 3 Re-Comparison Diff Tests (7 tests)
[DIFF-001 through DIFF-007]

## PART 13: Phase 4 Professional Summary Tests (7 tests)
[SUM-001 through SUM-007]
```

**Option B: Create Separate Phase Files**
Create new files:
- `test-cases-phase-2-integration.md` (8 tests)
- `test-cases-phase-3-workflows.md` (17 tests)
- `test-cases-phase-4-summaries.md` (7 tests)

---

## Deliverable Format

For each test case, provide:

```markdown
| Test ID | Scenario | Input | Expected Output | Validation Rule |
|---------|----------|-------|-----------------|-----------------|
| [ID] | [Description] | [What user provides] | [What system should do] | [How to verify correctness] |
```

**Example:**

| Test ID | Scenario | Input | Expected Output | Validation Rule |
|---------|----------|-------|-----------------|-----------------|
| INT-001 | Phase 1 ‚Üí Phase 3 integration | Job history v2.0 + JD | Evidence citations with proper format | Check: "Company \| Job Title" format, no "Resume -" prefix |

---

## Success Criteria

- [ ] 32 new test cases created (8 + 10 + 7 + 7)
- [ ] Each test has: ID, scenario, input, expected output, validation rule
- [ ] Tests integrated into existing test documentation (appended to `v6.0-deep-dive-test-cases.md` or separate files)
- [ ] Test IDs follow naming convention (INT-XXX, INC-XXX, DIFF-XXX, SUM-XXX)
- [ ] Total test coverage: 127+ tests (95 existing + 32 new)

---

## Additional Context for Opus

**Existing Test Coverage (v6.0-deep-dive-test-cases.md):**
- JD Parser: 22 tests (missing fields, location, salary)
- Skills Categorizer: 25 tests (ambiguous skills, multi-meaning)
- Evidence Matcher: 16 tests (citations, confidence) - PARTIAL, needs integration tests
- Router: 17 tests (intent, state recovery)
- Summary Generator: 8 tests (edge cases) - PARTIAL, needs quality validation

**Phase Implementation Details:**
- **Phase 1 (v6.0.1):** Job history v2.0, 17-point JD parser, entry router
- **Phase 2 (v6.0.2):** Evidence matching with citations, blocking gates
- **Phase 3 (v6.0.3):** Workflow router, incremental updates, re-comparison
- **Phase 4 (v6.0.4):** Professional summary (master + per-JD)

**Files to Reference:**
- `phases/phase-2/evidence-matching.md` - Evidence matching logic
- `phases/phase-3/incremental-updates.md` - Add/edit/remove operations
- `phases/phase-3/re-comparison.md` - Diff calculation logic
- `phases/phase-4/summary-generation.md` - Summary templates

---

**Estimated Completion Time:** 45-60 minutes
```

---

## üîÑ Execution Sequence

### Step 1: v6.1.1 - Folder Restructure (30 min)
1. Rename `shared/` ‚Üí `phases/`
2. Update references in 5 files
3. Search for remaining `shared/` references
4. Commit: `refactor(v6.1.1): rename /shared/ to /phases/ for clarity`

### Step 2: v6.1.2 - Documentation Updates (45 min)
1. Update README.md (28 Mode‚ÜíPhase changes + Job Summary tip)
2. Add CHANGELOG v6.1.0 entry
3. Add ROADMAP v6.1.0 entry
4. Commit: `docs(v6.1.2): terminology consistency and Job Summary guide`

### Step 3: v6.1.3 - Wireframe Creation (90 min)
1. Create `/wireframes/` directory
2. Write 10 wireframe files (5 ASCII + 5 Mermaid)
3. Test rendering (ASCII in terminal, Mermaid on GitHub)
4. Commit: `docs(v6.1.3): add comprehensive visual wireframes for all phases`

### Step 4: v6.1.4 - Legacy Archival (20 min)
1. Create `/docs/legacy/` structure
2. Move obsolete files
3. Create legacy README
4. Commit: `chore(v6.1.4): archive v5.0 legacy files to docs/legacy`

### Step 5: v6.1.5 - Test Case Gap-Filling (Opus)
1. Provide Opus with test plan (from section above)
2. Review Opus deliverable (32 new test cases)
3. Integrate into test documentation
4. Commit: `test(v6.1.5): add 32 test cases for Phases 2-4 integration`

**Total estimated time:** ~3 hours (excluding Opus work)

---

## ‚úÖ Success Criteria

### Functional
- [ ] All `/shared/` references updated to `/phases/`
- [ ] README has Job Summary usage guide
- [ ] 28 Mode‚ÜíPhase terminology updates complete
- [ ] 10 wireframe files created and rendering correctly
- [ ] All legacy files archived to `/docs/legacy/`
- [ ] No broken file paths or duplicate files

### Documentation
- [ ] CHANGELOG v6.1.0 entry complete with all sub-versions
- [ ] ROADMAP v6.1.0 tracking entry added
- [ ] Legacy README explains what's archived and why
- [ ] Version updated to 6.1.0 in README

### Testing
- [ ] Test plan provided to Opus
- [ ] 32 new test cases created by Opus
- [ ] Test cases integrated into documentation
- [ ] Total coverage: 127+ tests

### Quality
- [ ] Each sub-version has its own plan document
- [ ] Each commit uses conventional commit format
- [ ] Inline version comments added (v6.1.X)
- [ ] All files pass validation checks

---

## üìä Impact Summary

**Files to rename:** 1 directory (`shared/` ‚Üí `phases/`)
**Files to create:** 17 files (10 wireframes + 5 plans + 1 legacy README + 1 test doc)
**Files to modify:** 5 files (README, CHANGELOG, ROADMAP, PROJECT-INSTRUCTIONS, quick-start-mode)
**Files to move:** ~12 files (to `/docs/legacy/`)
**Files to delete:** 1 file (root `CHANGELOG.md` duplicate)

**Total changes:** ~36 file operations

---

## üöÄ Next Steps (Post-v6.1.0)

### v6.1.1+ (Future patches)
- User feedback on wireframe clarity
- Additional test cases if gaps found
- Quick-start-mode.md terminology updates

### v6.2.0+ (Future features)
- Output specification templates (from ROADMAP)
- Enhanced error messages (E001-E008)
- Batch JD comparison

---

**Plan Status:** READY FOR USER APPROVAL
**Created:** 2025-12-29
**Next Step:** Get user confirmation, then execute v6.1.1


# --- FILE: docs/plans/v6.1.1-folder-restructure.md ---


# v6.1.1 - Folder Restructure

**Branch:** `v6.1.1-folder-restructure`
**Date:** 2025-12-29
**Type:** REFACTOR (Folder rename for clarity)
**Parent:** v6.0.4-summary-polish

---

## üéØ Goal

Rename `/shared/` ‚Üí `/phases/` for clearer architecture naming that aligns with v6.0 phase-based structure.

---

## üìã Changes

### 1. Rename Directory
```bash
mv shared/ phases/
```

### 2. Update References

**Files to modify:**

1. **PROJECT-INSTRUCTIONS.md** (~15 occurrences)
   - `shared/phase-1/` ‚Üí `phases/phase-1/`
   - `shared/phase-2/` ‚Üí `phases/phase-2/`
   - `shared/phase-3/` ‚Üí `phases/phase-3/`
   - `shared/phase-4/` ‚Üí `phases/phase-4/`

2. **README.md** (File structure tree)
   - Line 217-221: `/shared/` ‚Üí `/phases/` in directory tree

3. **docs/CHANGELOG.md** (v6.0.0 entry references)
   - Update file path references in v6.0.0 section

4. **ROADMAP.md** (Phase tracking references)
   - Update module path references

5. **quick-start-mode.md** (If any references exist)
   - Search and update any `shared/` references

---

## ‚úÖ Success Criteria

- [ ] Directory renamed: `shared/` ‚Üí `phases/`
- [ ] All `shared/phase-X/` references changed to `phases/phase-X/`
- [ ] No broken file paths in PROJECT-INSTRUCTIONS.md
- [ ] Search returns 0 results for `shared/phase-` (excluding docs/legacy)
- [ ] Git status shows renamed directory, not deleted+created

---

## üîç Validation

```bash
# Search for remaining shared/ references
grep -r "shared/phase-" --exclude-dir=".git" --exclude-dir="docs/legacy" .

# Verify phases/ references work
grep -r "phases/phase-1" PROJECT-INSTRUCTIONS.md

# Check git status
git status
```

---

## üìù Commit Message

```
refactor(v6.1.1): rename /shared/ to /phases/ for clarity

Renamed /shared/ directory to /phases/ to better align with v6.0
phase-based architecture naming. Updated all references across:
- PROJECT-INSTRUCTIONS.md (15 occurrences)
- README.md (file structure tree)
- docs/CHANGELOG.md (v6.0.0 entry)
- ROADMAP.md (phase tracking)

This is purely a structural rename with no functional changes.

ü§ñ Generated with [Claude Code](https://claude.com/claude-code)

Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>
```

---

## üöÄ Next Step

After commit, create branch `v6.1.2-documentation-updates` and proceed with README/CHANGELOG/ROADMAP updates.

---

**Estimated Time:** 30 minutes


# --- FILE: docs/plans/v6.1.2-documentation-updates.md ---


# v6.1.2 - Documentation Updates Implementation Plan

## Goal
Update terminology consistency (Mode ‚Üí Phase) and add Job Summary feature documentation across user-facing documentation files.

## Background
v6.1.1 renamed `/shared/` ‚Üí `/phases/` for clearer architecture. v6.1.2 completes the terminology alignment by updating user-facing documentation to use "Phase" instead of "Mode" consistently, and adds documentation for the Job Summary generation feature introduced in v6.0.4.

## Proposed Changes

### [README.md](file:///Users/mkaplan/Documents/GitHub/optimize-my-resume/README.md)

#### Terminology Updates (28 occurrences)

**Lines 11-13** - "What This System Does" section:
- "Mode 1" ‚Üí "Phase 1"
- "Mode 2" ‚Üí "Phase 2"  
- "Mode 3" ‚Üí "Phase 3"

**Line 30** - Prerequisites section:
- "Makes Mode 3 much better" ‚Üí "Makes Phase 3 much better"

**Lines 65-67** - Claude instructions:
- "Mode 1/2/3" ‚Üí "Phase 1/2/3"

**Lines 252, 257, 262** - Tips section headers:
- "Start with Mode 1" ‚Üí "Start with Phase 1"
- "Be Specific with Mode 2" ‚Üí "Be Specific with Phase 2"
- "Paste the FULL Job Description for Mode 3" ‚Üí "...for Phase 3"

**Line 268** - Job history tip:
- "After Mode 1 analyzes" ‚Üí "After Phase 1 analyzes"

**Lines 283-285** - Troubleshooting:
- "Mode 3 says..." ‚Üí "Phase 3 says..."
- "Mode 1 first" ‚Üí "Phase 1 first"
- "Mode 1 creates" ‚Üí "Phase 1 creates"

**Line 304** - Section header:
- "What Each Mode Does (Detailed)" ‚Üí "What Each Phase Does (Detailed)"

**Lines 306, 330, 347** - Subsection headers:
- "Mode 1: Full Resume Analysis" ‚Üí "Phase 1: Full Resume Analysis"
- "Mode 2: Bullet Point Optimization" ‚Üí "Phase 2: Bullet Point Optimization"
- "Mode 3: Job Description Matching" ‚Üí "Phase 3: Job Description Matching"

**Line 378** - Workflow section header:
- "How to Use All Three Modes Together" ‚Üí "How to Use All Three Phases Together"

**Lines 382, 388, 393, 399** - Workflow steps:
- "Run Mode 1 once" ‚Üí "Run Phase 1 once"
- "Update individual bullets with Mode 2" ‚Üí "...with Phase 2"
- "Use Mode 3 for each job application" ‚Üí "Use Phase 3..."
- "Re-run Mode 1 periodically" ‚Üí "Re-run Phase 1..."

**Line 492** - FAQ:
- "Run Mode 1/2/3" ‚Üí "Run Phase 1/2/3"

#### Job Summary Usage Guide (NEW)

Insert after line 271 (after tip #4):

```markdown
### 5. **Use Job Summary Generation for Applications**
   - After Phase 3 analyzes a job description, ask: \"Create a professional summary for this job\"
   - The system generates TWO types of summaries:
     - **Master Summary:** Comprehensive overview of your entire career (stored in job history)
     - **Per-JD Summary:** Customized version optimized for the specific job posting (ephemeral)
   - **Use cases:**
     - Cover letters: Lead with the per-JD summary
     - LinkedIn applications: Paste customized summary in \"Why are you interested?\" section
     - Email applications: Include in the body to show tailored interest
   - **Pro tip:** The per-JD summary includes JD keywords for ATS optimization
```

#### Version Updates

**Lines 407-408**:
- "Current Version:** 6.0.0" ‚Üí "Current Version:** 6.1.0"
- "Released:** December 29, 2025" (keep date)

**Line 411**:
- "What's New in v6.0:" ‚Üí "What's New in v6.1:"

**Add v6.1 features list** (replace existing v6.0 list):
```markdown
### What's New in v6.1:
- **Enhanced Documentation** - Consistent phase terminology across all docs
- **Job Summary Usage Guide** - Clear instructions for professional summary generation
- **Visual Wireframes** - 10 comprehensive workflow diagrams (ASCII + Mermaid)
- **Improved File Structure** - `/phases/` folder for clearer organization
- **Expanded Test Coverage** - 30+ new test cases for Phases 2-4

### What Was New in v6.0:
- **Smart Routing System** - Automatically detects what you need and confirms before proceeding (8 different scenarios)
- **Job History v2.0** - Expanded from 8 to 12 categories for better analysis
- **Hard vs. Soft Skills Separation** - Better matching for technical vs. interpersonal skills
- **17-Point Job Description Parser** - More thorough analysis of job postings
- **Evidence-Based Matching** - Shows exact resume quotes that match job requirements
- **Blocking Gates** - Warns you before applying for jobs that are poor fits
- **Incremental Updates** - Add, edit, or remove positions without re-analyzing everything
- **JD Re-Comparison** - Re-check job fit after updating your resume, see what improved
- **Professional Summary Generation** - Creates custom summaries for each job application
```

---

### [CHANGELOG.md](file:///Users/mkaplan/Documents/GitHub/optimize-my-resume/docs/CHANGELOG.md)

Add v6.1.0 entry after line 10 (in Unreleased section):

```markdown
### v6.1.0 - Documentation Enhancement & Job Summary Guide (2025-12-29)
> **Branch:** `v6.1.0`

#### Added
- **Job Summary Usage Guide** - New tip section in README explaining how to use professional summary generation
  - Master summary vs per-JD summary differences
  - Use cases (cover letters, LinkedIn, email applications)
  - ATS keyword optimization tip
- **Comprehensive Wireframes** - 10 visual workflow guides (5 ASCII + 5 Mermaid)
  - Phase 1: Foundation (job history v2.0, JD parser, entry router)
  - Phase 2: Core Integration (evidence matching, blocking gates)
  - Phase 3: Router & Workflows (8-scenario routing, incremental updates)
  - Phase 4: Summary & Polish (professional summary generation)
  - Complete Workflow: End-to-end user journey
- **Test Case Expansion** - 30+ new test cases for Phases 2-4
  - Integration flow tests (Phase 1 ‚Üí Phase 3)
  - Incremental update edge cases
  - Re-comparison diff accuracy validation
  - Professional summary quality checks

#### Changed
- **Terminology Consistency** - "Mode 1/2/3" ‚Üí "Phase 1/2/3" across all user-facing documentation
  - README.md: 28 occurrences updated
  - quick-start-mode.md: Updated to use phase terminology
  - Consistent with internal architecture (`/phases/` folder structure)
- **Folder Structure** - Renamed `/shared/` ‚Üí `/phases/` for clearer naming
  - Updated all references in PROJECT-INSTRUCTIONS.md, README.md, CHANGELOG.md, ROADMAP.md
- **Version Numbering** - Updated README from v6.0.0 ‚Üí v6.1.0

#### Removed
- **Obsolete v5.0 Files** - Archived to `/docs/legacy/`
  - `/modes/` directory ‚Üí `/docs/legacy/modes-v5/`
  - `/wireframes/` (v5.0) ‚Üí `/docs/legacy/wireframes-v5/`
  - `/phases/v5-legacy/` ‚Üí `/docs/legacy/shared-v5/`
  - Root `CHANGELOG.md` (duplicate) ‚Üí `/docs/legacy/CHANGELOG-v5.md`
  - `ADD_REMOTE_WORK_LOGIC.md` ‚Üí `/docs/legacy/implementation-prompts/`

#### Impact
- ‚úÖ Clearer user experience with consistent terminology
- ‚úÖ Better onboarding with Job Summary usage guide
- ‚úÖ Improved developer experience with visual wireframes
- ‚úÖ Cleaner repository structure with legacy files archived

---
```

---

### [ROADMAP.md](file:///Users/mkaplan/Documents/GitHub/optimize-my-resume/ROADMAP.md)

Update lines 3-4:
- "Current Version: v6.0.0" ‚Üí "Current Version: v6.1.0"
- "In Development: v6.1.0" ‚Üí "In Development: v6.2.0"

Add v6.1.0 entry after v6.0.4 section (around line 95):

```markdown
---

## v6.1.0 - Documentation Enhancement (COMPLETE)

**Branch:** `v6.1.0` | **Status:** Complete | **Date:** 2025-12-29

### Sub-Versions
- ‚úÖ v6.1.1 - Folder restructure (`/shared/` ‚Üí `/phases/`)
- ‚úÖ v6.1.2 - Documentation updates (terminology + Job Summary guide)
- ‚úÖ v6.1.3 - Wireframe creation (10 files)
- ‚úÖ v6.1.4 - Legacy archival
- ‚úÖ v6.1.5 - Test case gap-filling

### Features
- [x] Job Summary usage guide in README
- [x] Terminology consistency (Mode ‚Üí Phase)
- [x] 10 comprehensive wireframes (ASCII + Mermaid)
- [x] 30+ new test cases for Phases 2-4
- [x] Legacy file archival to /docs/legacy/

**Notes:** Documentation-focused release improving user experience and developer onboarding. Completes terminology alignment started with `/phases/` folder rename.

---
```

Update "v6.1.0 - Polish & Edge Cases (Future)" section (line 96) to "v6.2.0":

```markdown
## v6.2.0 - Polish & Edge Cases (Future)

**Planned Features:**
- [ ] Summary generator edge cases
- [ ] Enhanced error messages (E001-E008)
- [ ] Output specification templates (ensure consistent output across LLMs)
  - Exact templates for each output type
  - Formatting rules (no emojis, bullet styles, spacing)
  - Required vs optional sections
  - Character limits where applicable

**Removed from scope:**
- ~~State recovery (checkpoints, undo)~~ - Not possible without environment control. File-based persistence only.

---
```

Update "v6.2.0+ - Resume Generation (Future)" to "v6.3.0+":

```markdown
## v6.3.0+ - Resume Generation (Future)
```

---

## Verification Plan

### Automated Tests
None required - this is documentation-only changes.

### Manual Verification

1. **README.md terminology check:**
   ```bash
   # From project root
   grep -n "Mode [123]" README.md
   # Should return 0 results (all should be "Phase [123]")
   
   grep -n "Phase [123]" README.md | wc -l
   # Should return ~28 results
   ```

2. **Job Summary section exists:**
   ```bash
   grep -A 10 "Use Job Summary Generation" README.md
   # Should display the new tip section
   ```

3. **Version numbers updated:**
   ```bash
   grep "Version.*6.1.0" README.md
   # Should show updated version
   
   grep "v6.1.0" docs/CHANGELOG.md
   # Should show new changelog entry
   
   grep "v6.1.0" ROADMAP.md
   # Should show new roadmap entry
   ```

4. **Cross-reference validation:**
   - Open README.md and verify all Phase references make sense in context
   - Check that file structure tree (lines 217-228) still references `/phases/` correctly
   - Verify CHANGELOG v6.1.0 entry is properly formatted
   - Verify ROADMAP v6.1.0 entry is marked complete

5. **Git status check:**
   ```bash
   git status
   # Should show 3 modified files: README.md, docs/CHANGELOG.md, ROADMAP.md
   ```

---

## Success Criteria

- [ ] All 28 "Mode" ‚Üí "Phase" references updated in README.md
- [ ] Job Summary usage guide added to README.md (tip #5)
- [ ] Version updated to 6.1.0 in README.md
- [ ] v6.1.0 changelog entry added with all sub-versions
- [ ] v6.1.0 roadmap entry added and marked complete
- [ ] No remaining "Mode 1/2/3" references in README (verified by grep)
- [ ] All cross-references working correctly
- [ ] Files ready for commit with conventional commit message

---

## Estimated Time
45 minutes


# --- FILE: docs/plans/v6.1.3-wireframes.md ---


# v6.1.3 - Wireframe Creation Implementation Plan

## Goal
Create 10 comprehensive visual workflow guides (5 ASCII + 5 Mermaid) to explain the project architecture and phases.

## Proposed Changes

### 1. Create Wireframe Files
Each phase gets an ASCII version (for terminal view) and a Mermaid version (for GitHub rendering).

- **Phase 1: Foundation**
  - `wireframes/phase-1-foundation-ascii.md`
  - `wireframes/phase-1-foundation-mermaid.md`
- **Phase 2: Core Integration**
  - `wireframes/phase-2-core-integration-ascii.md`
  - `wireframes/phase-2-core-integration-mermaid.md`
- **Phase 3: Router & Workflows**
  - `wireframes/phase-3-router-workflows-ascii.md`
  - `wireframes/phase-3-router-workflows-mermaid.md`
- **Phase 4: Summary & Polish**
  - `wireframes/phase-4-summary-polish-ascii.md`
  - `wireframes/phase-4-summary-polish-mermaid.md`
- **Complete Workflow**
  - `wireframes/complete-workflow-ascii.md`
  - `wireframes/complete-workflow-mermaid.md`

## Wireframe Content Details

### Phase 1 - Foundation
- **Focus:** Job history v2.0 creation, 17-point JD parsing, entry router.

### Phase 2 - Core Integration
- **Focus:** Evidence matching flow, blocking gates logic, Phase 2/3 enhancements.

### Phase 3 - Router & Workflows
- **Focus:** 8-scenario routing, incremental updates, JD re-comparison.

### Phase 4 - Summary & Polish
- **Focus:** Master summary generation, per-JD customization.

### Complete Workflow
- **Focus:** End-to-end user journey (entry ‚Üí routing ‚Üí execution ‚Üí output).

## Template Structure
Each file will include:
1. Overview
2. Diagram (ASCII/Mermaid)
3. Key Decision Points
4. Inputs/Outputs
5. Related Files/Phases

## Success Criteria
- [ ] 10 wireframe files created.
- [ ] All Mermaid diagrams render correctly.
- [ ] ASCII art is clear and fits terminal widths.
- [ ] Cross-references between phases are accurate.


# --- FILE: docs/plans/v6.1.4-legacy-archival.md ---


# v6.1.4 - Legacy Archival Implementation Plan

## Goal
Archive obsolete v5.0 files to `/docs/legacy/` to clean up the repository root while preserving historical context.

## Proposed Changes

### 1. Create Legacy Directory Structure
```bash
mkdir -p docs/legacy/{modes-v5,wireframes-v5,shared-v5,implementation-prompts}
mkdir -p docs/plans/archive
```

### 2. Move Obsolete Files
- **Modes (v5.0):** Move `modes/` contents to `docs/legacy/modes-v5/` and remove `modes/`.
- **Phases (v5.0):** Move `phases/v5-legacy/` contents to `docs/legacy/shared-v5/` and remove `phases/v5-legacy/`.
- **Root Files:**
  - `CHANGELOG.md` -> `docs/legacy/CHANGELOG-v5.md`
  - `ADD_REMOTE_WORK_LOGIC.md` -> `docs/legacy/implementation-prompts/`
- **Internal Artifacts:**
  - `phases/opus-handoff.md` -> `docs/plans/archive/opus-handoff.md`

### 3. Create Legacy README
Create `docs/legacy/README.md` explaining why these files were archived and what replaced them.

## Success Criteria
- [ ] All target files moved to `/docs/legacy/` or `/docs/plans/archive/`.
- [ ] Obsolete directories (`modes/`, `phases/v5-legacy/`) removed.
- [ ] `docs/legacy/README.md` created.
- [ ] No broken references in active documentation (verified by grep).
